# ­ЪќЦ№ИЈ рЃЏрЃЮрЃЊрЃБрЃџрЃў: `ui_manager`

**­ЪЌѓ№ИЈ рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃљ:** `utilities`
**Рюњ№ИЈ рЃљрЃЋрЃбрЃЮрЃарЃў:** Synapse Framework Team
**­Ъћќ рЃЋрЃћрЃарЃАрЃўрЃљ:** 5.0.0

## 1. ­ЪЊю рЃЏрЃўрЃЏрЃЮрЃ«рЃўрЃџрЃЋрЃљ

`ui_manager` рЃљрЃарЃўрЃА Synapse Framework-рЃўрЃА **рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃўрЃА (UI) рЃфрЃћрЃюрЃбрЃарЃљрЃџрЃБрЃарЃў "рЃЊрЃўрЃарЃўрЃЪрЃЮрЃарЃў"**. рЃЏрЃўрЃАрЃў рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃљрЃЏрЃЮрЃфрЃљрЃюрЃљрЃљ, рЃЏрЃљрЃарЃЌрЃЮрЃА UI-рЃА рЃАрЃљрЃћрЃарЃЌрЃЮ рЃЏрЃЊрЃњрЃЮрЃЏрЃљрЃарЃћрЃЮрЃЉрЃљ, рЃЊрЃљрЃљрЃЏрЃБрЃерЃљрЃЮрЃА рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃљрЃЦрЃфрЃўрЃљ рЃЊрЃљ рЃЎрЃЮрЃЮрЃарЃЊрЃўрЃюрЃљрЃфрЃўрЃљ рЃњрЃљрЃБрЃгрЃўрЃЮрЃА UI-рЃА рЃЊрЃљрЃюрЃљрЃгрЃћрЃЋрЃарЃћрЃЉрЃБрЃџ рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃА рЃерЃЮрЃарЃўрЃА рЃБрЃарЃЌрЃўрЃћрЃарЃЌрЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃљрЃА.

рЃћрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃерЃћрЃЦрЃЏрЃюрЃўрЃџрЃўрЃљ рЃўрЃЏрЃўрЃАрЃЌрЃЋрЃўрЃА, рЃарЃЮрЃЏ рЃАрЃарЃБрЃџрЃљрЃЊ рЃўрЃДрЃЮрЃА **рЃњрЃљрЃЏрЃўрЃ»рЃюрЃБрЃџрЃў (decoupled)** рЃюрЃћрЃЉрЃўрЃАрЃЏрЃўрЃћрЃарЃў рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃў рЃћрЃЎрЃарЃљрЃюрЃўрЃА рЃљрЃърЃљрЃарЃљрЃбрЃБрЃарЃўрЃАрЃњрЃљрЃю. рЃўрЃА рЃБрЃарЃЌрЃўрЃћрЃарЃЌрЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃА рЃќрЃЮрЃњрЃљрЃЊ рЃћрЃЎрЃарЃљрЃюрЃўрЃА рЃЊрЃарЃљрЃўрЃЋрЃћрЃарЃЌрЃљрЃю `display_driver_interface`-рЃўрЃА рЃЏрЃћрЃерЃЋрЃћрЃЮрЃЉрЃўрЃЌ, рЃарЃЮрЃЏрЃћрЃџрЃАрЃљрЃф `Dependency Injection` рЃЏрЃћрЃЦрЃљрЃюрЃўрЃќрЃЏрЃўрЃЌ рЃўрЃдрЃћрЃЉрЃА.

## 2. ­ЪЈЏ№ИЈ рЃљрЃарЃЦрЃўрЃбрЃћрЃЦрЃбрЃБрЃарЃБрЃџрЃў рЃърЃарЃўрЃюрЃфрЃўрЃърЃћрЃЉрЃў

- **рЃњрЃљрЃЏрЃЮрЃДрЃЮрЃцрЃўрЃџрЃў рЃбрЃљрЃАрЃЎрЃў (Dedicated Task):** UI-рЃАрЃЌрЃљрЃю рЃЊрЃљрЃЎрЃљрЃЋрЃерЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃДрЃЋрЃћрЃџрЃљ "рЃЏрЃФрЃўрЃЏрЃћ" рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃљ (рЃЏрЃћрЃюрЃўрЃБрЃА рЃљрЃњрЃћрЃЉрЃљ, рЃћрЃЎрЃарЃљрЃюрЃўрЃА рЃњрЃљрЃЊрЃљрЃ«рЃљрЃбрЃЋрЃљ) рЃАрЃарЃБрЃџрЃЊрЃћрЃЉрЃљ рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃљрЃЎрЃБрЃЌрЃљрЃа, рЃњрЃљрЃЏрЃЮрЃДрЃЮрЃцрЃўрЃџ FreeRTOS рЃбрЃљрЃАрЃЎрЃерЃў. `Event Handler`-рЃў рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃћрЃЉрЃА рЃљрЃњрЃќрЃљрЃЋрЃюрЃўрЃА рЃљрЃЏ рЃбрЃљрЃАрЃЎрЃўрЃА рЃарЃўрЃњрЃерЃў, рЃарЃљрЃф **рЃАрЃарЃБрЃџрЃљрЃЊ рЃљрЃдрЃЏрЃЮрЃцрЃ«рЃЋрЃарЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃБрЃарЃў рЃбрЃљрЃАрЃЎрЃћрЃЉрЃўрЃА (`Tmr Svc`) рЃАрЃбрЃћрЃЎрЃўрЃА рЃњрЃљрЃЊрЃљрЃЋрЃАрЃћрЃЉрЃўрЃА рЃарЃўрЃАрЃЎрЃА** рЃЊрЃљ рЃљрЃБрЃЏрЃ»рЃЮрЃЉрЃћрЃАрЃћрЃЉрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃАрЃљрЃћрЃарЃЌрЃЮ рЃарЃћрЃљрЃњрЃўрЃарЃћрЃЉрЃљрЃА.
- **рЃЊрЃљрЃюрЃљрЃгрЃћрЃЋрЃарЃћрЃЉрЃБрЃџрЃў рЃџрЃЮрЃњрЃўрЃЎрЃљ:** рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃЊрЃљрЃцрЃБрЃФрЃюрЃћрЃЉрЃБрЃџрЃўрЃљ рЃЊрЃљрЃюрЃљрЃгрЃћрЃЋрЃарЃћрЃЉрЃБрЃџ рЃљрЃарЃЦрЃўрЃбрЃћрЃЦрЃбрЃБрЃарЃљрЃќрЃћ:
  - **`ui_manager.c` (рЃЊрЃўрЃарЃўрЃЪрЃЮрЃарЃў):** рЃЏрЃљрЃарЃЌрЃљрЃЋрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃўрЃфрЃЮрЃфрЃ«рЃџрЃўрЃА рЃфрЃўрЃЎрЃџрЃА, рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃћрЃЉрЃА рЃЊрЃљ рЃАрЃљрЃЎрЃБрЃЌрЃљрЃа рЃбрЃљрЃАрЃЎрЃА.
  - **`ui_events.c` (рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃўрЃА рЃЊрЃљрЃЏрЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃћрЃџрЃў):** рЃўрЃдрЃћрЃЉрЃА рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃА рЃЊрЃљ рЃљрЃњрЃќрЃљрЃЋрЃюрЃўрЃА рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃћрЃЉрЃА `ui_task`-рЃерЃў.
  - **`ui_menu.c` (рЃЏрЃћрЃюрЃўрЃБрЃА рЃџрЃЮрЃњрЃўрЃЎрЃљ):** рЃерЃћрЃўрЃфрЃљрЃЋрЃА рЃЏрЃћрЃюрЃўрЃБрЃА рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљрЃА рЃЊрЃљ рЃюрЃљрЃЋрЃўрЃњрЃљрЃфрЃўрЃўрЃА рЃџрЃЮрЃњрЃўрЃЎрЃљрЃА.
  - **`ui_screens.c` (рЃћрЃЎрЃарЃљрЃюрЃћрЃЉрЃўрЃА рЃ«рЃљрЃбрЃЋрЃљ):** рЃърЃљрЃАрЃБрЃ«рЃўрЃАрЃЏрЃњрЃћрЃЉрЃћрЃџрЃўрЃљ рЃћрЃЎрЃарЃљрЃюрЃћрЃЉрЃўрЃА рЃЋрЃўрЃќрЃБрЃљрЃџрЃБрЃа рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃќрЃћ.
- **Service Consumer:** рЃћрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃљрЃарЃўрЃА рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃўрЃА рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃћрЃџрЃў.
- **Event Consumer:** рЃўрЃА рЃБрЃАрЃЏрЃћрЃюрЃА `SYNAPSE_EVENT_BUTTON_PRESSED` рЃЊрЃљ рЃАрЃ«рЃЋрЃљ рЃАрЃўрЃАрЃбрЃћрЃЏрЃБрЃа рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃА.
- **рЃћрЃюрЃћрЃарЃњрЃЮ-рЃћрЃцрЃћрЃЦрЃбрЃБрЃарЃЮрЃЉрЃљ:** рЃарЃЮрЃЊрЃћрЃАрЃљрЃф рЃћрЃЎрЃарЃљрЃюрЃў рЃњрЃљрЃЏрЃЮрЃарЃЌрЃБрЃџрЃўрЃљ, рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃљрЃЕрЃћрЃарЃћрЃЉрЃА рЃАрЃбрЃљрЃбрЃБрЃАрЃћрЃЉрЃўрЃА рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃўрЃА рЃърЃћрЃарЃўрЃЮрЃЊрЃБрЃџ рЃбрЃљрЃўрЃЏрЃћрЃарЃћрЃЉрЃА рЃћрЃюрЃћрЃарЃњрЃўрЃўрЃА рЃЊрЃљрЃАрЃљрЃќрЃЮрЃњрЃљрЃЊ.

## 3. РџЎ№ИЈ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ

рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃўрЃарЃЊрЃћрЃЉрЃљ рЃЏрЃўрЃАрЃў `config.json` рЃцрЃљрЃўрЃџрЃўрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃўрЃЌ.

| рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃў | рЃбрЃўрЃърЃў | рЃљрЃдрЃгрЃћрЃарЃљ | рЃАрЃљрЃЋрЃљрЃџрЃЊрЃћрЃЉрЃБрЃџрЃЮ |
| :--- | :--- | :--- | :---: |
| `instance_name` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | UI рЃЏрЃћрЃюрЃћрЃ»рЃћрЃарЃўрЃА рЃљрЃЏ рЃўрЃюрЃАрЃбрЃљрЃюрЃфрЃўрЃўрЃА рЃБрЃюрЃўрЃЎрЃљрЃџрЃБрЃарЃў рЃАрЃљрЃ«рЃћрЃџрЃў. | РюЁ |
| `display_driver_service` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | рЃўрЃЏ рЃћрЃЎрЃарЃљрЃюрЃўрЃА рЃЊрЃарЃљрЃўрЃЋрЃћрЃарЃўрЃА рЃАрЃћрЃарЃЋрЃўрЃАрЃўрЃА `instance_name`, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃБрЃюрЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃЮрЃА. | РюЁ |
| `wifi_service` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | рЃўрЃЏ `wifi_manager` рЃАрЃћрЃарЃЋрЃўрЃАрЃўрЃА `instance_name`, рЃарЃЮрЃЏрЃџрЃўрЃА рЃАрЃбрЃљрЃбрЃБрЃАрЃўрЃф рЃБрЃюрЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃЕрЃюрЃЊрЃћрЃА. | РюЁ |
| `wifi_module_handle` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | рЃўрЃЏ `wifi_manager` рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА `instance_name`, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃљрЃЊ рЃњрЃљрЃЊрЃљрЃћрЃфрЃћрЃЏрЃљ API-рЃА. | РюЁ |

**`config.json` рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:**

```json
[
  {
    "type": "ui_manager",
    "enabled": true,
    "config": {
      "instance_name": "main_ui_manager",
      "display_driver_service": "main_ssd1306_driver",
      "wifi_service": "main_wifi_manager",
      "wifi_module_handle": "main_wifi_manager"
    }
  }
]
```

## 4. ­Ъћї рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃБрЃџрЃў рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃў

- **`display_driver_api_t`**: рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ рЃДрЃЋрЃћрЃџрЃљ рЃАрЃљрЃ«рЃљрЃбрЃљрЃЋрЃў рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃўрЃАрЃЌрЃЋрЃўрЃА.
- **`system_manager_api_t`**: рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃўрЃА рЃАрЃўрЃўрЃА рЃЏрЃўрЃАрЃљрЃдрЃћрЃЉрЃљрЃЊ.
- **`timer_api_t`**: рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ Splash Screen-рЃўрЃА, рЃћрЃЎрЃарЃљрЃюрЃўрЃА рЃњрЃљрЃЌрЃўрЃерЃЋрЃўрЃА рЃЊрЃљ рЃАрЃбрЃљрЃбрЃБрЃАрЃћрЃЉрЃўрЃА рЃърЃћрЃарЃўрЃЮрЃЊрЃБрЃџрЃў рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃўрЃА рЃбрЃљрЃўрЃЏрЃћрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА.
- **`time_sync_api_t`**: рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ рЃќрЃБрЃАрЃбрЃў рЃЊрЃарЃЮрЃўрЃА рЃЏрЃўрЃАрЃљрЃдрЃћрЃЉрЃљрЃЊ.
- **`wifi_api_t`**: **(рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃБрЃџрЃўрЃљ)** рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ WiFi рЃАрЃбрЃљрЃбрЃБрЃАрЃўрЃА рЃљрЃАрЃўрЃюрЃЦрЃарЃЮрЃюрЃБрЃџрЃљрЃЊ, `Promise` рЃърЃљрЃбрЃћрЃарЃюрЃўрЃЌ рЃњрЃљрЃЏрЃЮрЃАрЃљрЃЌрЃ«рЃЮрЃЋрЃљрЃЊ.
- **`relay_api_t`**: рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ `relay_actuator` рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃљрЃЦрЃбрЃўрЃБрЃџрЃў рЃЏрЃљрЃарЃЌрЃЋрЃўрЃАрЃЌрЃЋрЃўрЃА рЃЏрЃћрЃюрЃўрЃБрЃЊрЃљрЃю.

## 5. ­ЪЊб рЃЊрЃљрЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃБрЃџрЃў рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃў

- **`SYNAPSE_EVENT_BUTTON_PRESSED`**: рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃўрЃЋрЃћрЃюрЃЌрЃў рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃљрЃЦрЃфрЃўрЃўрЃАрЃљ рЃЊрЃљ рЃюрЃљрЃЋрЃўрЃњрЃљрЃфрЃўрЃўрЃА рЃАрЃљрЃЏрЃљрЃарЃЌрЃљрЃЋрЃљрЃЊ.
- **`SPLASH_SCREEN_TIMER_EVENT`**: рЃерЃўрЃЊрЃљ рЃўрЃЋрЃћрЃюрЃЌрЃў Splash Screen-рЃўрЃА рЃЊрЃљрЃАрЃљрЃАрЃарЃБрЃџрЃћрЃЉрЃџрЃљрЃЊ.
- **`SCREEN_OFF_TIMER_EVENT`**: рЃерЃўрЃЊрЃљ рЃўрЃЋрЃћрЃюрЃЌрЃў рЃћрЃЎрЃарЃљрЃюрЃўрЃА рЃњрЃљрЃАрЃљрЃЌрЃўрЃерЃљрЃЊ рЃЊрЃљ рЃърЃћрЃарЃўрЃЮрЃЊрЃБрЃџрЃў рЃбрЃљрЃўрЃЏрЃћрЃарЃћрЃЉрЃўрЃА рЃњрЃљрЃАрЃљрЃЕрЃћрЃарЃћрЃЉрЃџрЃљрЃЊ.
- **`WIFI_STATUS_TIMER_EVENT`**: рЃерЃўрЃЊрЃљ рЃўрЃЋрЃћрЃюрЃЌрЃў `wifi_manager`-рЃўрЃА `Promise` API-рЃА рЃњрЃљрЃЏрЃЮрЃФрЃљрЃ«рЃћрЃЉрЃўрЃА рЃўрЃюрЃўрЃфрЃўрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА.
- **`UI_HOME_UPDATE`**: рЃерЃўрЃЊрЃљ рЃўрЃЋрЃћрЃюрЃЌрЃў рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃћрЃЎрЃарЃљрЃюрЃўрЃА рЃърЃћрЃарЃўрЃЮрЃЊрЃБрЃџрЃў рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА.

**рЃерЃћрЃюрЃўрЃерЃЋрЃюрЃљ:** `SYNAPSE_EVENT_WIFI_STATUS_READY` рЃўрЃЋрЃћрЃюрЃЌрЃќрЃћ рЃњрЃљрЃЏрЃЮрЃгрЃћрЃарЃљ **рЃЏрЃЮрЃ«рЃАрЃюрЃўрЃџрЃўрЃљ**. рЃЏрЃўрЃА рЃюрЃљрЃфрЃЋрЃџрЃљрЃЊ, рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃўрЃДрЃћрЃюрЃћрЃЉрЃА `Promise` рЃЏрЃћрЃЦрЃљрЃюрЃўрЃќрЃЏрЃА.
