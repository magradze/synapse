# 9. Doxygen კომენტარების სტანდარტი (v1.0)

**სტატუსი:** უმკაცრესი მოთხოვნა (Mandatory)  
**ავტორი:** Synapse ESP Framework Team

## 1. შესავალი

ეს დოკუმენტი განსაზღვრავს **ერთიან, სავალდებულო სტანდარტს** კოდის დოკუმენტირებისთვის Doxygen სტილის კომენტარების გამოყენებით. ამ სტანდარტის მიზანია კოდის წაკითხვადობის გაუმჯობესება, API-ს ავტომატური დოკუმენტაციის გენერაცია და გუნდის წევრებს შორის ერთიანი სტილის დამკვიდრება.

**ამ წესის დაცვა არ არის რეკომენდაცია - ეს არის პროექტის უმკაცრესი მოთხოვნა. ნებისმიერი კოდი, რომელიც არ შეესაბამება ამ სტანდარტს, ჩაითვლება დაუსრულებლად.**

## 2. ფაილის სათაურის (Header) კომენტარი

ყველა `.h` და `.c` ფაილი უნდა იწყებოდეს სტანდარტული Doxygen სათაურით.

### 2.1. სტრუქტურა

```c
/**
 * @file filename.c
 * @brief მოკლე აღწერა (მაქს. 1 წინადადება).
 * @details დეტალური აღწერა, თუ რას აკეთებს ფაილში არსებული კოდი,
 *          რა არქიტექტურულ პრინციპებს ეფუძნება და რა მიზანს ემსახურება.
 * @author Synapse ESP Framework Team
 * @version 1.0.0
 * @date YYYY-MM-DD
 */
```

### 2.2. მაგალითი (`i2c_bus_module.h`)

```c
/**
 * @file i2c_bus_module.h
 * @brief I2C Bus მოდულის API და კონტრაქტების დეფინიციები.
 * @details ეს ფაილი განსაზღვრავს i2c_bus_api_t და i2c_bus_handle_t
 *          სტრუქტურებს, რომლებიც გამოიყენება Service Locator-ის მეშვეობით
 *          I2C ავტობუსთან უსაფრთხო და სინქრონიზებული კომუნიკაციისთვის.
 * @author Synapse ESP Framework Team
 * @version 2.1.0
 * @date 2024-05-20
 */
```

## 3. ფუნქციის კომენტარი

ყველა public ფუნქცია (განსაკუთრებით `.h` ფაილებში დეკლარირებული) და ყველა რთული private ფუნქცია უნდა იყოს დოკუმენტირებული.

### 3.1. სტრუქტურა

```c
/**
 * @brief ფუნქციის მოკლე, ერთწინადადებიანი აღწერა.
 * @details (არასავალდებულო) ფუნქციის უფრო დეტალური აღწერა, თუ საჭიროა.
 * @param[in]     input_param_name  შემავალი პარამეტრის აღწერა.
 * @param[out]    output_param_name გამომავალი პარამეტრის აღწერა.
 * @param[in,out] inout_param_name  შემავალ-გამომავალი პარამეტრის აღწერა.
 * @return დაბრუნებული მნიშვნელობის აღწერა. esp_err_t-სთვის იხილეთ ქვემოთ.
 * @retval ESP_OK წარმატებით დასრულების შემთხვევაში.
 * @retval ESP_ERR_INVALID_ARG თუ რომელიმე პარამეტრი არავალიდურია.
 * @retval ESP_FAIL ოპერაცია ვერ შესრულდა სხვა მიზეზის გამო.
 * @note (არასავალდებულო) მნიშვნელოვანი შენიშვნები ფუნქციის გამოყენებასთან დაკავშირებით.
 * @warning (არასავალდებულო) გაფრთხილებები პოტენციური რისკების შესახებ.
 * @internal (არასავალდებულო) მხოლოდ შიდა გამოყენების ფუნქციებისთვის.
 */
```

### 3.2. მაგალითი (`service_locator.h`)

```c
/**
 * @brief არეგისტრირებს ახალ სერვისს უნიკალური სახელით.
 * @details ამატებს სერვისს ცენტრალურ რეესტრში. რეგისტრაცია 실패დება,
 *          თუ ამ სახელით სერვისი უკვე არსებობს. ოპერაცია Thread-safe არის.
 * @param[in] service_name სერვისის უნიკალური სახელი (მაგ. "i2c_bus_0").
 * @param[in] service_type სერვისის ტიპი service_types.h-დან (მაგ. SERVICE_TYPE_I2C_BUS_API).
 * @param[in] service_api_handle მაჩვენებელი სერვისის API სტრუქტურაზე.
 * @return ოპერაციის წარმატების კოდი.
 * @retval ESP_OK სერვისი წარმატებით დარეგისტრირდა.
 * @retval ESP_ERR_INVALID_ARG თუ რომელიმე პარამეტრი არის NULL.
 * @retval ESP_ERR_NO_MEM თუ ვერ მოხერხდა მეხსიერების გამოყოფა.
 * @retval ESP_ERR_INVALID_STATE თუ სერვისი ამ სახელით უკვე რეგისტრირებულია.
 * @warning service_api_handle უნდა დარჩეს ვალიდური სერვისის მთელი სიცოცხლის განმავლობაში.
 */
esp_err_t fmw_service_register(const char *service_name, const char *service_type, service_handle_t service_api_handle);
```

## 4. სტრუქტურების და ტიპების კომენტარები

ყველა public სტრუქტურა, enum და type definition უნდა იყოს დოკუმენტირებული.

### 4.1. სტრუქტურის მაგალითი

```c
/**
 * @struct i2c_bus_handle_t
 * @brief I2C ავტობუსის უნიკალური Handle და მისი API.
 * @details ეს სტრუქტურა გადაეცემა მომხმარებელ მოდულებს Service Locator-ის
 *          მეშვეობით და უზრუნველყოფს I2C რესურსზე კონტროლირებად წვდომას.
 */
typedef struct i2c_bus_handle_t
{
    const i2c_bus_api_t *api; /**< @brief მაჩვენებელი I2C API ფუნქციებზე. */
    void *module_private_data; /**< @brief მაჩვენებელი მოდულის შიდა მონაცემებზე. */
} i2c_bus_handle_t;
```

**ყურადღება:** სტრუქტურის შიდა ველების კომენტარები იწერება `/**< @brief ... */` ფორმატით, იმავე ხაზზე.

## 5. Doxygen ტეგების გამოყენების წესები

- `@brief`: ყოველთვის უნდა იყოს პირველი ტეგი და უნდა იყოს მოკლე.
- `@param`: გამოიყენეთ `[in]`, `[out]`, `[in,out]` მიმართულების მისათითებლად.
- `@return`: გამოიყენეთ `void` ფუნქციებისთვის, რომლებიც არაფერს აბრუნებენ.
- `@retval`: გამოიყენეთ `esp_err_t`-ს ტიპის მნიშვნელობების დეტალურად აღსაწერად.
- `@internal`: გამოიყენეთ იმ ფუნქციებისთვის, რომლებიც არ არის განკუთვნილი გარე გამოყენებისთვის (private API). Doxygen ამ ფუნქციებს გამოტოვებს დოკუმენტაციის გენერაციისას.

ამ სტანდარტის ზედმიწევნით დაცვა უზრუნველყოფს ჩვენი ფრეიმვორქის პროფესიონალურ ხარისხს, გრძელვადიან პერსპექტივაში მის მარტივად განვითარებას და ახალი დეველოპერების სწრაფ ადაპტაციას.