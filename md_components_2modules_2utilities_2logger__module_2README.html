<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Synapse ESP Framework: Logger Module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Synapse ESP Framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_components_2modules_2utilities_2logger__module_2README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Logger Module</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md86"></a> </p>
<h1><a class="anchor" id="autotoc_md87"></a>
Overview</h1>
<p>The <code>logger_module</code> is a centralized logging and event monitoring module designed for debugging and system observation purposes. It captures all events published on the Event Bus and provides comprehensive debugging output to the serial console, enabling real-time monitoring of system processes and inter-module communication.</p>
<h1><a class="anchor" id="autotoc_md88"></a>
Features</h1>
<ul>
<li><b>Event Monitoring</b>: Captures and logs all events from the Event Bus</li>
<li><b>Runtime Control</b>: Enable/disable functionality via framework commands</li>
<li><b>Debug Architecture</b>: Demonstrates "listener" module pattern</li>
<li><b>Production Ready</b>: Can be disabled at compile time via Kconfig</li>
<li><b>Configurable</b>: Extensive Kconfig options for customization</li>
<li><b>Zero Dependencies</b>: No dependencies on other modules (follows framework architecture)</li>
</ul>
<h1><a class="anchor" id="autotoc_md89"></a>
Purpose</h1>
<ul>
<li><b>Event Monitoring</b>: Capture all events published on the Event Bus</li>
<li><b>Debugging</b>: Provide developers with real-time system communication information <br  />
</li>
<li><b>Architecture Demonstration</b>: Showcase a simple "listener" module implementation</li>
<li><b>Runtime Management</b>: Enable/disable logging via framework commands during operation</li>
</ul>
<h1><a class="anchor" id="autotoc_md90"></a>
Kconfig Configuration</h1>
<p>The logger module supports extensive configuration through the ESP-IDF Kconfig system. Access these settings via:</p>
<div class="fragment"><div class="line">idf.py menuconfig</div>
<div class="line"># Navigate to: Synapse Framework → Logger Module Configuration</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md91"></a>
Main Configuration Options</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>MODULE_LOGGER_ENABLED</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">Enable/disable entire module at compile time    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGGER_DEFAULT_INSTANCE_NAME</code>   </td><td class="markdownTableBodyNone">"main_logger"   </td><td class="markdownTableBodyNone">Default instance name    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGGER_INSTANCE_NAME_MAX_LEN</code>   </td><td class="markdownTableBodyNone">32   </td><td class="markdownTableBodyNone">Maximum length for instance names    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGGER_RUNTIME_CONTROL_ENABLED</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">Enable runtime enable/disable commands    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGGER_CONSOLE_OUTPUT_ENABLED</code>   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">Enable console output    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGGER_EVENT_BUFFER_SIZE</code>   </td><td class="markdownTableBodyNone">128   </td><td class="markdownTableBodyNone">Buffer size for event formatting    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGGER_MAX_EVENT_DATA_SIZE</code>   </td><td class="markdownTableBodyNone">256   </td><td class="markdownTableBodyNone">Maximum event data size to process   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md92"></a>
Compilation Control</h2>
<p>When <code>MODULE_LOGGER_ENABLED</code> is disabled:</p><ul>
<li>No logger module code is compiled into the firmware</li>
<li><code><a class="el" href="logger__module_8h.html#a43e3a3a59f4f51311e997fcd358871da" title="Creates a new Logger Module instance.">logger_module_create()</a></code> returns NULL</li>
<li>Zero memory and CPU overhead</li>
<li>Recommended for production builds</li>
</ul>
<h1><a class="anchor" id="autotoc_md93"></a>
Runtime Configuration</h1>
<p>The logger module can also be configured at runtime through <code>system_config.json</code>:</p>
<h2><a class="anchor" id="autotoc_md94"></a>
Enable Logger Module</h2>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;type&quot;: &quot;logger_module&quot;,</div>
<div class="line">  &quot;enabled&quot;: true,</div>
<div class="line">  &quot;config&quot;: {</div>
<div class="line">    &quot;instance_name&quot;: &quot;main_logger&quot;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md95"></a>
Disable Logger Module</h2>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;type&quot;: &quot;logger_module&quot;, </div>
<div class="line">  &quot;enabled&quot;: false,</div>
<div class="line">  &quot;config&quot;: {</div>
<div class="line">    &quot;instance_name&quot;: &quot;main_logger&quot;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md96"></a>
Runtime Control</h1>
<p>The logger module supports runtime enable/disable functionality through framework command events.</p>
<h2><a class="anchor" id="autotoc_md97"></a>
Command Format</h2>
<p>Commands are sent through the framework's telemetry system using the <code>FRAMEWORK_EVENT_COMMAND_RECEIVED</code> event.</p>
<h2><a class="anchor" id="autotoc_md98"></a>
Supported Commands</h2>
<h3><a class="anchor" id="autotoc_md99"></a>
Disable Logger</h3>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;action&quot;: &quot;disable&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md100"></a>
Enable Logger</h3>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;action&quot;: &quot;enable&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md101"></a>
Behavior</h2>
<ul>
<li><b>When Disabled</b>: Logger stops outputting event information to console</li>
<li><b>When Enabled</b>: Logger resumes outputting all captured events to console</li>
</ul>
<h1><a class="anchor" id="autotoc_md102"></a>
Implementation Details</h1>
<h2><a class="anchor" id="autotoc_md103"></a>
Module Structure</h2>
<ul>
<li><b>Type</b>: Utility/Service Module</li>
<li><b>Init Level</b>: 10 (Early initialization for comprehensive monitoring)</li>
<li><b>Dependencies</b>: Core framework, Interfaces, JSON parsing</li>
<li><b>Private Data</b>: None required</li>
</ul>
<h2><a class="anchor" id="autotoc_md104"></a>
Event Subscription</h2>
<p>The module automatically receives all system events through the System Manager's universal event subscription mechanism. No manual event subscriptions are required.</p>
<h2><a class="anchor" id="autotoc_md105"></a>
Output Format</h2>
<p>Event logs follow this format:</p>
<div class="fragment"><div class="line">I (timestamp) LOGGER_MODULE: Event received: ID=12345</div>
<div class="line">I (timestamp) LOGGER_MODULE: Processing command for module: main_logger</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md106"></a>
Development Notes</h1>
<ul>
<li>The module uses minimal memory footprint</li>
<li>No file logging is implemented (console output only)</li>
<li>Event data wrappers are not freed by the logger (other modules may need the data)</li>
<li>Cognitive complexity has been reduced through function decomposition</li>
<li>Full Doxygen documentation is provided for all public APIs</li>
<li>No dependencies on other modules (follows framework architecture principles)</li>
</ul>
<h1><a class="anchor" id="autotoc_md107"></a>
API Reference</h1>
<h2><a class="anchor" id="autotoc_md108"></a>
Functions</h2>
<h3><a class="anchor" id="autotoc_md109"></a>
&lt;tt&gt;logger_module_create(const cJSON *config)&lt;/tt&gt;</h3>
<p>Creates and initializes a new logger module instance.</p>
<p><b>Parameters:</b></p>
<ul>
<li><code>config</code>: JSON configuration object containing module settings</li>
</ul>
<p><b>Returns:</b></p>
<ul>
<li><code>module_t*</code>: Pointer to created module instance, or NULL on failure</li>
</ul>
<p><b>Example:</b></p>
<div class="fragment"><div class="line">cJSON *config = cJSON_Parse(<span class="stringliteral">&quot;{\&quot;config\&quot;:{\&quot;instance_name\&quot;:\&quot;debug_logger\&quot;}}&quot;</span>);</div>
<div class="line"><a class="code hl_struct" href="structmodule__t.html">module_t</a> *logger = <a class="code hl_function" href="logger__module_8h.html#a43e3a3a59f4f51311e997fcd358871da">logger_module_create</a>(config);</div>
<div class="ttc" id="alogger__module_8h_html_a43e3a3a59f4f51311e997fcd358871da"><div class="ttname"><a href="logger__module_8h.html#a43e3a3a59f4f51311e997fcd358871da">logger_module_create</a></div><div class="ttdeci">module_t * logger_module_create(const cJSON *config)</div><div class="ttdoc">Creates a new Logger Module instance.</div><div class="ttdef"><b>Definition</b> logger_module.c:67</div></div>
<div class="ttc" id="astructmodule__t_html"><div class="ttname"><a href="structmodule__t.html">module_t</a></div><div class="ttdoc">მოდულის ძირითადი სტრუქტურა, რომელიც განსაზღვრავს ფრეიმვორქის მოდულის კონტრაქტს.</div><div class="ttdef"><b>Definition</b> base_module.h:133</div></div>
</div><!-- fragment --><div class="fragment"><div class="line">/mindlab/device/{device_id}/module/main_logger/cmd</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md110"></a>
ბრძანებები</h2>
<p><b>ლოგერის გამორთვა:</b></p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;action&quot;: &quot;disable&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>ლოგერის ჩართვა:</b></p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;action&quot;: &quot;enable&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md111"></a>
ქცევა</h2>
<ul>
<li><b>გამორთვისას:</b> ლოგერი ჩერდება ყველა ივენთის ბეჭდვას და ESP-IDF-ის ლოგის დონე იყენება <code>ESP_LOG_NONE</code>-ზე</li>
<li><b>ჩართვისას:</b> ლოგერი იწყებს ივენთების ბეჭდვას და ESP-IDF-ის ლოგის დონე იყენება <code>ESP_LOG_INFO</code>-ზე</li>
</ul>
<h2><a class="anchor" id="autotoc_md112"></a>
მაგალითი</h2>
<p>MQTT ბრძანების გაგზავნა:</p>
<div class="fragment"><div class="line">mosquitto_pub -h 192.168.1.160 -t &quot;/mindlab/device/5C013B7246E4/module/main_logger/cmd&quot; -m &#39;{&quot;action&quot;: &quot;disable&quot;}&#39;</div>
</div><!-- fragment --><p>ეს ბრძანება გამორთავს ლოგერ მოდულს და შეაჩერებს ყველა ლოგის ბეჭდვას. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
