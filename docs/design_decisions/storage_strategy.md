# მონაცემთა შენახვის არქიტექტურული არჩევანი (Storage Strategy)

---

## მიზანი

ეს დოკუმენტი აღწერს Synapse ESP Framework-ში მონაცემთა შენახვის არქიტექტურულ არჩევანს, არჩეული ტექნოლოგიების მოტივაციას, ალტერნატივებს და საბოლოო გადაწყვეტილების შედეგებს naming/structure კონვენციების დაცვით.

---

## კონტექსტი

ფრეიმვორქს სჭირდება მოქნილი, საიმედო და სტანდარტიზებული მონაცემთა შენახვის მექანიზმი როგორც სისტემური კონფიგურაციისთვის, ისე მოდულების runtime მონაცემებისთვის. აუცილებელია მხარდაჭერა როგორც მუდმივი (persistent), ისე დროებითი (volatile) მონაცემებისთვის.

---

## არჩეული გადაწყვეტილება

- **NVS (Non-Volatile Storage):** გამოიყენება სისტემური და მოდულების კონფიგურაციის მუდმივი შენახვისთვის.
- **Flash Storage:** გამოიყენება დიდი მოცულობის მონაცემებისთვის ან firmware განახლებებისთვის.
- **RAM/Stack:** გამოიყენება დროებითი, ოპერაციული მონაცემებისთვის.

---

## არგუმენტები და მოტივაცია

- **NVS** უზრუნველყოფს key-value სტრუქტურას, საიმედოობას და მარტივ ინტეგრაციას ESP-IDF ეკოსისტემაში.
- **Flash** აუცილებელია firmware განახლებისთვის (OTA) და დიდი მონაცემების შენახვისთვის.
- **RAM/Stack** ოპტიმალურია სწრაფი, დროებითი ოპერაციებისთვის.
- ალტერნატივა (გარე SD-ბარათი, FATFS) უარყოფილია კომპლექსურობისა და რესურსების გამო.

---

## შედეგები და გავლენა

- სისტემური და მოდულების კონფიგურაცია ინახება უსაფრთხოდ და სტანდარტულად
- შესაძლებელია მონაცემების სწრაფი წაკითხვა/ჩაწერა
- OTA განახლებები და firmware-ს მენეჯმენტი მარტივია
- Flash-ის ცვეთა (wear) საჭიროებს ყურადღებას დიდი მოცულობის მონაცემების შემთხვევაში

---

## გამოყენების მაგალითები

### NVS-ში სტრიქონის შენახვა
```c
nvs_storage_module_set_string("device_name", "synapse_node_1");
```

### NVS-დან სტრიქონის წაკითხვა
```c
char device_name[32];
nvs_storage_module_get_string("device_name", device_name, sizeof(device_name));
```

### Flash-ში მონაცემების შენახვა (OTA)
```c
// OTA განახლების პროცესში გამოიყენება esp_ota APIs
```

---

## აკრძალული და რეკომენდებული პრაქტიკები

❌ **არასდროს:**
- მონაცემების hardcoded შენახვა კოდში
- არასტანდარტული ან არადოკუმენტირებული შენახვის მექანიზმების გამოყენება
- Flash-ის ზედმეტი გამოყენება მცირე მონაცემებისთვის

✅ **ყოველთვის:**
- გამოიყენეთ მხოლოდ სტანდარტული storage API-ები (NVS, esp_ota)
- დაიცავით naming და structure კონვენციები
- ჩაწერეთ ყველა ცვლილება და შენახვის არქიტექტურული გადაწყვეტილება დოკუმენტაციაში

---

## დაკავშირებული დოკუმენტები

- [core_components.md](core_components.md)
- [architecture_overview.md](architecture_overview.md)
- [api_reference/storage_api.md](../api_reference/storage_api.md)
- [configuration_management.md](../convention/configuration_management.md)

---

_დამატებითი კითხვებისთვის იხილეთ შესაბამისი დოკუმენტაცია ან მიმართეთ გუნდის დოკუმენტაციის პასუხისმგებელ პირს._

