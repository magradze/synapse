# ­Ъћї Relay Actuator API Reference

## ­Ъј» рЃЏрЃўрЃќрЃљрЃюрЃў

рЃћрЃА рЃЊрЃЮрЃЎрЃБрЃЏрЃћрЃюрЃбрЃў рЃљрЃдрЃгрЃћрЃарЃА `relay_actuator` рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃљрЃ»рЃљрЃарЃЮ рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃћрЃЉрЃА, рЃарЃЮрЃЏрЃћрЃџрЃЌрЃљ рЃЏрЃћрЃерЃЋрЃћрЃЮрЃЉрЃўрЃЌрЃљрЃф рЃерЃћрЃАрЃљрЃФрЃџрЃћрЃЉрЃћрЃџрЃўрЃљ рЃЏрЃўрЃАрЃў рЃЏрЃљрЃарЃЌрЃЋрЃљ.

---

## 1. Рїе№ИЈ CLI (Command Line Interface)

`relay_actuator` рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃўрЃА рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃЏрЃћрЃЌрЃЮрЃЊрЃў рЃљрЃарЃўрЃА `Command Router`-рЃўрЃА рЃЏрЃћрЃерЃЋрЃћрЃЮрЃЉрЃўрЃЌ рЃарЃћрЃњрЃўрЃАрЃбрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃў `relay` рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃљ.

- **рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃљ:** `relay`
- **рЃАрЃўрЃюрЃбрЃљрЃЦрЃАрЃў:** `relay <instance_name> <action>`
- **рЃљрЃарЃњрЃБрЃЏрЃћрЃюрЃбрЃћрЃЉрЃў:**
  - `<instance_name>`: рЃўрЃЏ рЃарЃћрЃџрЃћрЃА рЃБрЃюрЃўрЃЎрЃљрЃџрЃБрЃарЃў рЃАрЃљрЃ«рЃћрЃџрЃў, рЃарЃЮрЃЏрЃџрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљрЃф рЃњрЃАрЃБрЃарЃЌ (рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃБрЃџрЃўрЃљ `system_config.json`-рЃерЃў).
  - `<action>`: рЃерЃћрЃАрЃљрЃАрЃарЃБрЃџрЃћрЃЉрЃћрЃџрЃў рЃЏрЃЮрЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃљ. рЃерЃћрЃАрЃљрЃФрЃџрЃЮ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃћрЃЉрЃўрЃљ:
    - `on`: рЃарЃћрЃџрЃћрЃА рЃЕрЃљрЃарЃЌрЃЋрЃљ.
    - `off`: рЃарЃћрЃџрЃћрЃА рЃњрЃљрЃЏрЃЮрЃарЃЌрЃЋрЃљ.
    - `toggle`: рЃЏрЃўрЃЏрЃЊрЃўрЃюрЃљрЃарЃћ рЃЏрЃЊрЃњрЃЮрЃЏрЃљрЃарЃћрЃЮрЃЉрЃўрЃА рЃерЃћрЃфрЃЋрЃџрЃљ (рЃЌрЃБ рЃЕрЃљрЃарЃЌрЃБрЃџрЃўрЃљ - рЃњрЃљрЃЏрЃЮрЃарЃЌрЃљрЃЋрЃА, рЃЌрЃБ рЃњрЃљрЃЏрЃЮрЃарЃЌрЃБрЃџрЃўрЃљ - рЃЕрЃљрЃарЃЌрЃљрЃЋрЃА).

**рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃћрЃЉрЃў:**

```bash
# "main_light" рЃарЃћрЃџрЃћрЃА рЃЕрЃљрЃарЃЌрЃЋрЃљ
SYNAPSE> relay main_light on

# "water_pump" рЃарЃћрЃџрЃћрЃА рЃњрЃљрЃЏрЃЮрЃарЃЌрЃЋрЃљ
SYNAPSE> relay water_pump off

# "main_light" рЃарЃћрЃџрЃћрЃА рЃЏрЃЊрЃњрЃЮрЃЏрЃљрЃарЃћрЃЮрЃЉрЃўрЃА рЃерЃћрЃфрЃЋрЃџрЃљ
SYNAPSE> relay main_light toggle
```

---

## 2. ­ЪЊА MQTT рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў

рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ рЃЊрЃљ рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў рЃерЃћрЃАрЃљрЃФрЃџрЃћрЃЉрЃћрЃџрЃўрЃљ MQTT-рЃўрЃЌ, `mqtt_manager`-рЃЌрЃљрЃю рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃўрЃА рЃгрЃДрЃљрЃџрЃЮрЃЉрЃўрЃЌ.

### рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃўрЃА рЃњрЃљрЃњрЃќрЃљрЃЋрЃюрЃљ

- **Topic:** `synapse/devices/{device_id}/cmd/in`
- **Payload:** рЃўрЃњрЃўрЃЋрЃћ рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў, рЃарЃљрЃф CLI-рЃерЃў. рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ: `"relay main_light on"`

### рЃАрЃбрЃљрЃбрЃБрЃАрЃўрЃА рЃЏрЃўрЃдрЃћрЃЉрЃљ

- **Topic:** `synapse/devices/{id}/state/relay/{instance_name}/status`
- **Payload:** `{"state":"on"}` рЃљрЃю `{"state":"off"}`

---

## 3. ­ЪЊб рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃў (Events)

- **`FMW_EVENT_RELAY_STATE_CHANGED`**: рЃћрЃА рЃўрЃЋрЃћрЃюрЃЌрЃў рЃЦрЃЋрЃћрЃДрЃюрЃЊрЃћрЃЉрЃљ `Event Bus`-рЃќрЃћ рЃДрЃЮрЃЋрЃћрЃџ рЃ»рЃћрЃарЃќрЃћ, рЃарЃЮрЃЊрЃћрЃАрЃљрЃф рЃарЃћрЃџрЃћрЃА рЃЏрЃЊрЃњрЃЮрЃЏрЃљрЃарЃћрЃЮрЃЉрЃљ рЃўрЃфрЃЋрЃџрЃћрЃЉрЃљ. рЃЏрЃўрЃАрЃў `payload` рЃљрЃарЃўрЃА `fmw_telemetry_payload_t` рЃбрЃўрЃърЃўрЃА, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃерЃћрЃўрЃфрЃљрЃЋрЃА рЃарЃћрЃџрЃћрЃА `instance_name`-рЃА рЃЊрЃљ рЃЏрЃўрЃА рЃљрЃ«рЃљрЃџ рЃАрЃбрЃљрЃбрЃБрЃАрЃА JSON рЃцрЃЮрЃарЃЏрЃљрЃбрЃерЃў.
