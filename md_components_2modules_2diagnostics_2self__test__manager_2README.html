<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Synapse ESP Framework: ­ЪЕ║ рЃЏрЃЮрЃЊрЃБрЃџрЃў: &lt;tt&gt;self_test_manager&lt;/tt&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Synapse ESP Framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_components_2modules_2diagnostics_2self__test__manager_2README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">­ЪЕ║ рЃЏрЃЮрЃЊрЃБрЃџрЃў: &lt;tt&gt;self_test_manager&lt;/tt&gt;</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md30"></a> <b>­ЪЌѓ№ИЈ рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃљ:</b> <code>diagnostics</code> <br  />
 <b>Рюњ№ИЈ рЃљрЃЋрЃбрЃЮрЃарЃў:</b> Synapse Framework Team <br  />
 <b>­Ъћќ рЃЋрЃћрЃарЃАрЃўрЃљ:</b> 1.2.0</p>
<h1><a class="anchor" id="autotoc_md31"></a>
1. ­ЪЊю рЃЏрЃўрЃЏрЃЮрЃ«рЃўрЃџрЃЋрЃљ</h1>
<p><code>self_test_manager</code> рЃљрЃарЃўрЃА Synapse Framework-рЃўрЃА <b>рЃфрЃћрЃюрЃбрЃарЃљрЃџрЃўрЃќрЃћрЃЉрЃБрЃџрЃў рЃЌрЃЋрЃўрЃЌ-рЃЊрЃўрЃљрЃњрЃюрЃЮрЃАрЃбрЃўрЃЎрЃўрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃў</b>. рЃЏрЃўрЃАрЃў рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃљрЃЏрЃЮрЃфрЃљрЃюрЃљрЃљ, рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃДрЃЮрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃўрЃА, рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃўрЃА рЃЊрЃљ рЃърЃћрЃарЃўрЃцрЃћрЃарЃўрЃўрЃА рЃ»рЃљрЃюрЃЏрЃарЃЌрЃћрЃџрЃЮрЃЉрЃўрЃА рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃўрЃА рЃћрЃарЃЌрЃўрЃљрЃюрЃў, рЃЏрЃЮрЃЌрЃ«рЃЮрЃЋрЃюрЃљрЃќрЃћ-рЃЊрЃљрЃцрЃБрЃФрЃюрЃћрЃЉрЃБрЃџрЃў рЃЏрЃћрЃЦрЃљрЃюрЃўрЃќрЃЏрЃў.</p>
<p>рЃћрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА рЃњрЃЋрЃљрЃФрЃџрЃћрЃЋрЃА, рЃюрЃћрЃЉрЃўрЃАрЃЏрЃўрЃћрЃа рЃЊрЃарЃЮрЃА (рЃЏрЃљрЃњ., рЃЕрЃљрЃарЃЌрЃЋрЃўрЃАрЃљрЃА, рЃЊрЃўрЃАрЃбрЃљрЃюрЃфрЃўрЃБрЃарЃў рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃўрЃЌ рЃљрЃю рЃгрЃљрЃарЃЏрЃЮрЃћрЃЉрЃўрЃА рЃ«рЃљрЃќрЃќрЃћ) рЃњрЃљрЃЋрЃБрЃерЃЋрЃљрЃЌ рЃбрЃћрЃАрЃбрЃћрЃЉрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃљрЃю рЃюрЃљрЃгрЃўрЃџрЃЮрЃЉрЃарЃўрЃЋрЃў рЃюрЃљрЃЎрЃарЃћрЃЉрЃў рЃЊрЃљ рЃЏрЃўрЃЋрЃўрЃдрЃЮрЃЌ рЃЊрЃћрЃбрЃљрЃџрЃБрЃарЃў, рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃарЃћрЃърЃЮрЃарЃбрЃў рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃЏрЃЊрЃњрЃЮрЃЏрЃљрЃарЃћрЃЮрЃЉрЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ. рЃўрЃА рЃЎрЃарЃўрЃбрЃўрЃЎрЃБрЃџрЃљрЃЊ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃўрЃљ рЃарЃЮрЃњрЃЮрЃарЃф рЃњрЃљрЃЏрЃљрЃарЃЌрЃЋрЃўрЃА (debugging) рЃърЃарЃЮрЃфрЃћрЃАрЃўрЃАрЃЌрЃЋрЃўрЃА, рЃўрЃАрЃћ рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃўрЃА рЃњрЃарЃФрЃћрЃџрЃЋрЃљрЃЊрЃўрЃљрЃюрЃў рЃАрЃљрЃўрЃЏрЃћрЃЊрЃЮрЃЮрЃЉрЃўрЃА рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃАрЃљрЃДрЃЮрЃцрЃљрЃЊ.</p>
<h1><a class="anchor" id="autotoc_md32"></a>
2. ­ЪЈЏ№ИЈ рЃљрЃарЃЦрЃўрЃбрЃћрЃЦрЃбрЃБрЃарЃБрЃџрЃў рЃърЃарЃўрЃюрЃфрЃўрЃърЃћрЃЉрЃў</h1>
<ul>
<li><b>РџЎ№ИЈ Service Consumer:</b> рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃљрЃарЃўрЃА рЃАрЃБрЃцрЃЌрЃљ "рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃўрЃА рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃћрЃџрЃў". рЃўрЃА рЃљрЃа рЃљрЃгрЃЋрЃЊрЃўрЃА рЃАрЃљрЃЎрЃБрЃЌрЃљрЃа Service API-рЃА, рЃљрЃарЃљрЃЏрЃћрЃЊ рЃљрЃЦрЃбрЃўрЃБрЃарЃљрЃЊ рЃўрЃДрЃћрЃюрЃћрЃЉрЃА рЃцрЃарЃћрЃўрЃЏрЃЋрЃЮрЃарЃЦрЃўрЃА рЃАрЃ«рЃЋрЃљ рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃА (<code>System Manager</code>, <code>Health Monitor</code>, <code>Storage Manager</code> рЃЊрЃљ рЃљ.рЃе.) рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃўрЃА рЃерЃћрЃАрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃџрЃљрЃЊ.</li>
<li><b>Рїе№ИЈ CLI-рЃќрЃћ рЃЊрЃљрЃцрЃБрЃФрЃюрЃћрЃЉрЃБрЃџрЃў рЃЏрЃљрЃарЃЌрЃЋрЃљ:</b> рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃЏрЃљрЃарЃЌрЃЋрЃљ рЃ«рЃЊрЃћрЃЉрЃљ <code>Command Router</code>-рЃўрЃА рЃЏрЃћрЃерЃЋрЃћрЃЮрЃЉрЃўрЃЌ рЃарЃћрЃњрЃўрЃАрЃбрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃў <code>selftest</code> рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃўрЃЌ. рЃћрЃА рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃДрЃЮрЃцрЃА рЃЏрЃўрЃА рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃЮрЃЉрЃљрЃА рЃюрЃћрЃЉрЃўрЃАрЃЏрЃўрЃћрЃарЃў рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃўрЃЊрЃљрЃю (Serial, MQTT, HTTP).</li>
<li><b>­ЪЊе рЃўрЃЋрЃћрЃюрЃЌрЃќрЃћ-рЃЊрЃљрЃцрЃБрЃФрЃюрЃћрЃЉрЃБрЃџрЃў рЃърЃљрЃАрЃБрЃ«рЃў:</b> рЃбрЃћрЃАрЃбрЃўрЃА рЃарЃћрЃърЃЮрЃарЃбрЃўрЃА рЃЏрЃЮрЃЌрЃ«рЃЮрЃЋрЃюрЃўрЃАрЃљрЃА, рЃЏрЃЮрЃЊрЃБрЃџрЃў, рЃЎрЃЮрЃюрЃАрЃЮрЃџрЃерЃў рЃЉрЃћрЃГрЃЊрЃЋрЃўрЃА рЃърЃљрЃарЃљрЃџрЃћрЃџрЃБрЃарЃљрЃЊ, <code>Event Bus</code>-рЃќрЃћ рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА <code>FMW_EVENT_SELF_TEST_REPORT_READY</code> рЃўрЃЋрЃћрЃюрЃЌрЃА, рЃарЃЮрЃЏрЃџрЃўрЃА <code>payload</code> рЃљрЃарЃўрЃА рЃарЃћрЃърЃЮрЃарЃбрЃў JSON рЃцрЃЮрЃарЃЏрЃљрЃбрЃерЃў. рЃћрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА рЃљрЃФрЃџрЃћрЃЋрЃА <code>mqtt_manager</code>-рЃА рЃЊрЃљ рЃАрЃ«рЃЋрЃљ рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃА, рЃЏрЃўрЃўрЃдрЃЮрЃю рЃЊрЃљ рЃњрЃљрЃљрЃЋрЃарЃфрЃћрЃџрЃЮрЃю рЃбрЃћрЃАрЃбрЃўрЃА рЃерЃћрЃЊрЃћрЃњрЃћрЃЉрЃў.</li>
<li><b>­Ъџђ рЃљрЃарЃљрЃЉрЃџрЃЮрЃЎрЃўрЃарЃћрЃЉрЃљрЃЊрЃў рЃерЃћрЃАрЃарЃБрЃџрЃћрЃЉрЃљ:</b> рЃбрЃћрЃАрЃбрЃћрЃЉрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃюрЃљрЃЎрЃарЃћрЃЉрЃў рЃћрЃерЃЋрЃћрЃЉрЃљ рЃњрЃљрЃЏрЃЮрЃДрЃЮрЃцрЃўрЃџ, рЃЊрЃарЃЮрЃћрЃЉрЃўрЃЌ FreeRTOS рЃбрЃљрЃАрЃЎрЃерЃў. рЃћрЃА рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃДрЃЮрЃцрЃА, рЃарЃЮрЃЏ рЃЊрЃўрЃљрЃњрЃюрЃЮрЃАрЃбрЃўрЃЎрЃўрЃА рЃърЃарЃЮрЃфрЃћрЃАрЃў рЃљрЃа рЃЉрЃџрЃЮрЃЎрЃљрЃЋрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃФрЃўрЃарЃўрЃЌрЃљрЃЊ рЃюрЃљрЃЎрЃљрЃЊрЃА рЃљрЃю <code>Command Router</code>-рЃўрЃА рЃўрЃюрЃбрЃћрЃарЃљрЃЦрЃбрЃўрЃБрЃџ рЃњрЃљрЃарЃАрЃА.</li>
<li>**­ЪћЮ рЃЏрЃљрЃдрЃљрЃџрЃў рЃўрЃюрЃўрЃфрЃўрЃљрЃџрЃўрЃќрЃљрЃфрЃўрЃўрЃА рЃЊрЃЮрЃюрЃћ (<code>init_level: 80</code>):** рЃарЃЮрЃњрЃЮрЃарЃф рЃЌрЃўрЃЌрЃЦрЃЏрЃўрЃА рЃДрЃЋрЃћрЃџрЃљ рЃАрЃ«рЃЋрЃљ рЃАрЃћрЃарЃЋрЃўрЃАрЃўрЃА рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃћрЃџрЃў, рЃўрЃА рЃўрЃюрЃўрЃфрЃўрЃљрЃџрЃўрЃќрЃЊрЃћрЃЉрЃљ рЃћрЃарЃЌ-рЃћрЃарЃЌрЃў рЃЉрЃЮрЃџрЃЮ, рЃарЃљрЃЌрЃљ рЃЊрЃљрЃарЃгрЃЏрЃБрЃюрЃћрЃЉрЃБрЃџрЃў рЃўрЃДрЃЮрЃА, рЃарЃЮрЃЏ рЃДрЃЋрЃћрЃџрЃљ рЃерЃћрЃАрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃћрЃџрЃў рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃў рЃБрЃЎрЃЋрЃћ рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃўрЃљ.</li>
</ul>
<h1><a class="anchor" id="autotoc_md33"></a>
3. РџЎ№ИЈ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ</h1>
<p>рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў рЃўрЃЏрЃљрЃарЃЌрЃћрЃЉрЃљ <code>Kconfig</code>-рЃўрЃА (<code>idf.py menuconfig</code>) рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃўрЃЌ.</p>
<p>**<code>system_config.json</code> рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:**</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;type&quot;: &quot;self_test_manager&quot;,</div>
<div class="line">    &quot;enabled&quot;: true,</div>
<div class="line">    &quot;config&quot;: {</div>
<div class="line">        &quot;instance_name&quot;: &quot;selftest&quot;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>рЃерЃћрЃюрЃўрЃерЃЋрЃюрЃљ:</b> <code>instance_name</code> рЃБрЃюрЃЊрЃљ рЃўрЃДрЃЮрЃА рЃАрЃљрЃЎрЃЏрЃљрЃарЃўрЃАрЃљрЃЊ рЃЏрЃЮрЃЎрЃџрЃћ, рЃарЃљрЃЌрЃљ <code>storage_manager</code>-рЃўрЃА рЃбрЃћрЃАрЃбрЃўрЃарЃћрЃЉрЃўрЃАрЃљрЃА рЃљрЃа рЃњрЃљрЃЊрЃљрЃљрЃГрЃљрЃарЃЉрЃЮрЃА SPIFFS-рЃўрЃА рЃцрЃљрЃўрЃџрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃўрЃА рЃАрЃўрЃњрЃарЃФрЃўрЃА рЃџрЃўрЃЏрЃўрЃбрЃА.</p>
<p>**<code>Kconfig</code> рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:**</p>
<p><code>Component config</code> -&gt; <code>Synapse Framework</code> -&gt; <code>Modules</code> -&gt; <code>Self Test Manager</code> рЃЏрЃћрЃюрЃўрЃБрЃерЃў рЃерЃћрЃњрЃўрЃФрЃџрЃўрЃљрЃЌ рЃЊрЃљрЃљрЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃўрЃарЃЮрЃЌ:</p>
<ul>
<li>**<code>Self-Test Task Stack Size</code>:** рЃЊрЃарЃЮрЃћрЃЉрЃўрЃЌрЃў рЃбрЃљрЃАрЃЎрЃўрЃА рЃАрЃбрЃћрЃЎрЃўрЃА рЃќрЃЮрЃЏрЃљ.</li>
<li>**<code>Maximum Lines in Test Report</code>:** рЃарЃћрЃърЃЮрЃарЃбрЃерЃў рЃ«рЃљрЃќрЃћрЃЉрЃўрЃА рЃЏрЃљрЃЦрЃАрЃўрЃЏрЃљрЃџрЃБрЃарЃў рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃљ.</li>
</ul>
<h1><a class="anchor" id="autotoc_md34"></a>
4. Рїе№ИЈ CLI рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃћрЃЉрЃў (Command Line Interface)</h1>
<p>рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃљрЃарЃћрЃњрЃўрЃАрЃбрЃарЃўрЃарЃћрЃЉрЃА <code>selftest</code> рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃљрЃА <code>Command Router</code>-рЃерЃў.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃљ   </th><th class="markdownTableHeadLeft">рЃљрЃарЃњрЃБрЃЏрЃћрЃюрЃбрЃћрЃЉрЃў   </th><th class="markdownTableHeadLeft">рЃљрЃдрЃгрЃћрЃарЃљ    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>selftest --run</code>   </td><td class="markdownTableBodyLeft"><code>[all\|core\|health\|storage\|conn]</code>   </td><td class="markdownTableBodyLeft">­Ъџђ рЃўрЃгрЃДрЃћрЃЉрЃА рЃбрЃћрЃАрЃбрЃћрЃЉрЃўрЃА рЃерЃћрЃАрЃарЃБрЃџрЃћрЃЉрЃљрЃА. рЃљрЃарЃњрЃБрЃЏрЃћрЃюрЃбрЃўрЃА рЃњрЃљрЃарЃћрЃерЃћ (<code>all</code>) рЃњрЃљрЃћрЃерЃЋрЃћрЃЉрЃљ рЃДрЃЋрЃћрЃџрЃљ рЃбрЃћрЃАрЃбрЃў.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>selftest --report</code>   </td><td class="markdownTableBodyLeft">-   </td><td class="markdownTableBodyLeft">­ЪЊі рЃњрЃљрЃЏрЃЮрЃљрЃЦрЃЋрЃА рЃЉрЃЮрЃџрЃЮ рЃбрЃћрЃАрЃбрЃўрЃА рЃерЃћрЃЊрЃћрЃњрЃћрЃЉрЃўрЃА рЃарЃћрЃърЃЮрЃарЃбрЃў рЃЎрЃЮрЃюрЃАрЃЮрЃџрЃерЃў <b>рЃЊрЃљ</b> рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА JSON рЃарЃћрЃърЃЮрЃарЃбрЃА <code>Event Bus</code>-рЃќрЃћ.   </td></tr>
</table>
<p><b>рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:</b></p>
<div class="fragment"><div class="line"># рЃДрЃЋрЃћрЃџрЃљ рЃбрЃћрЃАрЃбрЃўрЃА рЃњрЃљрЃерЃЋрЃћрЃЉрЃљ</div>
<div class="line">SYNAPSE&gt; selftest --run all</div>
<div class="line"> </div>
<div class="line"># рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ storage рЃЦрЃЋрЃћрЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃбрЃћрЃАрЃбрЃўрЃарЃћрЃЉрЃљ</div>
<div class="line">SYNAPSE&gt; selftest --run storage</div>
<div class="line"> </div>
<div class="line"># рЃерЃћрЃЊрЃћрЃњрЃћрЃЉрЃўрЃА рЃюрЃљрЃ«рЃЋрЃљ</div>
<div class="line">SYNAPSE&gt; selftest --report</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md35"></a>
5. ­ЪЊА MQTT рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў</h1>
<p><code>selftest</code> рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃўрЃА рЃњрЃљрЃЏрЃЮрЃФрЃљрЃ«рЃћрЃЉрЃљ рЃерЃћрЃАрЃљрЃФрЃџрЃћрЃЉрЃћрЃџрЃўрЃљ MQTT-рЃўрЃЌ, <code>Command Router</code>-рЃўрЃА рЃЏрЃћрЃерЃЋрЃћрЃЮрЃЉрЃўрЃЌ.</p>
<ul>
<li><b>рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃўрЃА рЃњрЃљрЃњрЃќрЃљрЃЋрЃюрЃљ:</b><ul>
<li><b>Topic:</b> <code>synapse/devices/{id}/cmd/in</code></li>
<li><b>Payload:</b> <code>"selftest --report"</code></li>
</ul>
</li>
<li><b>рЃърЃљрЃАрЃБрЃ«рЃўрЃА рЃЏрЃўрЃдрЃћрЃЉрЃљ (JSON):</b><ul>
<li><b>Topic:</b> <code>synapse/devices/{id}/data/selftest/report</code></li>
<li><p class="startli"><b>Payload (рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў):</b></p>
<div class="fragment"><div class="line">{&quot;last_run_ms_ago&quot;:8547,&quot;results&quot;:[{&quot;test&quot;:&quot;Core Services Check&quot;,&quot;status&quot;:&quot;PASS&quot;,&quot;details&quot;:&quot;&quot;},{&quot;test&quot;:&quot;Free Heap&quot;,&quot;status&quot;:&quot;PASS&quot;,&quot;details&quot;:&quot;71032 bytes&quot;},{&quot;test&quot;:&quot;Storage Check&quot;,&quot;status&quot;:&quot;PASS&quot;,&quot;details&quot;:&quot;Write/Read/Erase OK&quot;},{&quot;test&quot;:&quot;main_wifi_manager&quot;,&quot;status&quot;:&quot;PASS&quot;,&quot;details&quot;:&quot;Running&quot;},{&quot;test&quot;:&quot;main_mqtt_broker&quot;,&quot;status&quot;:&quot;PASS&quot;,&quot;details&quot;:&quot;Running&quot;}]}</div>
</div><!-- fragment --></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md36"></a>
6. ­ЪњА рЃљрЃ«рЃљрЃџрЃў рЃбрЃћрЃАрЃбрЃўрЃА рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃўрЃА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў</h1>
<p>рЃгрЃљрЃарЃЏрЃЮрЃЋрЃўрЃЊрЃњрЃўрЃюрЃЮрЃЌ, рЃњрЃЋрЃўрЃюрЃЊрЃљ рЃЊрЃљрЃЋрЃљрЃЏрЃљрЃбрЃЮрЃЌ рЃбрЃћрЃАрЃбрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃА <code>rgb_led_indicator</code>-рЃўрЃА рЃЏрЃБрЃерЃљрЃЮрЃЉрЃљрЃА.</p>
<p><b>рЃюрЃљрЃЉрЃўрЃ»рЃў 1: рЃерЃћрЃЦрЃЏрЃћрЃюрЃўрЃЌ рЃљрЃ«рЃљрЃџрЃў рЃбрЃћрЃАрЃбрЃўрЃА рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ <code><a class="el" href="self__test__manager_8c.html" title="Implementation of the Self Test Manager module.">self_test_manager.c</a></code>-рЃерЃў</b></p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> run_rgb_led_check(<a class="code hl_struct" href="structself__test__private__data__t.html">self_test_private_data_t</a> *private_data) {</div>
<div class="line">    <span class="comment">// 1. Find the service by its type</span></div>
<div class="line">    <a class="code hl_typedef" href="service__locator_8h.html#a22cfccb1af1e87fc6ab4e00a5640f047">service_handle_t</a> led_handle = <a class="code hl_function" href="service__locator_8h.html#a15eb7d324559bd97c87796cac394cc8d">fmw_service_lookup_by_type</a>(FMW_SERVICE_TYPE_RGB_LED_API);</div>
<div class="line">    <span class="keywordflow">if</span> (!led_handle) {</div>
<div class="line">        add_report_line(private_data, <span class="stringliteral">&quot;RGB LED Check&quot;</span>, <a class="code hl_enumvalue" href="self__test__manager_8c.html#a2682e047750c295771c3a6953c8393e1ae5302228b05358d3f94a6f22cd11a1e8">TEST_RESULT_SKIPPED</a>, <span class="stringliteral">&quot;RGB LED service not found&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    <a class="code hl_struct" href="structrgb__led__api__t.html">rgb_led_api_t</a> *led_api = (<a class="code hl_struct" href="structrgb__led__api__t.html">rgb_led_api_t</a> *)led_handle;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 2. Perform a simple test: cycle through Red, Green, Blue</span></div>
<div class="line">    led_api-&gt;<a class="code hl_variable" href="structrgb__led__api__t.html#afaf3de1102a25d5460d2428b9018a48e">set_color</a>(255, 0, 0); <span class="comment">// Red</span></div>
<div class="line">    vTaskDelay(pdMS_TO_TICKS(200));</div>
<div class="line">    led_api-&gt;<a class="code hl_variable" href="structrgb__led__api__t.html#afaf3de1102a25d5460d2428b9018a48e">set_color</a>(0, 255, 0); <span class="comment">// Green</span></div>
<div class="line">    vTaskDelay(pdMS_TO_TICKS(200));</div>
<div class="line">    led_api-&gt;<a class="code hl_variable" href="structrgb__led__api__t.html#afaf3de1102a25d5460d2428b9018a48e">set_color</a>(0, 0, 255); <span class="comment">// Blue</span></div>
<div class="line">    vTaskDelay(pdMS_TO_TICKS(200));</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// 3. Release control to return to automatic state</span></div>
<div class="line">    led_api-&gt;<a class="code hl_variable" href="structrgb__led__api__t.html#a51197765d41c0532713fa702fe463f88">release_control</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// 4. Add result to the report</span></div>
<div class="line">    add_report_line(private_data, <span class="stringliteral">&quot;RGB LED Check&quot;</span>, <a class="code hl_enumvalue" href="self__test__manager_8c.html#a2682e047750c295771c3a6953c8393e1a5915015357cf50b371e59de2436faa63">TEST_RESULT_PASS</a>, <span class="stringliteral">&quot;Color cycle OK&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="aself__test__manager_8c_html_a2682e047750c295771c3a6953c8393e1a5915015357cf50b371e59de2436faa63"><div class="ttname"><a href="self__test__manager_8c.html#a2682e047750c295771c3a6953c8393e1a5915015357cf50b371e59de2436faa63">TEST_RESULT_PASS</a></div><div class="ttdeci">@ TEST_RESULT_PASS</div><div class="ttdoc">The test completed successfully.</div><div class="ttdef"><b>Definition</b> self_test_manager.c:56</div></div>
<div class="ttc" id="aself__test__manager_8c_html_a2682e047750c295771c3a6953c8393e1ae5302228b05358d3f94a6f22cd11a1e8"><div class="ttname"><a href="self__test__manager_8c.html#a2682e047750c295771c3a6953c8393e1ae5302228b05358d3f94a6f22cd11a1e8">TEST_RESULT_SKIPPED</a></div><div class="ttdeci">@ TEST_RESULT_SKIPPED</div><div class="ttdoc">The test was skipped, e.g., due to a missing dependency.</div><div class="ttdef"><b>Definition</b> self_test_manager.c:59</div></div>
<div class="ttc" id="aservice__locator_8h_html_a15eb7d324559bd97c87796cac394cc8d"><div class="ttname"><a href="service__locator_8h.html#a15eb7d324559bd97c87796cac394cc8d">fmw_service_lookup_by_type</a></div><div class="ttdeci">service_handle_t fmw_service_lookup_by_type(fmw_service_type_t service_type)</div><div class="ttdoc">рЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃА рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃБрЃџрЃў рЃбрЃўрЃърЃўрЃА рЃърЃўрЃарЃЋрЃћрЃџ рЃарЃћрЃњрЃўрЃАрЃбрЃарЃўрЃарЃћрЃЉрЃБрЃџ рЃАрЃћрЃарЃЋрЃўрЃАрЃА</div><div class="ttdef"><b>Definition</b> service_locator.c:242</div></div>
<div class="ttc" id="aservice__locator_8h_html_a22cfccb1af1e87fc6ab4e00a5640f047"><div class="ttname"><a href="service__locator_8h.html#a22cfccb1af1e87fc6ab4e00a5640f047">service_handle_t</a></div><div class="ttdeci">void * service_handle_t</div><div class="ttdoc">рЃњрЃћрЃюрЃћрЃарЃўрЃЎрЃБрЃџрЃў рЃбрЃўрЃърЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃгрЃљрЃарЃЏрЃЮрЃљрЃЊрЃњрЃћрЃюрЃА рЃарЃћрЃњрЃўрЃАрЃбрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃАрЃћрЃарЃЋрЃўрЃАрЃўрЃА рЃ░рЃћрЃюрЃЊрЃџрЃА</div><div class="ttdef"><b>Definition</b> service_locator.h:31</div></div>
<div class="ttc" id="astructrgb__led__api__t_html"><div class="ttname"><a href="structrgb__led__api__t.html">rgb_led_api_t</a></div><div class="ttdoc">RGB LED Indicator Service API structure.</div><div class="ttdef"><b>Definition</b> rgb_led_interface.h:30</div></div>
<div class="ttc" id="astructrgb__led__api__t_html_a51197765d41c0532713fa702fe463f88"><div class="ttname"><a href="structrgb__led__api__t.html#a51197765d41c0532713fa702fe463f88">rgb_led_api_t::release_control</a></div><div class="ttdeci">esp_err_t(* release_control)(void)</div><div class="ttdoc">Releases manual control of the LED.</div><div class="ttdef"><b>Definition</b> rgb_led_interface.h:75</div></div>
<div class="ttc" id="astructrgb__led__api__t_html_afaf3de1102a25d5460d2428b9018a48e"><div class="ttname"><a href="structrgb__led__api__t.html#afaf3de1102a25d5460d2428b9018a48e">rgb_led_api_t::set_color</a></div><div class="ttdeci">esp_err_t(* set_color)(uint8_t r, uint8_t g, uint8_t b)</div><div class="ttdoc">Sets a static color on the LED.</div><div class="ttdef"><b>Definition</b> rgb_led_interface.h:40</div></div>
<div class="ttc" id="astructself__test__private__data__t_html"><div class="ttname"><a href="structself__test__private__data__t.html">self_test_private_data_t</a></div><div class="ttdef"><b>Definition</b> self_test_manager.c:105</div></div>
</div><!-- fragment --><p><b>рЃюрЃљрЃЉрЃўрЃ»рЃў 2: рЃЊрЃљрЃљрЃЏрЃљрЃбрЃћрЃЌ рЃцрЃБрЃюрЃЦрЃфрЃўрЃўрЃА <code>Forward Declaration</code></b></p>
<div class="fragment"><div class="line"><span class="comment">// In the Forward Declarations section</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> run_rgb_led_check(<a class="code hl_struct" href="structself__test__private__data__t.html">self_test_private_data_t</a> *private_data);</div>
</div><!-- fragment --><p><b>рЃюрЃљрЃЉрЃўрЃ»рЃў 3: рЃњрЃљрЃЏрЃЮрЃўрЃФрЃљрЃ«рЃћрЃЌ рЃљрЃ«рЃљрЃџрЃў рЃбрЃћрЃАрЃбрЃў <code>run_tests_task</code>-рЃерЃў</b></p>
<div class="fragment"><div class="line"><span class="comment">// Inside run_tests_task function</span></div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><span class="keywordflow">if</span> (run_all || strcmp(suite_to_run, <span class="stringliteral">&quot;conn&quot;</span>) == 0) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Running Connectivity Check...\n&quot;</span>);</div>
<div class="line">    run_connectivity_check(private_data);</div>
<div class="line">    vTaskDelay(pdMS_TO_TICKS(50));</div>
<div class="line">}</div>
<div class="line"><span class="comment">// РўЁРўЁРўЁ Add the new test call here РўЁРўЁРўЁ</span></div>
<div class="line"><span class="keywordflow">if</span> (run_all || strcmp(suite_to_run, <span class="stringliteral">&quot;led&quot;</span>) == 0) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Running RGB LED Check...\n&quot;</span>);</div>
<div class="line">    run_rgb_led_check(private_data);</div>
<div class="line">    vTaskDelay(pdMS_TO_TICKS(50));</div>
<div class="line">}</div>
<div class="line"><span class="comment">// ...</span></div>
</div><!-- fragment --><p><b>рЃюрЃљрЃЉрЃўрЃ»рЃў 4: рЃњрЃљрЃюрЃљрЃљрЃ«рЃџрЃћрЃЌ <code>usage</code> рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў <code><a class="el" href="structcmd__t.html" title="Defines the structure for a single command to be registered.">cmd_t</a></code>-рЃерЃў</b></p>
<div class="fragment"><div class="line"><span class="comment">// Inside self_test_manager_handle_event</span></div>
<div class="line"><span class="keyword">static</span> <a class="code hl_struct" href="structcmd__t.html">cmd_t</a> selftest_cmd = {</div>
<div class="line">    .<a class="code hl_variable" href="structcmd__t.html#a0120d5191bad85cf51f4fc04037847d7">command</a> = <span class="stringliteral">&quot;selftest&quot;</span>,</div>
<div class="line">    .help = <span class="stringliteral">&quot;Run system self-diagnostics.&quot;</span>,</div>
<div class="line">    .usage = <span class="stringliteral">&quot;selftest [--run [all|core|health|storage|conn|led]] [--report]&quot;</span>, <span class="comment">// &lt;-- Add &#39;led&#39;</span></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">};</div>
<div class="ttc" id="astructcmd__t_html"><div class="ttname"><a href="structcmd__t.html">cmd_t</a></div><div class="ttdoc">Defines the structure for a single command to be registered.</div><div class="ttdef"><b>Definition</b> cmd_router_interface.h:29</div></div>
<div class="ttc" id="astructcmd__t_html_a0120d5191bad85cf51f4fc04037847d7"><div class="ttname"><a href="structcmd__t.html#a0120d5191bad85cf51f4fc04037847d7">cmd_t::command</a></div><div class="ttdeci">const char * command</div><div class="ttdoc">The command name (e.g., &quot;relay&quot;, &quot;wifi&quot;). This is what the user types.</div><div class="ttdef"><b>Definition</b> cmd_router_interface.h:33</div></div>
</div><!-- fragment --><p>рЃљрЃЏ рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃћрЃЉрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ, <code>selftest --run led</code> рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃљ рЃњрЃљрЃБрЃерЃЋрЃћрЃЉрЃА рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ LED-рЃўрЃА рЃбрЃћрЃАрЃбрЃА, рЃ«рЃЮрЃџрЃЮ <code>selftest --run all</code> рЃЏрЃљрЃАрЃљрЃф рЃЕрЃљрЃарЃЌрЃљрЃЋрЃА рЃАрЃљрЃћрЃарЃЌрЃЮ рЃАрЃўрЃљрЃерЃў.</p>
<h1><a class="anchor" id="autotoc_md37"></a>
7. РЮЌ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў рЃерЃћрЃюрЃўрЃерЃЋрЃюрЃћрЃЉрЃў</h1>
<ul>
<li><b>рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃћрЃЉрЃў:</b> <code>CMakeLists.txt</code>-рЃерЃў, <code>REQUIRES</code> рЃАрЃћрЃЦрЃфрЃўрЃљрЃерЃў рЃБрЃюрЃЊрЃљ рЃўрЃДрЃЮрЃА рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃБрЃџрЃў рЃДрЃЋрЃћрЃџрЃљ рЃўрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃў, рЃарЃЮрЃЏрЃџрЃўрЃА Service API-рЃАрЃљрЃф рЃћрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃърЃўрЃарЃЊрЃљрЃърЃўрЃа рЃўрЃДрЃћрЃюрЃћрЃЉрЃА (рЃЏрЃљрЃњ., <code>command_router</code>, <code>health_monitor</code>).</li>
<li><b>рЃљрЃарЃљрЃЉрЃџрЃЮрЃЎрЃўрЃарЃћрЃЉрЃљрЃЊрЃЮрЃЉрЃљ:</b> рЃЊрЃљрЃарЃгрЃЏрЃБрЃюрЃЊрЃўрЃЌ, рЃарЃЮрЃЏ рЃЌрЃЦрЃЋрЃћрЃюрЃА рЃЏрЃўрЃћрЃа рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃБрЃџрЃў рЃбрЃћрЃАрЃбрЃћрЃЉрЃў рЃљрЃа рЃљрЃарЃўрЃА рЃ«рЃљрЃюрЃњрЃарЃФрЃџрЃўрЃЋрЃў рЃљрЃю рЃЏрЃЉрЃџрЃЮрЃЎрЃљрЃЋрЃў. рЃЌрЃБ рЃбрЃћрЃАрЃбрЃА рЃЊрЃўрЃЊрЃў рЃЊрЃарЃЮ рЃАрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ, рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЌ <code>vTaskDelay</code>, рЃарЃљрЃЌрЃљ рЃАрЃ«рЃЋрЃљ рЃбрЃљрЃАрЃЎрЃћрЃЉрЃАрЃљрЃф рЃЏрЃўрЃћрЃфрЃћрЃЌ рЃЏрЃБрЃерЃљрЃЮрЃЉрЃўрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљ. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
