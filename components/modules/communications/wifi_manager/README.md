# ­ЪЊХ рЃЏрЃЮрЃЊрЃБрЃџрЃў `wifi_manager`

## 1. ­ЪЊю рЃЏрЃўрЃЏрЃЮрЃ«рЃўрЃџрЃЋрЃљ

**рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃў:** `wifi_manager`  
**рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃљ:** `communication`  
**рЃЋрЃћрЃарЃАрЃўрЃљ:** 2.2.0  
**рЃљрЃЋрЃбрЃЮрЃарЃў:** рЃњрЃўрЃЮрЃарЃњрЃў рЃЏрЃљрЃњрЃарЃљрЃФрЃћ & Synapse AI Assistant

`wifi_manager` рЃљрЃарЃўрЃА Synapse Framework-рЃўрЃА рЃцрЃБрЃюрЃЊрЃљрЃЏрЃћрЃюрЃбрЃБрЃарЃў рЃАрЃљрЃЎрЃЮрЃЏрЃБрЃюрЃўрЃЎрЃљрЃфрЃўрЃЮ рЃЏрЃЮрЃЊрЃБрЃџрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃДрЃЮрЃцрЃА WiFi рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃАрЃарЃБрЃџрЃцрЃљрЃАрЃЮрЃЋрЃљрЃю, рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃўрЃќрЃћрЃЉрЃБрЃџ рЃЊрЃљ рЃЏрЃЊрЃњрЃарЃљрЃЊ рЃЏрЃљрЃарЃЌрЃЋрЃљрЃА. рЃЏрЃўрЃАрЃў рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃљрЃЏрЃЮрЃфрЃљрЃюрЃћрЃЉрЃўрЃљ:

- **­ЪћЌ рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃЏрЃљрЃарЃЌрЃЋрЃљ:** рЃерЃћрЃюрЃљрЃ«рЃБрЃџрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃЌ (credentials) рЃЦрЃАрЃћрЃџрЃЌрЃљрЃю рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃЊрЃљрЃЎрЃљрЃЋрЃерЃўрЃарЃћрЃЉрЃљ рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃўрЃА рЃЕрЃљрЃарЃЌрЃЋрЃўрЃАрЃљрЃА.
- **­Ъћё рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃљрЃдрЃЊрЃњрЃћрЃюрЃљ:** рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃњрЃљрЃгрЃДрЃЋрЃћрЃбрЃўрЃА рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў, рЃЏрЃўрЃАрЃў рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃљрЃдрЃЊрЃњрЃћрЃюрЃўрЃА рЃЏрЃфрЃЊрЃћрЃџрЃЮрЃЉрЃљ рЃћрЃЦрЃАрЃърЃЮрЃюрЃћрЃюрЃфрЃўрЃљрЃџрЃБрЃарЃў backoff рЃАрЃбрЃарЃљрЃбрЃћрЃњрЃўрЃўрЃЌ.
- **­ЪЊ▓ Provisioning-рЃЌрЃљрЃю рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃљ:** рЃљрЃ«рЃљрЃџрЃў рЃЦрЃАрЃћрЃџрЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃЏрЃўрЃдрЃћрЃЉрЃљ `provisioning` рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃўрЃЊрЃљрЃю рЃЊрЃљ рЃЏрЃљрЃЌрЃў рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃЊ рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ.
- **­ЪЊб рЃАрЃўрЃАрЃбрЃћрЃЏрЃБрЃарЃў рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃўрЃА рЃњрЃћрЃюрЃћрЃарЃљрЃфрЃўрЃљ:** рЃАрЃ«рЃЋрЃљ рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃўрЃА рЃўрЃюрЃцрЃЮрЃарЃЏрЃўрЃарЃћрЃЉрЃљ WiFi рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃАрЃбрЃљрЃбрЃБрЃАрЃўрЃА рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ (`WIFI_EVENT_CONNECTED`, `WIFI_EVENT_DISCONNECTED`, `WIFI_EVENT_IP_ASSIGNED`).
- **­ЪЊА рЃЊрЃўрЃАрЃбрЃљрЃюрЃфрЃўрЃБрЃарЃў рЃърЃљрЃАрЃБрЃ«рЃћрЃЉрЃў:** `wifi status` рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃўрЃА рЃерЃћрЃАрЃарЃБрЃџрЃћрЃЉрЃўрЃАрЃљрЃА, рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА рЃЊрЃћрЃбрЃљрЃџрЃБрЃа рЃАрЃбрЃљрЃбрЃБрЃАрЃА JSON рЃцрЃЮрЃарЃЏрЃљрЃбрЃерЃў `FMW_EVENT_WIFI_STATUS_READY` рЃўрЃЋрЃћрЃюрЃЌрЃўрЃА рЃАрЃљрЃ«рЃўрЃЌ, рЃарЃљрЃф `mqtt_manager`-рЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА рЃљрЃФрЃџрЃћрЃЋрЃА, рЃћрЃА рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ рЃњрЃљрЃарЃћ рЃАрЃўрЃАрЃбрЃћрЃЏрЃћрЃЉрЃА рЃЏрЃўрЃљрЃгрЃЮрЃЊрЃЮрЃА.
- **Рїе№ИЈ CLI рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃљ:** рЃАрЃарЃБрЃџрЃў, рЃўрЃюрЃбрЃћрЃарЃљрЃЦрЃбрЃўрЃБрЃџрЃў рЃЏрЃљрЃарЃЌрЃЋрЃљ рЃЊрЃљ рЃЊрЃўрЃљрЃњрЃюрЃЮрЃАрЃбрЃўрЃЎрЃљ рЃАрЃћрЃарЃўрЃБрЃџрЃў рЃЎрЃЮрЃюрЃАрЃЮрЃџрЃўрЃЊрЃљрЃю.

## 2. ­ЪЈЏ№ИЈ рЃљрЃарЃЦрЃўрЃбрЃћрЃЦрЃбрЃБрЃарЃБрЃџрЃў рЃърЃарЃўрЃюрЃфрЃўрЃърЃћрЃЉрЃў

- **Event-driven рЃљрЃарЃЦрЃўрЃбрЃћрЃЦрЃбрЃБрЃарЃљ:** рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃљрЃЦрЃбрЃўрЃБрЃарЃљрЃЊ рЃўрЃДрЃћрЃюрЃћрЃЉрЃА `Event Bus`-рЃА. рЃўрЃА рЃарЃЮрЃњрЃЮрЃарЃф **рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА** рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃА рЃАрЃљрЃЎрЃБрЃЌрЃљрЃарЃў рЃАрЃбрЃљрЃбрЃБрЃАрЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ, рЃўрЃАрЃћ **рЃњрЃљрЃЏрЃЮрЃўрЃгрЃћрЃарЃА** рЃАрЃ«рЃЋрЃљ рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃўрЃА (рЃЏрЃљрЃњ., `provisioning`, `system_manager`) рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃА.
- **рЃљрЃЉрЃАрЃбрЃарЃљрЃњрЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃЏрЃЊрЃњрЃарЃљрЃЊрЃЮрЃЉрЃљ (Abstracted Persistence):** рЃЦрЃАрЃћрЃџрЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў (SSID рЃЊрЃљ рЃърЃљрЃарЃЮрЃџрЃў) рЃўрЃюрЃљрЃ«рЃћрЃЉрЃљ рЃфрЃћрЃюрЃбрЃарЃљрЃџрЃўрЃќрЃћрЃЉрЃБрЃџрЃў **`Storage Manager`** рЃАрЃћрЃарЃЋрЃўрЃАрЃўрЃА рЃЏрЃћрЃерЃЋрЃћрЃЮрЃЉрЃўрЃЌ. рЃћрЃА рЃюрЃўрЃерЃюрЃљрЃЋрЃА, рЃарЃЮрЃЏ `wifi_manager`-рЃЏрЃљ рЃљрЃа "рЃўрЃфрЃўрЃА", рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў рЃцрЃўрЃќрЃўрЃЎрЃБрЃарЃљрЃЊ NVS-рЃерЃў рЃўрЃюрЃљрЃ«рЃћрЃЉрЃљ рЃЌрЃБ SPIFFS рЃцрЃљрЃўрЃџрЃерЃў.
- **рЃцрЃЮрЃюрЃБрЃарЃў рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃћрЃЉрЃў:** рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃћрЃДрЃарЃЊрЃюрЃЮрЃЉрЃљ ESP-IDF-рЃўрЃА `event loop` рЃАрЃўрЃАрЃбрЃћрЃЏрЃљрЃА рЃЊрЃљ FreeRTOS рЃбрЃљрЃўрЃЏрЃћрЃарЃћрЃЉрЃА, рЃарЃљрЃЌрЃљ рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃўрЃА рЃДрЃЋрЃћрЃџрЃљ рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃљ рЃљрЃАрЃўрЃюрЃЦрЃарЃЮрЃюрЃБрЃџрЃљрЃЊ, рЃцрЃЮрЃюрЃБрЃа рЃарЃћрЃЪрЃўрЃЏрЃерЃў рЃерЃћрЃАрЃарЃБрЃџрЃЊрЃћрЃА.
- **рЃЊрЃљрЃњрЃЋрЃўрЃљрЃюрЃћрЃЉрЃБрЃџрЃў рЃўрЃюрЃўрЃфрЃўрЃљрЃџрЃўрЃќрЃљрЃфрЃўрЃљ (Lazy Initialization of Dependencies):** рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃљрЃа рЃљрЃарЃўрЃА рЃърЃўрЃарЃЊрЃљрЃърЃўрЃа рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃў `command_router`-рЃќрЃћ. рЃўрЃА рЃўрЃДрЃћрЃюрЃћрЃЉрЃА `FMW_EVENT_SYSTEM_START_COMPLETE` рЃўрЃЋрЃћрЃюрЃЌрЃА, рЃарЃљрЃЌрЃљ рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃарЃћрЃњрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃљ рЃЏрЃЮрЃљрЃ«рЃЊрЃўрЃюрЃЮрЃА рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃЏрЃљрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ, рЃарЃљрЃф рЃЊрЃљрЃарЃгрЃЏрЃБрЃюрЃЊрЃћрЃЉрЃљ, рЃарЃЮрЃЏ `command_router`-рЃўрЃА рЃАрЃћрЃарЃЋрЃўрЃАрЃў рЃБрЃЎрЃЋрЃћ рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃўрЃљ.

## 3. РџЎ№ИЈ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ

рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃљрЃЉрЃљрЃќрЃўрЃАрЃЮ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ рЃ«рЃЊрЃћрЃЉрЃљ `system_config.json` рЃцрЃљрЃўрЃџрЃерЃў, рЃЌрЃБрЃЏрЃфрЃљ рЃЏрЃўрЃАрЃў рЃЦрЃфрЃћрЃЋрЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃўрЃА рЃБрЃЏрЃћрЃбрЃћрЃАрЃЮрЃЉрЃљ рЃўрЃЏрЃљрЃарЃЌрЃћрЃЉрЃљ `Kconfig`-рЃўрЃА (`idf.py menuconfig`) рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃўрЃЌ.

**`system_config.json` рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:**

```json
{
    "type": "wifi_manager",
    "enabled": true,
    "config": {
        "instance_name": "main_wifi"
    }
}
```

**`Kconfig` рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў (`idf.py menuconfig`):**

`Component config` -> `Synapse Framework` -> `Modules` -> `WiFi Manager` рЃЏрЃћрЃюрЃўрЃБрЃерЃў рЃерЃћрЃњрЃўрЃФрЃџрЃўрЃљрЃЌ рЃЊрЃљрЃљрЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃўрЃарЃЮрЃЌ:

- **Reconnect Attempts:** рЃ«рЃћрЃџрЃљрЃ«рЃљрЃџрЃў рЃЊрЃљрЃЎрЃљрЃЋрЃерЃўрЃарЃћрЃЉрЃўрЃА рЃЏрЃфрЃЊрЃћрЃџрЃЮрЃЉрЃћрЃЉрЃўрЃА рЃЏрЃљрЃЦрЃАрЃўрЃЏрЃљрЃџрЃБрЃарЃў рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃљ.
- **Reconnect Delay:** рЃАрЃљрЃгрЃДрЃўрЃАрЃў рЃЊрЃљрЃДрЃЮрЃЋрЃюрЃћрЃЉрЃљ рЃ«рЃћрЃџрЃљрЃ«рЃљрЃџрЃў рЃЊрЃљрЃЎрЃљрЃЋрЃерЃўрЃарЃћрЃЉрЃўрЃАрЃљрЃА.

## 4. ­ЪЊб рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃў (Events)

### рЃњрЃљрЃЏрЃЮрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃБрЃџрЃў рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃў

`wifi_manager` рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃА, рЃарЃЮрЃЏрЃџрЃћрЃЉрЃќрЃћрЃф рЃАрЃ«рЃЋрЃљ рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃА рЃерЃћрЃБрЃФрЃџрЃўрЃљрЃЌ рЃњрЃљрЃЏрЃЮрЃгрЃћрЃарЃљ:

| рЃўрЃЋрЃћрЃюрЃЌрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃў | рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў (Payload) | рЃљрЃдрЃгрЃћрЃарЃљ |
| :--- | :--- | :--- |
| `WIFI_EVENT_CONNECTED` | `NULL` | РюЁ рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃљ рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃўрЃЌ рЃЊрЃљрЃБрЃЎрЃљрЃЋрЃерЃўрЃарЃЊрЃљ WiFi рЃЦрЃАрЃћрЃџрЃА (L2 рЃЎрЃљрЃЋрЃерЃўрЃарЃў). |
| `WIFI_EVENT_DISCONNECTED` | `NULL` | РЮї рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃљрЃЏ рЃЊрЃљрЃЎрЃљрЃарЃњрЃљ рЃЎрЃљрЃЋрЃерЃўрЃарЃў WiFi рЃЦрЃАрЃћрЃџрЃЌрЃљрЃю. |
| `WIFI_EVENT_IP_ASSIGNED` | `esp_netif_ip_info_t*` | ­Ъїљ рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃљрЃЏ рЃЏрЃўрЃўрЃдрЃЮ IP рЃЏрЃўрЃАрЃљрЃЏрЃљрЃарЃЌрЃў DHCP рЃАрЃћрЃарЃЋрЃћрЃарЃўрЃАрЃњрЃљрЃю. |
| `WIFI_CREDENTIALS_NOT_FOUND` | `NULL` | РЮЊ рЃАрЃљрЃфрЃљрЃЋрЃерЃў рЃЋрЃћрЃа рЃЏрЃЮрЃўрЃФрЃћрЃЉрЃюрЃљ рЃерЃћрЃюрЃљрЃ«рЃБрЃџрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў, рЃАрЃљрЃГрЃўрЃарЃЮрЃљ provisioning. |
| `FMW_EVENT_WIFI_STATUS_READY` | `char*` (JSON) | ­ЪЊі `wifi status` рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃўрЃА рЃърЃљрЃАрЃБрЃ«рЃў JSON рЃцрЃЮрЃарЃЏрЃљрЃбрЃерЃў. |

### рЃњрЃљрЃЏрЃЮрЃгрЃћрЃарЃўрЃџрЃў рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃў

`wifi_manager` рЃњрЃљрЃЏрЃЮрЃўрЃгрЃћрЃарЃА рЃерЃћрЃЏрЃЊрЃћрЃњ рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃА:

| рЃўрЃЋрЃћрЃюрЃЌрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃў | рЃарЃћрЃљрЃЦрЃфрЃўрЃљ |
| :--- | :--- |
| `PROV_CREDENTIALS_RECEIVED` | рЃўрЃдрЃћрЃЉрЃА рЃљрЃ«рЃљрЃџ WiFi рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃА рЃЊрЃљ рЃўрЃюрЃљрЃ«рЃљрЃЋрЃА рЃЏрЃљрЃЌ `Storage Manager`-рЃўрЃА рЃЏрЃћрЃерЃЋрЃћрЃЮрЃЉрЃўрЃЌ. |
| `FMW_EVENT_SYSTEM_START_COMPLETE` | рЃљрЃарЃћрЃњрЃўрЃАрЃбрЃарЃўрЃарЃћрЃЉрЃА рЃЌрЃљрЃЋрЃўрЃА CLI рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃћрЃЉрЃА, рЃарЃљрЃЊрЃњрЃљрЃю рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ рЃАрЃарЃБрЃџрЃљрЃЊ рЃњрЃљрЃћрЃерЃЋрЃљ. |

## 5. ­ЪЊА MQTT рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў

рЃћрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃърЃўрЃарЃЊрЃљрЃърЃўрЃа рЃљрЃа рЃБрЃЎрЃљрЃЋрЃерЃўрЃарЃЊрЃћрЃЉрЃљ MQTT-рЃА, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃўрЃА рЃљрЃгрЃЋрЃЊрЃўрЃА рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљрЃА `mqtt_manager`-рЃА `Event Bus`-рЃўрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃўрЃЌ.

- **рЃњрЃљрЃЏрЃЮрЃАрЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃћрЃџрЃў рЃЌрЃћрЃЏрЃљ:** `synapse/devices/{id}/state/wifi/status`
- **рЃарЃЮрЃЊрЃўрЃА рЃЦрЃЋрЃћрЃДрЃюрЃЊрЃћрЃЉрЃљ:** рЃарЃЮрЃЊрЃћрЃАрЃљрЃф `mqtt_manager` рЃЏрЃўрЃўрЃдрЃћрЃЉрЃА `FMW_EVENT_WIFI_STATUS_READY` рЃўрЃЋрЃћрЃюрЃЌрЃА.
- **Payload (рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў):**

    ```json
    {
      "module_state": "Enabled",
      "connection_status": "Connected",
      "ssid": "MyHomeWiFi",
      "channel": 11,
      "rssi": -55,
      "ip_address": "192.168.1.123"
    }
    ```

## 6. Рїе№ИЈ CLI рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃћрЃЉрЃў (Command Line Interface)

рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃљрЃарЃћрЃњрЃўрЃАрЃбрЃарЃўрЃарЃћрЃЉрЃА `wifi` рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃљрЃА, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃўрЃФрЃџрЃћрЃЋрЃљ WiFi-рЃА рЃАрЃарЃБрЃџрЃў рЃЏрЃљрЃарЃЌрЃЋрЃўрЃАрЃљ рЃЊрЃљ рЃЊрЃўрЃљрЃњрЃюрЃЮрЃАрЃбрЃўрЃЎрЃўрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА.

| рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃљ | рЃљрЃарЃњрЃБрЃЏрЃћрЃюрЃбрЃћрЃЉрЃў | рЃљрЃдрЃгрЃћрЃарЃљ |
| :--- | :--- | :--- |
| `wifi status` | - | Рё╣№ИЈ рЃњрЃљрЃЏрЃЮрЃљрЃЦрЃЋрЃА рЃЊрЃћрЃбрЃљрЃџрЃБрЃарЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ рЃЎрЃЮрЃюрЃАрЃЮрЃџрЃерЃў **рЃЊрЃљ** рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА `FMW_EVENT_WIFI_STATUS_READY` рЃўрЃЋрЃћрЃюрЃЌрЃА. |
| `wifi scan` | - | ­ЪЊА рЃљрЃАрЃЎрЃљрЃюрЃћрЃарЃћрЃЉрЃА рЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃљрЃЦрЃЋрЃА рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃў WiFi рЃЦрЃАрЃћрЃџрЃћрЃЉрЃўрЃА рЃАрЃўрЃљ. |
| `wifi connect` | `<ssid> <password>` | ­ЪћЌ рЃфрЃЊрЃўрЃџрЃЮрЃЉрЃА рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃБрЃџ рЃЦрЃАрЃћрЃџрЃЌрЃљрЃю рЃЊрЃљрЃЎрЃљрЃЋрЃерЃўрЃарЃћрЃЉрЃљрЃА рЃЊрЃљ рЃўрЃюрЃљрЃ«рЃљрЃЋрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃА. |
| `wifi disconnect` | - | ­Ъћї рЃгрЃДрЃЋрЃћрЃбрЃА рЃЏрЃўрЃЏрЃЊрЃўрЃюрЃљрЃарЃћ WiFi рЃЎрЃљрЃЋрЃерЃўрЃарЃА. |
| `wifi enable` | - | РюЁ рЃарЃЌрЃљрЃЋрЃА `wifi_manager` рЃЏрЃЮрЃЊрЃБрЃџрЃА. |
| `wifi disable` | - | РЮї рЃЌрЃўрЃерЃљрЃЋрЃА `wifi_manager` рЃЏрЃЮрЃЊрЃБрЃџрЃА рЃЊрЃљ рЃгрЃДрЃЋрЃћрЃбрЃА рЃЎрЃљрЃЋрЃерЃўрЃарЃА. |
| `wifi erase_creds` | - | ­ЪЌЉ№ИЈ рЃерЃџрЃўрЃА рЃерЃћрЃюрЃљрЃ«рЃБрЃџ рЃДрЃЋрЃћрЃџрЃљ WiFi рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃА. |
| `wifi set_hostname` | `<name> [--reconnect]` | ­ЪЊЮ рЃфрЃЋрЃџрЃўрЃА рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃўрЃА Hostname-рЃА. |
| `wifi set_power_save` | `<off\|min\|max>` | ­ЪћІ рЃљрЃДрЃћрЃюрЃћрЃЉрЃА WiFi-рЃА рЃћрЃюрЃћрЃарЃњрЃўрЃўрЃА рЃЊрЃљрЃќрЃЮрЃњрЃЋрЃўрЃА рЃарЃћрЃЪрЃўрЃЏрЃА. |

## 7. ­ЪњА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў (рЃЏрЃЮрЃЌрЃ«рЃЮрЃЋрЃюрЃљ-рЃърЃљрЃАрЃБрЃ«рЃў)

1. **­Ъњ╗ рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃћрЃџрЃў (Postman/MQTT рЃЎрЃџрЃўрЃћрЃюрЃбрЃў):**
    - **рЃњрЃљрЃЏрЃЮрЃўрЃгрЃћрЃарЃА:** `synapse/devices/+/state/#`
    - **рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА:**
        - **Topic:** `synapse/devices/{id}/cmd/in`
        - **Payload:** `"wifi status"`

2. **РџЎ№ИЈ рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃљ (Synapse Framework):**
    - `mqtt_manager` рЃўрЃдрЃћрЃЉрЃА рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃљрЃА рЃЊрЃљ рЃљрЃњрЃќрЃљрЃЋрЃюрЃўрЃА рЃўрЃЋрЃћрЃюрЃЌрЃА `Command Router`-рЃерЃў.
    - `command_router` рЃўрЃФрЃљрЃ«рЃћрЃЉрЃА `wifi_manager`-рЃўрЃА `cmd_handler`-рЃА.
    - `wifi_manager` рЃљрЃњрЃарЃЮрЃЋрЃћрЃЉрЃА рЃАрЃбрЃљрЃбрЃБрЃАрЃА, рЃЦрЃЏрЃюрЃўрЃА JSON-рЃА рЃЊрЃљ рЃљрЃњрЃќрЃљрЃЋрЃюрЃўрЃА `FMW_EVENT_WIFI_STATUS_READY` рЃўрЃЋрЃћрЃюрЃЌрЃА.
    - `mqtt_manager` рЃўрЃдрЃћрЃЉрЃА `FMW_EVENT_WIFI_STATUS_READY` рЃўрЃЋрЃћрЃюрЃЌрЃА рЃЊрЃљ рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА MQTT-рЃерЃў.

3. **­Ъњ╗ рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃћрЃџрЃў (Postman/MQTT рЃЎрЃџрЃўрЃћрЃюрЃбрЃў):**
    - **рЃўрЃдрЃћрЃЉрЃА рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃљрЃА:**
        - **Topic:** `synapse/devices/{id}/state/wifi/status`
        - **Payload:** `{"connection_status":"Connected", ...}`

## 8. РЮЌ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў рЃерЃћрЃюрЃўрЃерЃЋрЃюрЃћрЃЉрЃў

- **рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃљ `CMakeLists.txt`-рЃерЃў:** `wifi_manager`-рЃўрЃА `CMakeLists.txt` рЃцрЃљрЃўрЃџрЃерЃў, `REQUIRES` рЃАрЃћрЃЦрЃфрЃўрЃљрЃерЃў рЃБрЃюрЃЊрЃљ рЃўрЃДрЃЮрЃА рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃБрЃџрЃў `storage_manager`, рЃарЃљрЃЊрЃњрЃљрЃю рЃўрЃА рЃўрЃДрЃћрЃюрЃћрЃЉрЃА рЃљрЃЏ рЃАрЃћрЃарЃЋрЃўрЃАрЃА.
- **`init_level`:** рЃљрЃЏ рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА `init_level` (`40`) рЃБрЃюрЃЊрЃљ рЃўрЃДрЃЮрЃА рЃБрЃцрЃарЃЮ рЃЏрЃљрЃдрЃљрЃџрЃў, рЃЋрЃўрЃЊрЃарЃћ `storage_manager`-рЃўрЃА (`20`), рЃЏрЃљрЃњрЃарЃљрЃЏ рЃБрЃцрЃарЃЮ рЃЊрЃљрЃЉрЃљрЃџрЃў, рЃЋрЃўрЃЊрЃарЃћ `command_router`-рЃўрЃА (`50`), рЃарЃљрЃЌрЃљ рЃЊрЃљрЃфрЃБрЃџрЃў рЃўрЃДрЃЮрЃА рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃћрЃЉрЃўрЃА рЃўрЃћрЃарЃљрЃарЃЦрЃўрЃљ.
