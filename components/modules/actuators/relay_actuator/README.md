# ­Ъћї рЃЏрЃЮрЃЊрЃБрЃџрЃў: `relay_actuator`

**­ЪЌѓ№ИЈ рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃљ:** `actuators`
**Рюњ№ИЈ рЃљрЃЋрЃбрЃЮрЃарЃў:** Synapse Framework Team
**­Ъћќ рЃЋрЃћрЃарЃАрЃўрЃљ:** 1.4.0

## 1. ­ЪЊю рЃЏрЃўрЃЏрЃЮрЃ«рЃўрЃџрЃЋрЃљ

`relay_actuator` рЃљрЃарЃўрЃА Synapse Framework-рЃўрЃА **рЃцрЃўрЃќрЃўрЃЎрЃБрЃарЃў рЃЏрЃЮрЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃўрЃА** рЃцрЃБрЃюрЃЊрЃљрЃЏрЃћрЃюрЃбрЃБрЃарЃў рЃЏрЃЮрЃЊрЃБрЃџрЃў. рЃўрЃА рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃДрЃЮрЃцрЃА рЃЏрЃљрЃарЃбрЃўрЃЋ, рЃАрЃбрЃљрЃюрЃЊрЃљрЃарЃбрЃБрЃџ рЃЊрЃљ рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮ рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃА рЃћрЃџрЃћрЃЦрЃбрЃарЃЮрЃЏрЃћрЃЦрЃљрЃюрЃўрЃЎрЃБрЃарЃў рЃарЃћрЃџрЃћрЃА рЃАрЃљрЃЏрЃљрЃарЃЌрЃљрЃЋрЃљрЃЊ. рЃћрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА рЃљрЃФрЃџрЃћрЃЋрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљрЃА, рЃЕрЃљрЃарЃЌрЃЮрЃА рЃљрЃю рЃњрЃљрЃЏрЃЮрЃарЃЌрЃЮрЃА рЃЏрЃљрЃдрЃљрЃџрЃў рЃФрЃљрЃЉрЃЋрЃўрЃА рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃћрЃЉрЃў (рЃюрЃљрЃЌрЃБрЃарЃћрЃЉрЃў, рЃбрЃБрЃЏрЃЉрЃЮрЃћрЃЉрЃў, рЃњрЃљрЃЏрЃљрЃЌрЃЉрЃЮрЃЉрЃџрЃћрЃЉрЃў рЃЊрЃљ рЃљ.рЃе.) ESP32-рЃўрЃА рЃћрЃарЃЌрЃў GPIO рЃърЃўрЃюрЃўрЃА рЃЏрЃћрЃерЃЋрЃћрЃЮрЃЉрЃўрЃЌ.

рЃћрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃљрЃарЃўрЃА рЃАрЃарЃБрЃџрЃў IoT рЃфрЃўрЃЎрЃџрЃўрЃА (**рЃАрЃћрЃюрЃАрЃЮрЃарЃў -> рЃЊрЃљрЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃљ -> рЃњрЃљрЃЊрЃљрЃгрЃДрЃЋрЃћрЃбрЃўрЃџрЃћрЃЉрЃљ -> рЃЏрЃЮрЃЦрЃЏрЃћрЃЊрЃћрЃЉрЃљ**) рЃЉрЃЮрЃџрЃЮ, рЃЎрЃарЃўрЃбрЃўрЃЎрЃБрЃџрЃў рЃарЃњрЃЮрЃџрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃЕрЃЋрЃћрЃюрЃА рЃцрЃарЃћрЃўрЃЏрЃЋрЃЮрЃарЃЦрЃА рЃљрЃФрЃџрЃћрЃЋрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА, рЃњрЃљрЃЋрЃџрЃћрЃюрЃљ рЃЏрЃЮрЃљрЃ«рЃЊрЃўрЃюрЃЮрЃА рЃцрЃўрЃќрЃўрЃЎрЃБрЃа рЃАрЃљрЃЏрЃДрЃљрЃарЃЮрЃќрЃћ.

## 2. ­ЪЈЏ№ИЈ рЃљрЃарЃЦрЃўрЃбрЃћрЃЦрЃбрЃБрЃарЃБрЃџрЃў рЃърЃарЃўрЃюрЃфрЃўрЃърЃћрЃЉрЃў

- **рЃ░рЃўрЃЉрЃарЃўрЃЊрЃБрЃџрЃў рЃЏрЃљрЃарЃЌрЃЋрЃљ:** рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃўрЃДрЃћрЃюрЃћрЃЉрЃА рЃарЃЮрЃњрЃЮрЃарЃф `Command Router`-рЃА, рЃўрЃАрЃћ `Service Locator`-рЃА, рЃарЃљрЃЌрЃљ рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃДрЃЮрЃА рЃЏрЃљрЃарЃЌрЃЋрЃўрЃА рЃЏрЃљрЃЦрЃАрЃўрЃЏрЃљрЃџрЃБрЃарЃў рЃЏрЃЮрЃЦрЃюрЃўрЃџрЃЮрЃЉрЃљ.
  - **CLI-рЃќрЃћ рЃЊрЃљрЃцрЃБрЃФрЃюрЃћрЃЉрЃБрЃџрЃў рЃЏрЃљрЃарЃЌрЃЋрЃљ:** рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃЏрЃЮрЃюрЃљрЃгрЃўрЃџрЃћрЃЮрЃЉрЃА `relay` рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃўрЃА рЃарЃћрЃњрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃљрЃерЃў, рЃарЃљрЃф рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃДрЃЮрЃцрЃА рЃЏрЃўрЃА рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃЮрЃЉрЃљрЃА рЃюрЃћрЃЉрЃўрЃАрЃЏрЃўрЃћрЃарЃў рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃўрЃЊрЃљрЃю (Serial, MQTT, HTTP).
  - **Service-driven:** **(рЃљрЃ«рЃљрЃџрЃў!)** рЃЌрЃўрЃЌрЃЮрЃћрЃБрЃџрЃў рЃўрЃюрЃАрЃбрЃљрЃюрЃфрЃўрЃљ рЃљрЃарЃћрЃњрЃўрЃАрЃбрЃарЃўрЃарЃћрЃЉрЃА рЃАрЃљрЃЎрЃБрЃЌрЃљрЃа `relay_api_t` рЃАрЃћрЃарЃЋрЃўрЃАрЃА `Service Locator`-рЃерЃў, рЃарЃљрЃф рЃАрЃ«рЃЋрЃљ рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА рЃљрЃФрЃџрЃћрЃЋрЃА, рЃърЃарЃЮрЃњрЃарЃљрЃЏрЃБрЃџрЃљрЃЊ, рЃърЃўрЃарЃЊрЃљрЃърЃўрЃа рЃЏрЃљрЃарЃЌрЃЮрЃю рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃў рЃарЃћрЃџрЃћ.
- **рЃърЃўрЃарЃЮрЃЉрЃўрЃЌрЃў рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃўрЃА рЃарЃћрЃњрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃљ:** **(рЃљрЃ«рЃљрЃџрЃў!)** рЃЎрЃЮрЃюрЃцрЃџрЃўрЃЦрЃбрЃћрЃЉрЃўрЃА рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю рЃљрЃАрЃљрЃфрЃўрЃџрЃћрЃЉрЃџрЃљрЃЊ, `relay` CLI рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃљ рЃарЃћрЃњрЃўрЃАрЃбрЃарЃўрЃарЃЊрЃћрЃЉрЃљ рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃћрЃарЃЌрЃ«рЃћрЃџ, `relay_actuator`-рЃўрЃА рЃърЃўрЃарЃЋрЃћрЃџрЃў рЃўрЃюрЃАрЃбрЃљрЃюрЃфрЃўрЃўрЃА рЃЏрЃўрЃћрЃа. рЃДрЃЋрЃћрЃџрЃљ рЃерЃћрЃЏрЃЊрЃњрЃЮрЃЏрЃў рЃўрЃюрЃАрЃбрЃљрЃюрЃфрЃўрЃљ рЃ«рЃћрЃЊрЃљрЃЋрЃА, рЃарЃЮрЃЏ рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃљ рЃБрЃЎрЃЋрЃћ рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА рЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃбрЃЮрЃЋрЃћрЃЉрЃА рЃарЃћрЃњрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃўрЃА рЃюрЃљрЃЉрЃўрЃ»рЃА.
- **Event-driven (рЃњрЃљрЃЏрЃЮрЃЏрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃћрЃџрЃў):** рЃЏрЃЊрЃњрЃЮрЃЏрЃљрЃарЃћрЃЮрЃЉрЃўрЃА рЃДрЃЮрЃЋрЃћрЃџрЃў рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ (`on` -> `off` рЃљрЃю рЃърЃўрЃарЃўрЃЦрЃўрЃЌ), рЃЏрЃЮрЃЊрЃБрЃџрЃў `Event Bus`-рЃќрЃћ рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА `SYNAPSE_EVENT_RELAY_STATE_CHANGED` рЃўрЃЋрЃћрЃюрЃЌрЃА. рЃћрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА рЃљрЃФрЃџрЃћрЃЋрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃАрЃ«рЃЋрЃљ рЃюрЃљрЃгрЃўрЃџрЃћрЃЉрЃА (рЃЏрЃљрЃњ., `mqtt_manager`, `logger_module`) рЃарЃћрЃљрЃџрЃБрЃа рЃЊрЃарЃЮрЃерЃў рЃЏрЃўрЃўрЃдрЃЮрЃю рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ рЃарЃћрЃџрЃћрЃА рЃАрЃбрЃљрЃбрЃБрЃАрЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ.
- **рЃарЃћрЃАрЃБрЃарЃАрЃћрЃЉрЃўрЃА рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃљ:** `init` рЃцрЃљрЃќрЃљрЃерЃў, рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃўрЃДрЃћрЃюрЃћрЃЉрЃА `Resource Manager`-рЃА, рЃарЃљрЃЌрЃљ рЃћрЃЦрЃАрЃЎрЃџрЃБрЃќрЃўрЃБрЃарЃљрЃЊ рЃЊрЃљрЃўрЃЎрЃљрЃЋрЃЮрЃА (рЃЊрЃљрЃџрЃЮрЃЦрЃЮрЃА) рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљрЃерЃў рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃБрЃџрЃў GPIO рЃърЃўрЃюрЃў.
- **рЃЏрЃЊрЃњрЃарЃљрЃЊрЃЮрЃЉрЃљ рЃЊрЃљ рЃЏрЃЊрЃњрЃЮрЃЏрЃљрЃарЃћрЃЮрЃЉрЃўрЃА рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ:** `initial_state: "last"` рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃАрЃљрЃА, рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃўрЃюрЃбрЃћрЃњрЃарЃўрЃарЃЊрЃћрЃЉрЃљ `Storage Manager`-рЃЌрЃљрЃю, рЃарЃљрЃЌрЃљ рЃерЃћрЃўрЃюрЃљрЃ«рЃЮрЃА рЃЌрЃљрЃЋрЃўрЃАрЃў рЃЉрЃЮрЃџрЃЮ рЃЏрЃЊрЃњрЃЮрЃЏрЃљрЃарЃћрЃЮрЃЉрЃљ NVS рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃљрЃерЃў рЃЊрЃљ рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃўрЃА рЃњрЃљрЃЊрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃљрЃдрЃљрЃЊрЃњрЃўрЃюрЃЮрЃА рЃўрЃА.
- **рЃЏрЃарЃљрЃЋрЃљрЃџрЃў рЃўрЃюрЃАрЃбрЃљрЃюрЃфрЃўрЃўрЃА рЃЏрЃ«рЃљрЃарЃЊрЃљрЃГрЃћрЃарЃљ:** рЃљрЃарЃЦрЃўрЃбрЃћрЃЦрЃбрЃБрЃарЃљ рЃерЃћрЃЦрЃЏрЃюрЃўрЃџрЃўрЃљ рЃўрЃАрЃћ, рЃарЃЮрЃЏ рЃАрЃўрЃАрЃбрЃћрЃЏрЃљрЃерЃў рЃћрЃарЃЌрЃЊрЃарЃЮрЃБрЃџрЃљрЃЊ рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃЊрЃћрЃА рЃЊрЃљ рЃўрЃЏрЃљрЃарЃЌрЃЮрЃА рЃарЃљрЃЏрЃЊрЃћрЃюрЃўрЃЏрЃћ, рЃћрЃарЃЌрЃЏрЃљрЃюрЃћрЃЌрЃўрЃАрЃњрЃљрЃю рЃЊрЃљрЃЏрЃЮрЃБрЃЎрЃўрЃЊрЃћрЃЉрЃћрЃџрЃў рЃарЃћрЃџрЃћрЃА рЃўрЃюрЃАрЃбрЃљрЃюрЃфрЃўрЃљ.

## 3. РџЎ№ИЈ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ (`config.json`)

рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃАрЃарЃБрЃџрЃљрЃЊ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃўрЃарЃћрЃЉрЃљрЃЊрЃўрЃљ. рЃЏрЃўрЃАрЃў default рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ рЃБрЃюрЃЊрЃљ рЃњрЃљрЃюрЃўрЃАрЃљрЃќрЃдрЃЋрЃарЃЮрЃА `components/modules/actuators/relay_actuator/config.json` рЃцрЃљрЃўрЃџрЃерЃў.

**рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў (рЃЮрЃарЃў рЃарЃћрЃџрЃћ):**

```json
[
  {
    "type": "relay_actuator",
    "enabled": true,
    "config": {
        "instance_name": "main_light",
        "gpio_pin": 23,
        "active_level": 1,
        "initial_state": "off"
    }
  },
  {
    "type": "relay_actuator",
    "enabled": true,
    "config": {
        "instance_name": "water_pump",
        "gpio_pin": 22,
        "active_level": 0,
        "initial_state": "last"
    }
  }
]
```

**рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:**

| рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃў | рЃбрЃўрЃърЃў | рЃљрЃдрЃгрЃћрЃарЃљ | Default |
| :--- | :--- | :--- | :--- |
| `instance_name` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | рЃарЃћрЃџрЃћрЃА рЃБрЃюрЃўрЃЎрЃљрЃџрЃБрЃарЃў рЃАрЃљрЃ«рЃћрЃџрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ рЃЏрЃўрЃА рЃАрЃљрЃЏрЃљрЃарЃЌрЃљрЃЋрЃљрЃЊ. | - (рЃАрЃљрЃЋрЃљрЃџрЃЊрЃћрЃЉрЃБрЃџрЃЮ) |
| `gpio_pin` | рЃарЃўрЃфрЃ«рЃЋрЃў | рЃарЃћрЃџрЃћрЃАрЃЌрЃљрЃю рЃЊрЃљрЃЎрЃљрЃЋрЃерЃўрЃарЃћрЃЉрЃБрЃџрЃў GPIO рЃърЃўрЃюрЃўрЃА рЃюрЃЮрЃЏрЃћрЃарЃў. | - (рЃАрЃљрЃЋрЃљрЃџрЃЊрЃћрЃЉрЃБрЃџрЃЮ) |
| `active_level` | рЃарЃўрЃфрЃ«рЃЋрЃў | рЃарЃљ рЃџрЃЮрЃњрЃўрЃЎрЃБрЃа рЃЊрЃЮрЃюрЃћрЃќрЃћ (`1` рЃљрЃю `0`) рЃўрЃарЃЌрЃЋрЃћрЃЉрЃљ рЃарЃћрЃџрЃћ. `1` = Active-High, `0` = Active-Low. | `1` |
| `initial_state` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | рЃарЃљ рЃЏрЃЊрЃњрЃЮрЃЏрЃљрЃарЃћрЃЮрЃЉрЃљрЃерЃў рЃБрЃюрЃЊрЃљ рЃўрЃДрЃЮрЃА рЃарЃћрЃџрЃћ рЃЕрЃљрЃарЃЌрЃЋрЃўрЃАрЃљрЃА. рЃерЃћрЃАрЃљрЃФрЃџрЃЮ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃћрЃЉрЃў: `"on"`, `"off"`, `"last"`. | `"off"` |

## 4. ­Ъћї Service API (`relay_api_t`)

рЃЌрЃўрЃЌрЃЮрЃћрЃБрЃџрЃў `relay_actuator` рЃўрЃюрЃАрЃбрЃљрЃюрЃфрЃўрЃљ рЃљрЃарЃћрЃњрЃўрЃАрЃбрЃарЃўрЃарЃћрЃЉрЃА `SYNAPSE_SERVICE_TYPE_RELAY_API` рЃбрЃўрЃърЃўрЃА рЃАрЃћрЃарЃЋрЃўрЃАрЃА `Service Locator`-рЃерЃў рЃЌрЃљрЃЋрЃўрЃАрЃў `instance_name`-рЃўрЃЌ. рЃћрЃА рЃАрЃ«рЃЋрЃљ рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃА рЃљрЃФрЃџрЃћрЃЋрЃА рЃърЃўрЃарЃЊрЃљрЃърЃўрЃарЃў, рЃърЃарЃЮрЃњрЃарЃљрЃЏрЃБрЃџрЃў рЃЏрЃљрЃарЃЌрЃЋрЃўрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА.

**API рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў:**

- `esp_err_t set_state(void* context, bool is_on);`
- `esp_err_t toggle(void* context);`
- `bool get_state(void* context);`

## 5. Рїе№ИЈ CLI рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃћрЃЉрЃў (Command Line Interface)

рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃЏрЃЮрЃюрЃљрЃгрЃўрЃџрЃћрЃЮрЃЉрЃА `relay` рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃўрЃА рЃарЃћрЃњрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃљрЃерЃў.

| рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃљ | рЃљрЃарЃњрЃБрЃЏрЃћрЃюрЃбрЃћрЃЉрЃў | рЃљрЃдрЃгрЃћрЃарЃљ |
| :--- | :--- | :--- |
| `relay` | `<instance_name> <on\|off\|toggle>` | ­ЪњА рЃЏрЃљрЃарЃЌрЃљрЃЋрЃА рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџ рЃарЃћрЃџрЃћрЃА. |

**рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃћрЃЉрЃў:**

```bash
# "main_light" рЃарЃћрЃџрЃћрЃА рЃЕрЃљрЃарЃЌрЃЋрЃљ
SYNAPSE> relay main_light on

# "water_pump" рЃарЃћрЃџрЃћрЃА рЃњрЃљрЃЏрЃЮрЃарЃЌрЃЋрЃљ
SYNAPSE> relay water_pump off

# "main_light" рЃарЃћрЃџрЃћрЃА рЃЏрЃЊрЃњрЃЮрЃЏрЃљрЃарЃћрЃЮрЃЉрЃўрЃА рЃерЃћрЃфрЃЋрЃџрЃљ
SYNAPSE> relay main_light toggle
```

## 6. ­ЪЊб рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃўрЃА рЃЏрЃЮрЃЊрЃћрЃџрЃў

- **рЃњрЃљрЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃў рЃўрЃЋрЃћрЃюрЃЌрЃў:**
  - **рЃАрЃљрЃ«рЃћрЃџрЃў:** `SYNAPSE_EVENT_RELAY_STATE_CHANGED`
  - **Payload-рЃўрЃА рЃбрЃўрЃърЃў:** `synapse_telemetry_payload_t`.
  - **`json_data` рЃерЃўрЃњрЃЌрЃљрЃЋрЃАрЃў (рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў):**

      ```json
      {"state":"on"}
      ```

  - **`module_name`:** рЃўрЃЏ рЃарЃћрЃџрЃћрЃА `instance_name`, рЃарЃЮрЃЏрЃџрЃўрЃА рЃАрЃбрЃљрЃбрЃБрЃАрЃўрЃф рЃерЃћрЃўрЃфрЃЋрЃљрЃџрЃљ (рЃЏрЃљрЃњ., `"main_light"`).

## 7. ­ЪЊА MQTT рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў

`relay_actuator`-рЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ рЃЊрЃљ рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў рЃАрЃарЃБрЃџрЃљрЃЊ рЃерЃћрЃАрЃљрЃФрЃџрЃћрЃЉрЃћрЃџрЃўрЃљ MQTT-рЃўрЃЌ.

- **РъА№ИЈ рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃњрЃљрЃњрЃќрЃљрЃЋрЃюрЃљ:**
  - **Topic:** `synapse/devices/{id}/cmd/in`
  - **Payload:** рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃўрЃА рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў, рЃЏрЃљрЃњ., `"relay water_pump on"`
- **РгЁ№ИЈ рЃАрЃбрЃљрЃбрЃБрЃАрЃўрЃА рЃЏрЃўрЃдрЃћрЃЉрЃљ:**
  - **Topic:** `synapse/devices/{id}/state/relay/{instance_name}/status`
  - **рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:** `synapse/devices/5C013B7246E4/state/relay/main_light/status`
  - **Payload:** `{"state":"on"}` рЃљрЃю `{"state":"off"}`

## 8. РЮЌ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў рЃерЃћрЃюрЃўрЃерЃЋрЃюрЃћрЃЉрЃў

- **CLI рЃарЃћрЃњрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃљ:** `relay` рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃљ рЃарЃћрЃњрЃўрЃАрЃбрЃарЃўрЃарЃЊрЃћрЃЉрЃљ рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃћрЃарЃЌрЃ«рЃћрЃџ, рЃърЃўрЃарЃЋрЃћрЃџрЃў `relay_actuator` рЃўрЃюрЃАрЃбрЃљрЃюрЃфрЃўрЃўрЃА рЃЏрЃўрЃћрЃа, `is_command_registered` API-рЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃЌ, рЃарЃљрЃЌрЃљ рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю рЃљрЃЋрЃўрЃфрЃўрЃџрЃЮрЃЌ рЃЎрЃЮрЃюрЃцрЃџрЃўрЃЦрЃбрЃћрЃЉрЃў.
