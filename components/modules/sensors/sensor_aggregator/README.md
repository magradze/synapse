# ­ЪїА№ИЈ рЃЏрЃЮрЃЊрЃБрЃџрЃў: `sensor_aggregator`

**­ЪЌѓ№ИЈ рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃљ:** `sensors`  
**Рюњ№ИЈ рЃљрЃЋрЃбрЃЮрЃарЃў:** Synapse Framework Team  
**­Ъћќ рЃЋрЃћрЃарЃАрЃўрЃљ:** 1.1.0

## 1. ­ЪЊю рЃЏрЃўрЃЏрЃЮрЃ«рЃўрЃџрЃЋрЃљ

`sensor_aggregator` рЃљрЃарЃўрЃА Synapse Framework-рЃўрЃА **рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃерЃћрЃњрЃарЃЮрЃЋрЃћрЃЉрЃўрЃА рЃфрЃћрЃюрЃбрЃарЃљрЃџрЃБрЃарЃў рЃЎрЃЋрЃљрЃюрЃФрЃў**. рЃЏрЃўрЃАрЃў рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃљрЃЏрЃЮрЃфрЃљрЃюрЃљрЃљ, рЃЏрЃЮрЃБрЃАрЃЏрЃўрЃюрЃЮрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљрЃерЃў рЃљрЃарЃАрЃћрЃЉрЃБрЃџрЃў рЃАрЃ«рЃЋрЃљрЃЊрЃљрЃАрЃ«рЃЋрЃљ рЃАрЃћрЃюрЃАрЃЮрЃарЃўрЃА рЃЏрЃўрЃћрЃа рЃњрЃљрЃЏрЃЮрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃБрЃџ рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃА, рЃерЃћрЃљрЃњрЃарЃЮрЃЋрЃЮрЃА рЃћрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў рЃћрЃарЃЌ, рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃўрЃарЃћрЃЉрЃБрЃџ "рЃЎрЃљрЃЊрЃарЃерЃў" (snapshot) рЃЊрЃљ рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃБрЃџрЃў рЃџрЃЮрЃњрЃўрЃЎрЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ, рЃњрЃљрЃЏрЃЮрЃљрЃЦрЃЋрЃћрЃДрЃюрЃЮрЃА рЃћрЃарЃЌрЃўрЃљрЃюрЃў, рЃљрЃњрЃарЃћрЃњрЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃарЃћрЃърЃЮрЃарЃбрЃў.

рЃћрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃгрЃДрЃЋрЃћрЃбрЃА рЃцрЃБрЃюрЃЊрЃљрЃЏрЃћрЃюрЃбрЃБрЃа рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃљрЃА: рЃўрЃЏрЃўрЃА рЃюрЃљрЃфрЃЋрЃџрЃљрЃЊ, рЃарЃЮрЃЏ рЃЏрЃарЃљрЃЋрЃљрЃџрЃЏрЃљ рЃАрЃћрЃюрЃАрЃЮрЃарЃЏрЃљ рЃфрЃљрЃџ-рЃфрЃљрЃџрЃЎрЃћ рЃЊрЃљрЃбрЃЋрЃўрЃарЃЌрЃЮрЃА `Event Bus` рЃЊрЃљ рЃЦрЃАрЃћрЃџрЃў, рЃљрЃњрЃарЃћрЃњрЃљрЃбрЃЮрЃарЃў рЃЦрЃЏрЃюрЃўрЃА рЃћрЃарЃЌрЃўрЃљрЃю, рЃАрЃўрЃюрЃЦрЃарЃЮрЃюрЃўрЃќрЃћрЃЉрЃБрЃџ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃюрЃљрЃЎрЃљрЃЊрЃА, рЃарЃљрЃф рЃАрЃўрЃАрЃбрЃћрЃЏрЃљрЃА рЃБрЃцрЃарЃЮ рЃћрЃцрЃћрЃЦрЃбрЃБрЃарЃА, рЃърЃарЃЮрЃњрЃюрЃЮрЃќрЃўрЃарЃћрЃЉрЃљрЃЊрЃА рЃЊрЃљ рЃЏрЃљрЃАрЃерЃбрЃљрЃЉрЃўрЃарЃћрЃЉрЃљрЃЊрЃА рЃ«рЃЊрЃўрЃА.

## 2. ­ЪЈЏ№ИЈ рЃљрЃарЃЦрЃўрЃбрЃћрЃЦрЃбрЃБрЃарЃБрЃџрЃў рЃърЃарЃўрЃюрЃфрЃўрЃърЃћрЃЉрЃў

- **Event-driven рЃљрЃарЃЦрЃўрЃбрЃћрЃЦрЃбрЃБрЃарЃљ:** рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃљрЃарЃўрЃА рЃАрЃБрЃцрЃЌрЃљ "рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃўрЃА рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃћрЃџрЃў рЃЊрЃљ рЃЏрЃгрЃљрЃарЃЏрЃЮрЃћрЃЉрЃћрЃџрЃў". рЃўрЃА рЃњрЃљрЃЏрЃЮрЃўрЃгрЃћрЃарЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљрЃерЃў рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃБрЃџ рЃАрЃћрЃюрЃАрЃЮрЃарЃћрЃЉрЃўрЃА рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃА рЃЊрЃљ рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА рЃћрЃарЃЌ, рЃАрЃбрЃљрЃюрЃЊрЃљрЃарЃбрЃБрЃџ, рЃцрЃарЃћрЃўрЃЏрЃЋрЃЮрЃарЃЦрЃўрЃА рЃЊрЃЮрЃюрЃўрЃА рЃўрЃЋрЃћрЃюрЃЌрЃА: `FMW_EVENT_AGGREGATED_SENSOR_REPORT`.
- **рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃЌ рЃЏрЃљрЃарЃЌрЃБрЃџрЃў рЃџрЃЮрЃњрЃўрЃЎрЃљ:** рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃЦрЃфрЃћрЃЋрЃљ рЃўрЃЏрЃљрЃарЃЌрЃћрЃЉрЃљ `system_config.json` рЃцрЃљрЃўрЃџрЃўрЃЊрЃљрЃю. рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃљрЃЋрЃА, рЃЌрЃБ рЃарЃЮрЃЏрЃћрЃџ рЃАрЃћрЃюрЃАрЃЮрЃарЃћрЃЉрЃА рЃБрЃюрЃЊрЃљ рЃБрЃАрЃЏрЃўрЃюрЃЮрЃА рЃЊрЃљ рЃарЃљ рЃАрЃбрЃарЃљрЃбрЃћрЃњрЃўрЃўрЃЌ рЃЏрЃЮрЃљрЃ«рЃЊрЃўрЃюрЃЮрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃљ.
- **рЃЊрЃарЃЮрЃќрЃћ-рЃЊрЃљрЃцрЃБрЃФрЃюрЃћрЃЉрЃБрЃџрЃў рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃљ:** рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃљрЃЦрЃбрЃўрЃБрЃарЃљрЃЊ рЃўрЃДрЃћрЃюрЃћрЃЉрЃА `System Timer Service`-рЃА, рЃарЃљрЃЌрЃљ рЃЏрЃљрЃарЃЌрЃЮрЃА рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃўрЃА рЃЊрЃарЃЮрЃўрЃА рЃцрЃљрЃюрЃ»рЃљрЃарЃљ рЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃЋрЃљрЃџрЃў.
- **рЃАрЃљрЃерЃБрЃљрЃџрЃЮ рЃўрЃюрЃўрЃфрЃўрЃљрЃџрЃўрЃќрЃљрЃфрЃўрЃўрЃА рЃЊрЃЮрЃюрЃћ (`init_level: 48`):** рЃўрЃюрЃўрЃфрЃўрЃљрЃџрЃўрЃќрЃЊрЃћрЃЉрЃљ рЃАрЃўрЃАрЃбрЃћрЃЏрЃБрЃарЃў рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃўрЃА (рЃЏрЃљрЃњ., `system_timer`) рЃерЃћрЃЏрЃЊрЃћрЃњ, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃљрЃърЃџрЃўрЃЎрЃљрЃфрЃўрЃўрЃА рЃЊрЃЮрЃюрЃўрЃА рЃАрЃћрЃюрЃАрЃЮрЃарЃћрЃЉрЃўрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃљрЃЏрЃЊрЃћ, рЃарЃљрЃЌрЃљ рЃЏрЃќрЃљрЃЊ рЃўрЃДрЃЮрЃА рЃЏрЃљрЃЌрЃў рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃўрЃА рЃЏрЃўрЃАрЃљрЃдрЃћрЃЉрЃљрЃЊ.
- **рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃљ:** рЃўрЃДрЃћрЃюрЃћрЃЉрЃА `mutex`-рЃА рЃерЃўрЃЊрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃўрЃА (snapshot) рЃЊрЃљрЃАрЃљрЃфрЃљрЃЋрЃљрЃЊ, рЃарЃљрЃЌрЃљ рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю рЃљрЃўрЃфрЃўрЃџрЃЮрЃА `race condition`-рЃћрЃЉрЃў рЃљрЃАрЃўрЃюрЃЦрЃарЃЮрЃюрЃБрЃџрЃў рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃўрЃА рЃЊрЃљрЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃўрЃАрЃљрЃА.

## 3. РџЎ№ИЈ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ (`system_config.json`)

рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃЦрЃфрЃћрЃЋрЃљ рЃўрЃЏрЃљрЃарЃЌрЃћрЃЉрЃљ рЃЏрЃўрЃАрЃў рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃўрЃЌ.

```json
{
    "type": "sensor_aggregator",
    "enabled": true,
    "config": {
        "instance_name": "main_aggregator",
        "aggregation_strategy": "time_window",
        "aggregation_period_sec": 30,
        "sensors_to_aggregate": [
            {
                "event_name": "SENSOR_DATA_TEMPERATURE",
                "json_key": "temperature"
            },
            {
                "event_name": "SENSOR_DATA_HUMIDITY",
                "json_key": "humidity"
            },
            {
                "event_name": "SENSOR_DATA_LIGHT",
                "json_key": "light_lux"
            }
        ]
    }
}
```

**рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў:**

| рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃў | рЃбрЃўрЃърЃў | рЃљрЃдрЃгрЃћрЃарЃљ | рЃАрЃљрЃЋрЃљрЃџрЃЊрЃћрЃЉрЃБрЃџрЃЮ |
| :--- | :--- | :--- | :---: |
| `instance_name` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃБрЃюрЃўрЃЎрЃљрЃџрЃБрЃарЃў рЃАрЃљрЃ«рЃћрЃџрЃў. | РюЁ |
| `aggregation_strategy` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃўрЃА рЃАрЃбрЃарЃљрЃбрЃћрЃњрЃўрЃљ: `"time_window"` рЃљрЃю `"on_trigger"`. | РюЁ |
| `aggregation_period_sec` | рЃарЃўрЃфрЃ«рЃЋрЃў | рЃЊрЃарЃЮрЃўрЃА рЃцрЃљрЃюрЃ»рЃљрЃарЃљ рЃгрЃљрЃЏрЃћрЃЉрЃерЃў (`time_window` рЃАрЃбрЃарЃљрЃбрЃћрЃњрЃўрЃўрЃАрЃЌрЃЋрЃўрЃА). | `time_window`-рЃАрЃЌрЃЋрЃўрЃА |
| `trigger_event` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | рЃњрЃљрЃЏрЃЮрЃЏрЃгрЃЋрЃћрЃЋрЃў рЃўрЃЋрЃћрЃюрЃЌрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃў (`on_trigger` рЃАрЃбрЃарЃљрЃбрЃћрЃњрЃўрЃўрЃАрЃЌрЃЋрЃўрЃА). | `on_trigger`-рЃўрЃАрЃЌрЃЋрЃўрЃА |
| `sensors_to_aggregate` | рЃЏрЃљрЃАрЃўрЃЋрЃў | рЃАрЃћрЃюрЃАрЃЮрЃарЃћрЃЉрЃўрЃА рЃАрЃўрЃљ, рЃарЃЮрЃЏрЃџрЃћрЃЉрЃАрЃљрЃф рЃЏрЃЮрЃЊрЃБрЃџрЃў "рЃБрЃАрЃЏрЃћрЃюрЃА". | РюЁ |

**рЃерЃћрЃюрЃўрЃерЃЋрЃюрЃљ:** `output_event_name` рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃў рЃљрЃЏрЃЮрЃдрЃћрЃЉрЃБрЃџрЃўрЃљ. рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃљрЃ«рЃџрЃљ рЃДрЃЮрЃЋрЃћрЃџрЃЌрЃЋрЃўрЃА рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА рЃАрЃбрЃљрЃюрЃЊрЃљрЃарЃбрЃБрЃџ `FMW_EVENT_AGGREGATED_SENSOR_REPORT` рЃўрЃЋрЃћрЃюрЃЌрЃА.

## 4. ­ЪЊб рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃўрЃА рЃЏрЃЮрЃЊрЃћрЃџрЃў

- **рЃерЃћрЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃў рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃў:**
  - рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃћрЃџрЃЮрЃЊрЃћрЃЉрЃљ рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃА, рЃарЃЮрЃЏрЃћрЃџрЃЌрЃљ `payload` рЃљрЃарЃўрЃА JSON рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃерЃћрЃўрЃфрЃљрЃЋрЃА `"value"` рЃњрЃљрЃАрЃљрЃдрЃћрЃЉрЃА. рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ:

        ```json
        {"value": 23.5}
        ```

* **рЃњрЃљрЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃў рЃўрЃЋрЃћрЃюрЃЌрЃў:**
  - **рЃАрЃљрЃ«рЃћрЃџрЃў:** `FMW_EVENT_AGGREGATED_SENSOR_REPORT` (рЃАрЃбрЃљрЃюрЃЊрЃљрЃарЃбрЃБрЃџрЃў)
  - **Payload-рЃўрЃА рЃбрЃўрЃърЃў:** `fmw_telemetry_payload_t`.
  - **`json_data` рЃерЃўрЃњрЃЌрЃљрЃЋрЃАрЃў (рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў):**

        ```json
        {"timestamp":1678886400,"temperature":23.5,"humidity":55.2,"light_lux":350}
        ```

## 5. ­ЪњА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў рЃЊрЃљ рЃбрЃћрЃАрЃбрЃўрЃарЃћрЃЉрЃљ

рЃљрЃЏ рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃарЃБрЃџрЃцрЃљрЃАрЃЮрЃЋрЃљрЃюрЃў рЃбрЃћрЃАрЃбрЃўрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА, рЃЕрЃЋрЃћрЃю рЃЋрЃўрЃДрЃћрЃюрЃћрЃЉрЃЌ `sensor_simulator` рЃЏрЃЮрЃЊрЃБрЃџрЃА, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃърЃћрЃарЃўрЃЮрЃЊрЃБрЃџрЃљрЃЊ рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА рЃАрЃћрЃюрЃАрЃЮрЃарЃћрЃЉрЃўрЃА рЃўрЃЏрЃўрЃбрЃўрЃарЃћрЃЉрЃБрЃџ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃА.

1. **`sensor_simulator`-рЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ:** рЃЊрЃљрЃарЃгрЃЏрЃБрЃюрЃЊрЃўрЃЌ, рЃарЃЮрЃЏ `sensor_simulator` рЃЕрЃљрЃарЃЌрЃБрЃџрЃўрЃљ `system_config.json`-рЃерЃў. рЃўрЃА рЃДрЃЮрЃЋрЃћрЃџ рЃарЃљрЃЏрЃЊрЃћрЃюрЃўрЃЏрЃћ рЃгрЃљрЃЏрЃерЃў рЃњрЃљрЃЏрЃЮрЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА `SENSOR_DATA_TEMPERATURE`, `SENSOR_DATA_HUMIDITY` рЃЊрЃљ `SENSOR_DATA_LIGHT` рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃА.
2. **`sensor_aggregator`-рЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ:** рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЌ рЃќрЃћрЃЏрЃЮрЃЌ рЃЏрЃЮрЃфрЃћрЃЏрЃБрЃџрЃў рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў.
3. **`mqtt_manager`-рЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ:**
    - `sensor_aggregator`-рЃўрЃА `module.json`-рЃерЃў рЃЊрЃљрЃљрЃЏрЃљрЃбрЃћрЃЌ:

        ```json
        "mqtt_interface": {
            "publishes": {
                "aggregated_report": "data/sensors/aggregated"
            }
        }
        ```

    - `mqtt_manager.c`-рЃерЃў, `event_topic_map`-рЃерЃў рЃЊрЃљрЃљрЃЏрЃљрЃбрЃћрЃЌ:

        ```c
        { FMW_EVENT_AGGREGATED_SENSOR_REPORT, MQTT_TOPIC_PUB_SENSOR_AGGREGATOR_AGGREGATED_REPORT }
        ```

4. **рЃерЃћрЃЊрЃћрЃњрЃўрЃА рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў:**
    - **рЃАрЃћрЃарЃўрЃБрЃџ рЃърЃЮрЃарЃбрЃерЃў:** `idf.py monitor`-рЃўрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃўрЃЌ рЃЊрЃљрЃўрЃюрЃљрЃ«рЃљрЃЋрЃЌ рЃџрЃЮрЃњрЃћрЃЉрЃА, рЃАрЃљрЃЊрЃљрЃф `SENSOR_AGGR` рЃбрЃћрЃњрЃўрЃЌ рЃЊрЃљрЃўрЃЉрЃћрЃГрЃЊрЃћрЃЉрЃљ рЃњрЃћрЃюрЃћрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃў JSON рЃЊрЃљ рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃљ рЃўрЃЋрЃћрЃюрЃЌрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ.
    - **MQTT рЃЎрЃџрЃўрЃћрЃюрЃбрЃерЃў:** рЃњрЃљрЃЏрЃЮрЃўрЃгрЃћрЃарЃћрЃЌ рЃЌрЃћрЃЏрЃљ `synapse/devices/{your_device_id}/data/sensors/aggregated`. рЃДрЃЮрЃЋрЃћрЃџ 30 рЃгрЃљрЃЏрЃерЃў рЃЌрЃЦрЃЋрЃћрЃю рЃЏрЃўрЃўрЃдрЃћрЃЉрЃЌ рЃћрЃарЃЌрЃўрЃљрЃю JSON рЃарЃћрЃърЃЮрЃарЃбрЃА.

## 6. ­Ъџђ рЃАрЃљрЃЏрЃЮрЃЏрЃљрЃЋрЃџрЃЮ рЃњрЃљрЃюрЃЋрЃўрЃЌрЃљрЃарЃћрЃЉрЃўрЃА рЃърЃћрЃарЃАрЃърЃћрЃЦрЃбрЃўрЃЋрЃћрЃЉрЃў

рЃљрЃЏ рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃљрЃЉрЃљрЃќрЃўрЃАрЃЮ рЃўрЃЏрЃърЃџрЃћрЃЏрЃћрЃюрЃбрЃљрЃфрЃўрЃљ рЃЦрЃЏрЃюрЃўрЃА рЃЏрЃДрЃљрЃа рЃАрЃљрЃцрЃБрЃФрЃЋрЃћрЃџрЃА. рЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃерЃў, рЃЏрЃўрЃАрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃЮрЃюрЃљрЃџрЃў рЃерЃћрЃўрЃФрЃџрЃћрЃЉрЃљ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃюрЃљрЃЊ рЃњрЃљрЃцрЃљрЃарЃЌрЃЮрЃЋрЃЊрЃћрЃА:

- **­ЪДа "рЃГрЃЎрЃЋрЃўрЃљрЃюрЃў" рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃљ:** рЃАрЃљрЃерЃБрЃљрЃџрЃЮ, рЃЏрЃўрЃю/рЃЏрЃљрЃЦрЃА рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃћрЃЉрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃљ, рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ рЃЊрЃљрЃАрЃљрЃерЃЋрЃћрЃЉ рЃЊрЃўрЃљрЃърЃљрЃќрЃЮрЃюрЃерЃў рЃЊрЃљ рЃЊрЃћрЃџрЃбрЃљ-рЃЎрЃЮрЃЏрЃърЃарЃћрЃАрЃўрЃљ рЃбрЃарЃљрЃцрЃўрЃЎрЃўрЃА рЃерЃћрЃАрЃљрЃЏрЃфрЃўрЃарЃћрЃЉрЃџрЃљрЃЊ.
- **­Ъћё рЃЎрЃЮрЃЏрЃърЃџрЃћрЃЦрЃАрЃБрЃарЃў рЃбрЃарЃўрЃњрЃћрЃарЃћрЃЉрЃў:** рЃарЃћрЃърЃЮрЃарЃбрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃљ рЃљрЃарЃљ рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃЊрЃарЃЮрЃўрЃЌ рЃљрЃю рЃћрЃарЃЌрЃў рЃўрЃЋрЃћрЃюрЃЌрЃўрЃЌ, рЃљрЃарЃљрЃЏрЃћрЃЊ рЃарЃљрЃЏрЃЊрЃћрЃюрЃўрЃЏрЃћ рЃўрЃЋрЃћрЃюрЃЌрЃўрЃА рЃЎрЃЮрЃЏрЃЉрЃўрЃюрЃљрЃфрЃўрЃўрЃЌ (`AND`/`OR` рЃџрЃЮрЃњрЃўрЃЎрЃљ) рЃљрЃю рЃАрЃћрЃюрЃАрЃЮрЃарЃўрЃА рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃўрЃА рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃў рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃўрЃАрЃљрЃА.
- **­ЪДЕ рЃЋрЃўрЃарЃбрЃБрЃљрЃџрЃБрЃарЃў рЃАрЃћрЃюрЃАрЃЮрЃарЃћрЃЉрЃў:** рЃарЃљрЃЏрЃЊрЃћрЃюрЃўрЃЏрЃћ рЃцрЃўрЃќрЃўрЃЎрЃБрЃарЃў рЃАрЃћрЃюрЃАрЃЮрЃарЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃАрЃљрЃцрЃБрЃФрЃЋрЃћрЃџрЃќрЃћ рЃљрЃ«рЃљрЃџрЃў, рЃЋрЃўрЃарЃбрЃБрЃљрЃџрЃБрЃарЃў рЃЏрЃћрЃбрЃарЃўрЃЎрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃљ (рЃЏрЃљрЃњ., "рЃюрЃљрЃЏрЃўрЃА рЃгрЃћрЃарЃбрЃўрЃџрЃў").
- **­ЪњЙ рЃЉрЃБрЃцрЃћрЃарЃўрЃќрЃљрЃфрЃўрЃљ:** рЃЦрЃАрЃћрЃџрЃБрЃарЃў рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃљрЃарЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃўрЃАрЃљрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃЊрЃарЃЮрЃћрЃЉрЃўрЃЌ рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ рЃЊрЃљ рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃљрЃдрЃЊрЃњрЃћрЃюрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ рЃћрЃарЃЌрЃўрЃљрЃюрЃљрЃЊ рЃњрЃљрЃњрЃќрЃљрЃЋрЃюрЃљ.
- **­Ъцќ AI/ML рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃљ:** рЃерЃћрЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃюрЃљрЃЎрЃљрЃЊрЃўрЃА рЃљрЃюрЃљрЃџрЃўрЃќрЃў рЃљрЃюрЃЮрЃЏрЃљрЃџрЃўрЃћрЃЉрЃўрЃА рЃљрЃдрЃЏрЃЮрЃАрЃљрЃЕрЃћрЃюрЃљрЃЊ.
- **­ЪјЏ№ИЈ рЃЊрЃўрЃюрЃљрЃЏрЃўрЃБрЃарЃў рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ:** рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃўрЃА рЃгрЃћрЃАрЃћрЃЉрЃўрЃА рЃерЃћрЃфрЃЋрЃџрЃљ рЃЊрЃўрЃАрЃбрЃљрЃюрЃфрЃўрЃБрЃарЃљрЃЊ, MQTT рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃўрЃА рЃЏрЃћрЃерЃЋрЃћрЃЮрЃЉрЃўрЃЌ.

рЃћрЃА рЃерЃћрЃАрЃљрЃФрЃџрЃћрЃЉрЃџрЃЮрЃЉрЃћрЃЉрЃў `Sensor Aggregator`-рЃА рЃљрЃЦрЃфрЃћрЃЋрЃА рЃБрЃЉрЃарЃљрЃџрЃЮ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃерЃћрЃЏрЃњрЃарЃЮрЃЋрЃћрЃЉрЃџрЃўрЃЊрЃљрЃю **Edge Computing-рЃўрЃА рЃЏрЃФрЃџрЃљрЃЋрЃа рЃЎрЃЋрЃљрЃюрЃФрЃљрЃЊ**.

## 7. ­ЪЊџ рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃўрЃЌрЃў рЃарЃћрЃАрЃБрЃарЃАрЃћрЃЉрЃў

- [ESP-IDF Documentation](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/)
- [FreeRTOS Documentation](https://www.freertos.org/)
- [MQTT Protocol Specification](https://mqtt.org/specification)
- [Synapse Framework GitHub Repository](https://github.com/Synapse-Framework/synapse-fmw)
