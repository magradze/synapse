# CHANGELOG

## [9.5.3] - 2025-09-11

### ✨ არქიტექტურული გაუმჯობესებები და DX (Architectural & Developer Experience Improvements)

- **feat(core):** 🚀 დაინერგა ახალი, ცენტრალიზებული **`synapse_utils`** ბიბლიოთეკა.
  - **კოდის დუბლირების აღმოფხვრა:** `core` კომპონენტს დაემატა დამხმარე ფუნქციების ნაკრები, რომელიც აბსტრაგირებს ხშირად განმეორებად ოპერაციებს, როგორიცაა უსაფრთხო სტრიქონების კოპირება და JSON კონფიგურაციის პარსინგი.
  - **უსაფრთხო პარსინგი:** ახალი ფუნქციები (`synapse_config_get_string_from_node` და ა.შ.) უზრუნველყოფს `config.json`-იდან მონაცემების ტიპიზირებულ და უსაფრთხო წაკითხვას, `default` მნიშვნელობების კორექტული დამუშავებით.

### 🔄 შეცვლილი და გაუმჯობესებული (Changed & Improved)

- **refactor(modules):** 🧹 განხორციელდა პროექტში არსებული **ყველა მოდულის** `parse_config` ფუნქციის სრული რეფაქტორინგი.
  - **კონსისტენტურობა და სიმარტივე:** ყველა მოდული ახლა იყენებს `synapse_utils` ბიბლიოთეკას კონფიგურაციის დასამუშავებლად. ამან კოდი გახადა ბევრად უფრო მოკლე, სუფთა, წაკითხვადი და ერთგვაროვანი.
  - **გაუმჯობესებული ვალიდაცია:** პარსინგის ლოგიკა ახლა უფრო მდგრადია არასრული ან არასწორი კონფიგურაციის მიმართ და უზრუნველყოფს უკეთეს ლოგირებას პრობლემების შემთხვევაში.

### 📄 დოკუმენტაცია (Documentation)

- **docs(core, convention):** ✍️ შეიქმნა და დაინდექსდა `synapse_utils` ბიბლიოთეკის სრული დოკუმენტაცია.
  - **`utils_api.md`:** დაემატა ახალი API რეფერენსი, რომელიც დეტალურად აღწერს ყველა დამხმარე ფუნქციას.
  - **`configuration_management.md`:** განახლდა კონფიგურაციის მართვის კონვენცია, რათა ასახოს `synapse_utils`-ის გამოყენების, როგორც საუკეთესო პრაქტიკის, სტატუსი.

---

## [9.5.2] - 2025-08-09

### ✨ გაუმჯობესებები (Improvements)

- **feat(logging):** 🎨 დაინერგა **ფერადი ლოგირების ტეგების** სისტემა.
  - **ვიზუალური გარჩევადობა:** `DEFINE_COMPONENT_TAG` მაკრო ახლა მეორე არგუმენტად იღებს ANSI ფერის კოდს, რაც საშუალებას გვაძლევს, ლოგირების ტეგები გავაფერადოთ მოდულის კატეგორიის მიხედვით.
  - **გამართვის გამარტივება:** ფერადი ტეგები მნიშვნელოვნად ამარტივებს ლოგების ვიზუალურ ანალიზს და ეხმარება დეველოპერს, სწრაფად გაარჩიოს, რომელი სისტემური კომპონენტიდან მოდის შეტყობინება.
  - **კონვენციის დანერგვა:** პროექტში არსებული ყველა მოდული განახლდა და იყენებს ახალ, ფერად ტეგებს სტანდარტიზებული ფერთა სქემის მიხედვით.

### 📄 დოკუმენტაცია (Documentation)

- **docs(convention):** ✍️ შეიქმნა ახალი დოკუმენტი **`logging_colors.md`**, რომელიც დეტალურად აღწერს ლოგირების ფერთა სქემის კონვენციას და მის გამოყენების წესებს.

---

## [9.5.0] - 2025-08-09

### 🔄 შეცვლილი და გაუმჯობესებული (Changed & Improved)

- **perf(modules):** ⚡️ განხორციელდა `rotary_encoder_input` და `health_monitor` მოდულების სრული რეფაქტორინგი, რათა მათ გამოიყენონ ახალი **`Task Pool Manager`** სერვისი.
  - **მეხსიერების ოპტიმიზაცია:** ამ მოდულებს აღარ აქვთ საკუთარი, გამოყოფილი FreeRTOS ტასკები. მათი პერიოდული ლოგიკა ახლა სრულდება გაზიარებულ "მუშა" ტასკებში, რამაც მნიშვნელოვნად გაზარდა თავისუფალი ოპერატიული მეხსიერების (Heap) რაოდენობა და აღმოფხვრა `Low heap memory` გაფრთხილებები.
  - **კოდის გამარტივება:** მოდულების იმპლემენტაცია გამარტივდა, რადგან ტასკების მართვის ლოგიკა (`while(1)`, `vTaskDelay`) სრულად აბსტრაგირებულია `Task Pool Manager`-ის მიერ.

### 📄 დოკუმენტაცია (Documentation)

- **docs(core):** ✍️ შეიქმნა და დაინდექსდა `Task Pool Manager`-ის სრული დოკუმენტაცია.
  - **`task_pool_pattern.md`:** დაემატა ახალი კონვენციის დოკუმენტი, რომელიც დეტალურად ხსნის, თუ როდის და როგორ უნდა გამოიყენონ დეველოპერებმა `Task Pool` პატერნი რესურსების ოპტიმიზაციისთვის.
  - **`task_pool_api.md`:** შეიქმნა სრული API რეფერენსი `Task Pool Manager`-ის ყველა საჯარო ფუნქციისთვის.
  - განახლდა `convention_index.md`, `api_index.md` და `core_components.md` ფაილები ახალი კომპონენტის ასასახად.

---

## [9.4.0] - 2025-08-08

### ✨ არქიტექტურული გაუმჯობესებები (Architectural Improvements)

- **feat(core):** 🚀 დაინერგა **ტასკების გაზიარების მენეჯერი (Shared Task Pool)**.
  - **რესურსების ოპტიმიზაცია:** `core` კომპონენტს დაემატა ახალი სერვისი, რომელიც მართავს "მუშა" ტასკების (Worker Tasks) ერთობლიობას. ეს საშუალებას აძლევს მცირე, პერიოდულ ამოცანებზე ორიენტირებულ მოდულებს, შეასრულონ თავიანთი სამუშაო ამ გაზიარებულ ტასკებში, საკუთარი ტასკის შექმნის გარეშე.
  - **RAM-ის დაზოგვა:** ეს მიდგომა რადიკალურად ამცირებს სისტემაში არსებული ტასკების რაოდენობას და, შესაბამისად, სტეკისთვის გამოყოფილ მეხსიერებას, რაც კრიტიკულია რესურს-შეზღუდული მოწყობილობებისთვის.
  - **გამარტივებული API:** მოდულებს შეუძლიათ, მარტივად დაგეგმონ (`synapse_task_pool_schedule_job`) და გააუქმონ (`synapse_task_pool_cancel_job`) ერთჯერადი ან პერიოდული სამუშაოები, FreeRTOS ტასკების პირდაპირი მართვის სირთულის გარეშე.

---

## [9.3.0] - 2025-08-08

### ✨ არქიტექტურული გაუმჯობესებები (Architectural Improvements)

- **feat(core):** 🚀 დაინერგა სისტემის უსაფრთხო და კონტროლირებადი გათიშვის მექანიზმი **"Graceful Shutdown"**.
  - **შებრუნებული დეინიციალიზაცია:** `reboot` ბრძანებისას, `System Manager` ახლა ყველა აქტიური მოდულის `deinit` ფუნქციას იძახებს `init_level`-ის შებრუნებული თანმიმდევრობით, რაც უზრუნველყოფს რესურსების კორექტულ გათავისუფლებას და მონაცემთა კორუფციისგან დაცვას.
  - **ტაიმაუტის მექანიზმი:** თითოეული მოდულის `deinit` ფუნქციის შესრულება კონტროლდება ტაიმაუტით. თუ რომელიმე მოდული "გაიჭედება", სისტემა მას იგნორირებას უკეთებს და აგრძელებს გათიშვის პროცესს, რაც ზრდის სისტემის მდგრადობას.

### 🔄 შეცვლილი და გაუმჯობესებული (Changed & Improved)

- **refactor(core):** 🏛️ განხორციელდა `deinit` პროცესის სრული რეფაქტორინგი მეხსიერების უსაფრთხოების გასაუმჯობესებლად.
  - **კონფიგურაციის დუბლირება:** მოდულები ახლა `_create` ფაზაში ქმნიან თავიანთი კონფიგურაციის დამოუკიდებელ ასლს, რაც გამორიცხავს საერთო რესურსის ნაადრევად გათავისუფლების პრობლემას.
  - **`free()`-ს ცენტრალიზაცია:** `module_t` ობიექტის მეხსიერების გათავისუფლებაზე ახლა სრულად პასუხისმგებელია `System Manager`, რაც უზრუნველყოფს სიცოცხლის ციკლის სწორ მართვას.
- **refactor(cmd_router):** ⚙️ განახლდა `command_router`-ის იმპლემენტაცია.
  - მოძველებული (`deprecated`) VFS UART ფუნქციები ჩანაცვლდა ESP-IDF v5.4-ის თანამედროვე API-ებით, რამაც გააქრო კომპილაციის გაფრთხილებები.
  - დაიხვეწა `deinit` ლოგიკა, რათა უზრუნველყოს სერიული კონსოლის უსაფრთხო და `deadlock`-ისგან თავისუფალი გათიშვა.

### 🐛 შესწორებები (Bug Fixes)

- **fix(rotary_encoder):** 🐞 გასწორდა `Deadlock` პრობლემა `rotary_encoder_input`-ის `deinit` ფუნქციაში. ტასკის 강제-ით წაშლის ნაცვლად, ახლა გამოიყენება უსაფრთხო, სიგნალზე დაფუძნებული გაჩერების მექანიზმი.

---

## [9.2.0] - 2025-08-08

### ✨ გაუმჯობესებები (Improvements)

- **feat(scripts):** 🚀 `create_module.py` სკრიპტი განახლდა **v3.1**-მდე და სრულად ადაპტირდა დანაწევრებულ არქიტექტურასთან.
  - **დანაწევრებული გენერაცია:** არქეტიპის არჩევისას, სკრიპტი ახლა ავტომატურად აგენერირებს ყველა საჭირო `.c` ფაილს (`_api.c`, `_cmd.c` და ა.შ.) და ქმნის `_internal.h` ფაილის ჩონჩხს.
  - **საუკეთესო პრაქტიკები:** გენერირებული კოდი ახლა იყენებს `synapse_service_lookup_by_type`-ს, რათა თავიდან აიცილოს `hardcoded` დამოკიდებულებები.

### 📄 დოკუმენტაცია (Documentation)

- **docs(tutorials):** ✍️ განახლდა `create_module.md` ფაილი ახალი, დანაწევრებული ფაილური სტრუქტურისა და გაუმჯობესებული სამუშაო პროცესის აღწერით.

---

## [9.1.0] - 2025-08-08

### ✨ არქიტექტურული გაუმჯობესებები (Architectural Improvements)

- **refactor(core):** 🏛️ განისაზღვრა და დაინერგა მოდულის კოდის დანაწევრების ახალი, სტანდარტული არქიტექტურა.
  - **ლოგიკური დაყოფა:** დიდი, მონოლითური `.c` ფაილების ნაცვლად, მოდულის კოდი ახლა იყოფა ლოგიკური პასუხისმგებლობების მიხედვით: `_api.c`, `_cmd.c`, `_events.c` და მთავარი `_lifecycle` ფაილი.
  - **შიდა კონტრაქტი (`_internal.h`):** დაინერგა პრივატული `_internal.h` ჰედერის კონცეფცია, რომელიც უზრუნველყოფს ტიპებისა და ფუნქციების უსაფრთხო გაზიარებას მოდულის შიდა ნაწილებს შორის, საჯარო API-ს დაბინძურების გარეშე.
  - **საპილოტე პროექტი:** `wifi_manager` მოდული სრულად გადაკეთდა ამ ახალი, გაუმჯობესებული სტრუქტურის მიხედვით, რაც მას ხდის სამომავლო მოდულების ეტალონად.

### 📄 დოკუმენტაცია (Documentation)

- **docs(convention):** ✍️ სრულად განახლდა `module_structure.md` დოკუმენტი.
  - დაემატა კოდის დანაწევრების ახალი წესების დეტალური აღწერა.
  - განახლდა `CMakeLists.txt`-ის შაბლონი, რათა ასახავდეს "ჭკვიანი" პირობითი კომპილაციის მექანიზმს.
  - დაიხვეწა საუკეთესო პრაქტიკებისა და აკრძალული პატერნების სექციები.

---

## [9.0.0] - 2025-08-07

### 💥 არქიტექტურული ცვლილებები (Breaking Changes & Refactoring)

- **refactor(core):** 🏷️ განხორციელდა ფრეიმვორქის API-ს სრული რებრენდინგი.
  - **პრეფიქსების ცვლილება:** ყველა საჯარო API ფუნქციის, ტიპის და მაკროს პრეფიქსი შეიცვალა `fmw_`-დან `synapse_`-ზე (და `FMW_`-დან `SYNAPSE_`-ზე). ეს ცვლილება აძლიერებს ფრეიმვორქის იდენტობას და კოდს უფრო ცხადს ხდის.
  - **მოდულების განახლება:** პროექტში არსებული ყველა მოდული განახლდა, რათა გამოეყენებინათ ახალი, `synapse_` პრეფიქსის მქონე API.

### 📄 დოკუმენტაცია (Documentation)

- **docs(project):**  Manifesto.md ფაილი დაემატა პროექტის root დირექტორიაში, რომელიც აღწერს ფრეიმვორქის ძირითად ფილოსოფიასა და არქიტექტურულ პრინციპებს.
- **docs(project):** 🚀 განახლდა მთავარი `README.md` ფაილი.
  - **სრული თარგმანი:** დოკუმენტი სრულად გადაითარგმნა ინგლისურ ენაზე, რათა პროექტი უფრო ხელმისაწვდომი იყოს საერთაშორისო აუდიტორიისთვის.
  - **მანიფესტის ინტეგრაცია:** დაემატა ბმული და შესავალი ტექსტი ახალი `manifesto.md` ფაილისთვის.
  - **სტრუქტურული გაუმჯობესება:** დაიხვეწა დოკუმენტის სტრუქტურა და დაემატა ახალი "Key Features" სექცია.

---
[(v1.0.0 - v5.8.0)](docs/changelog/v5.md)
[(v6.0.0 - v6.2.0)](docs/changelog/v6.md)
[(v7.0.0 - v7.2.0)](docs/changelog/v7.md)
[(v8.0.0 - v8.1.0)](docs/changelog/v8.md)
