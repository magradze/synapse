# ­ЪїА№ИЈ рЃЏрЃЮрЃЊрЃБрЃџрЃў: `sensor_aggregator`

**­ЪЌѓ№ИЈ рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃљ:** `sensors`  
**Рюњ№ИЈ рЃљрЃЋрЃбрЃЮрЃарЃў:** Synapse Framework Team  
**­Ъћќ рЃЋрЃћрЃарЃАрЃўрЃљ:** 1.2.0

## 1. ­ЪЊю рЃЏрЃўрЃЏрЃЮрЃ«рЃўрЃџрЃЋрЃљ

`sensor_aggregator` рЃљрЃарЃўрЃА Synapse Framework-рЃўрЃА **рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃЊрЃљрЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃўрЃА рЃЊрЃљ рЃерЃћрЃњрЃарЃЮрЃЋрЃћрЃЉрЃўрЃА рЃфрЃћрЃюрЃбрЃарЃљрЃџрЃБрЃарЃў рЃЎрЃЋрЃљрЃюрЃФрЃў**. рЃЏрЃўрЃАрЃў рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃљрЃЏрЃЮрЃфрЃљрЃюрЃљрЃљ, рЃЏрЃЮрЃБрЃАрЃЏрЃўрЃюрЃЮрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљрЃерЃў рЃљрЃарЃАрЃћрЃЉрЃБрЃџрЃў рЃАрЃ«рЃЋрЃљрЃЊрЃљрЃАрЃ«рЃЋрЃљ рЃАрЃћрЃюрЃАрЃЮрЃарЃўрЃА рЃЏрЃўрЃћрЃа рЃњрЃљрЃЏрЃЮрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃБрЃџ рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃА, рЃЏрЃЮрЃљрЃ«рЃЊрЃўрЃюрЃЮрЃА рЃЏрЃљрЃЌрЃў **рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ**, **рЃЊрЃљрЃљрЃЏрЃБрЃерЃљрЃЮрЃА** рЃЊрЃљ **рЃљрЃњрЃарЃћрЃњрЃўрЃарЃћрЃЉрЃљ** рЃњрЃљрЃБрЃЎрЃћрЃЌрЃЮрЃА рЃћрЃарЃЌ, рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃўрЃарЃћрЃЉрЃБрЃџ "рЃЎрЃљрЃЊрЃарЃерЃў" (snapshot), рЃЊрЃљ рЃерЃћрЃЏрЃЊрЃћрЃњ, рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃБрЃџрЃў рЃџрЃЮрЃњрЃўрЃЎрЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ, рЃњрЃљрЃЏрЃЮрЃљрЃЦрЃЋрЃћрЃДрЃюрЃЮрЃА рЃћрЃарЃЌрЃўрЃљрЃюрЃў, "рЃњрЃљрЃГрЃЎрЃЋрЃўрЃљрЃюрЃћрЃЉрЃБрЃџрЃў" рЃарЃћрЃърЃЮрЃарЃбрЃў.

рЃћрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃгрЃДрЃЋрЃћрЃбрЃА рЃцрЃБрЃюрЃЊрЃљрЃЏрЃћрЃюрЃбрЃБрЃа рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃљрЃА: рЃўрЃЏрЃўрЃА рЃюрЃљрЃфрЃЋрЃџрЃљрЃЊ, рЃарЃЮрЃЏ рЃЏрЃарЃљрЃЋрЃљрЃџрЃЏрЃљ рЃАрЃћрЃюрЃАрЃЮрЃарЃЏрЃљ рЃфрЃљрЃџ-рЃфрЃљрЃџрЃЎрЃћ рЃЊрЃљрЃбрЃЋрЃўрЃарЃЌрЃЮрЃА `Event Bus` рЃЊрЃљ рЃЦрЃАрЃћрЃџрЃў "рЃюрЃћрЃЊрЃџрЃў" рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃЌ, рЃљрЃњрЃарЃћрЃњрЃљрЃбрЃЮрЃарЃў рЃљрЃ«рЃЊрЃћрЃюрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃърЃўрЃарЃЋрЃћрЃџрЃљрЃЊ рЃЊрЃљрЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃљрЃА рЃърЃўрЃарЃЊрЃљрЃърЃўрЃа рЃЏрЃЮрЃгрЃДрЃЮрЃЉрЃўрЃџрЃЮрЃЉрЃљрЃќрЃћ (Edge-рЃќрЃћ), рЃЦрЃЏрЃюрЃўрЃА рЃћрЃарЃЌрЃўрЃљрЃю, рЃАрЃўрЃюрЃЦрЃарЃЮрЃюрЃўрЃќрЃћрЃЉрЃБрЃџ рЃЊрЃљ рЃЏрЃљрЃдрЃљрЃџрЃў рЃ«рЃљрЃарЃўрЃАрЃ«рЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃюрЃљрЃЎрЃљрЃЊрЃА.

## 2. ­ЪЈЏ№ИЈ рЃљрЃарЃЦрЃўрЃбрЃћрЃЦрЃбрЃБрЃарЃБрЃџрЃў рЃърЃарЃўрЃюрЃфрЃўрЃърЃћрЃЉрЃў

- **Event-driven рЃљрЃарЃЦрЃўрЃбрЃћрЃЦрЃбрЃБрЃарЃљ:** рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃљрЃарЃўрЃА рЃАрЃБрЃцрЃЌрЃљ "рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃўрЃА рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃћрЃџрЃў рЃЊрЃљ рЃЏрЃгрЃљрЃарЃЏрЃЮрЃћрЃЉрЃћрЃџрЃў". рЃўрЃА рЃњрЃљрЃЏрЃЮрЃўрЃгрЃћрЃарЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљрЃерЃў рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃБрЃџ рЃАрЃћрЃюрЃАрЃЮрЃарЃћрЃЉрЃўрЃА рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃА рЃЊрЃљ рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА рЃћрЃарЃЌ, рЃАрЃбрЃљрЃюрЃЊрЃљрЃарЃбрЃБрЃџ, рЃцрЃарЃћрЃўрЃЏрЃЋрЃЮрЃарЃЦрЃўрЃА рЃЊрЃЮрЃюрЃўрЃА рЃўрЃЋрЃћрЃюрЃЌрЃА: `FMW_EVENT_AGGREGATED_SENSOR_REPORT`.
- **рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃЌ рЃЏрЃљрЃарЃЌрЃБрЃџрЃў рЃџрЃЮрЃњрЃўрЃЎрЃљ:** рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃЦрЃфрЃћрЃЋрЃљ рЃўрЃЏрЃљрЃарЃЌрЃћрЃЉрЃљ `system_config.json` рЃцрЃљрЃўрЃџрЃўрЃЊрЃљрЃю. рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃљрЃЋрЃА, рЃЌрЃБ рЃарЃЮрЃЏрЃћрЃџ рЃАрЃћрЃюрЃАрЃЮрЃарЃћрЃЉрЃА рЃБрЃюрЃЊрЃљ рЃБрЃАрЃЏрЃўрЃюрЃЮрЃА, рЃарЃљ рЃАрЃбрЃарЃљрЃбрЃћрЃњрЃўрЃўрЃЌ рЃЊрЃљ рЃарЃљ рЃарЃћрЃЪрЃўрЃЏрЃўрЃЌ рЃЏрЃЮрЃљрЃ«рЃЊрЃўрЃюрЃЮрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃљ рЃЊрЃљ рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ.
- **рЃЊрЃарЃЮрЃќрЃћ-рЃЊрЃљрЃцрЃБрЃФрЃюрЃћрЃЉрЃБрЃџрЃў рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃљ:** рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃљрЃЦрЃбрЃўрЃБрЃарЃљрЃЊ рЃўрЃДрЃћрЃюрЃћрЃЉрЃА `System Timer Service`-рЃА, рЃарЃљрЃЌрЃљ рЃЏрЃљрЃарЃЌрЃЮрЃА рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃўрЃА рЃЊрЃарЃЮрЃўрЃА рЃцрЃљрЃюрЃ»рЃљрЃарЃљ рЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃЋрЃљрЃџрЃў.
- **рЃАрЃљрЃерЃБрЃљрЃџрЃЮ рЃўрЃюрЃўрЃфрЃўрЃљрЃџрЃўрЃќрЃљрЃфрЃўрЃўрЃА рЃЊрЃЮрЃюрЃћ (`init_level: 48`):** рЃўрЃюрЃўрЃфрЃўрЃљрЃџрЃўрЃќрЃЊрЃћрЃЉрЃљ рЃАрЃўрЃАрЃбрЃћрЃЏрЃБрЃарЃў рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃўрЃА (рЃЏрЃљрЃњ., `system_timer`) рЃерЃћрЃЏрЃЊрЃћрЃњ, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃљрЃърЃџрЃўрЃЎрЃљрЃфрЃўрЃўрЃА рЃЊрЃЮрЃюрЃўрЃА рЃАрЃћрЃюрЃАрЃЮрЃарЃћрЃЉрЃўрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃљрЃЏрЃЊрЃћ, рЃарЃљрЃЌрЃљ рЃЏрЃќрЃљрЃЊ рЃўрЃДрЃЮрЃА рЃЏрЃљрЃЌрЃў рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃўрЃА рЃЏрЃўрЃАрЃљрЃдрЃћрЃЉрЃљрЃЊ.
- **рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮрЃћрЃЉрЃљ:** рЃўрЃДрЃћрЃюрЃћрЃЉрЃА `mutex`-рЃА рЃерЃўрЃЊрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃћрЃЉрЃўрЃА рЃЊрЃљрЃАрЃљрЃфрЃљрЃЋрЃљрЃЊ, рЃарЃљрЃЌрЃљ рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю рЃљрЃўрЃфрЃўрЃџрЃЮрЃА `race condition`-рЃћрЃЉрЃў рЃљрЃАрЃўрЃюрЃЦрЃарЃЮрЃюрЃБрЃџрЃў рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃўрЃА рЃЊрЃљрЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃўрЃАрЃљрЃА.

## 3. РџЎ№ИЈ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ (`system_config.json`)

рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃЦрЃфрЃћрЃЋрЃљ рЃўрЃЏрЃљрЃарЃЌрЃћрЃЉрЃљ рЃЏрЃўрЃАрЃў рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃўрЃЌ.

```json
{
    "type": "sensor_aggregator",
    "enabled": true,
    "config": {
        "instance_name": "main_aggregator",
        "aggregation_strategy": "time_window",
        "aggregation_period_sec": 60,
        "sensors_to_aggregate": [
            {
                "event_name": "SENSOR_DATA_TEMPERATURE",
                "json_key": "temperature",
                "aggregation_mode": "avg",
                "valid_range": { "min": -40.0, "max": 85.0 }
            },
            {
                "event_name": "SENSOR_DATA_HUMIDITY",
                "json_key": "humidity",
                "aggregation_mode": "last"
            },
            {
                "event_name": "SENSOR_DATA_LIGHT",
                "json_key": "light_lux",
                "aggregation_mode": "max"
            }
        ]
    }
}
```

### 3.1. рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў

| рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃў | рЃбрЃўрЃърЃў | рЃљрЃдрЃгрЃћрЃарЃљ | рЃАрЃљрЃЋрЃљрЃџрЃЊрЃћрЃЉрЃБрЃџрЃЮ |
| :--- | :--- | :--- | :---: |
| `instance_name` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃБрЃюрЃўрЃЎрЃљрЃџрЃБрЃарЃў рЃАрЃљрЃ«рЃћрЃџрЃў. | РюЁ |
| `aggregation_strategy` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃўрЃА рЃАрЃбрЃарЃљрЃбрЃћрЃњрЃўрЃљ: `"time_window"` рЃљрЃю `"on_trigger"`. | РюЁ |
| `aggregation_period_sec` | рЃарЃўрЃфрЃ«рЃЋрЃў | рЃЊрЃарЃЮрЃўрЃА рЃцрЃљрЃюрЃ»рЃљрЃарЃљ рЃгрЃљрЃЏрЃћрЃЉрЃерЃў (`time_window` рЃАрЃбрЃарЃљрЃбрЃћрЃњрЃўрЃўрЃАрЃЌрЃЋрЃўрЃА). | `time_window`-рЃАрЃЌрЃЋрЃўрЃА |
| `trigger_event` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | рЃњрЃљрЃЏрЃЮрЃЏрЃгрЃЋрЃћрЃЋрЃў рЃўрЃЋрЃћрЃюрЃЌрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃў (`on_trigger` рЃАрЃбрЃарЃљрЃбрЃћрЃњрЃўрЃўрЃАрЃЌрЃЋрЃўрЃА). | `on_trigger`-рЃўрЃАрЃЌрЃЋрЃўрЃА |
| `sensors_to_aggregate` | рЃЏрЃљрЃАрЃўрЃЋрЃў | рЃАрЃћрЃюрЃАрЃЮрЃарЃћрЃЉрЃўрЃА рЃАрЃўрЃљ, рЃарЃЮрЃЏрЃџрЃћрЃЉрЃАрЃљрЃф рЃЏрЃЮрЃЊрЃБрЃџрЃў "рЃБрЃАрЃЏрЃћрЃюрЃА". | РюЁ |

**3.2. `sensors_to_aggregate` рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў**

| рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃў | рЃбрЃўрЃърЃў | рЃљрЃдрЃгрЃћрЃарЃљ | Default |
| :--- | :--- | :--- | :--- |
| `event_name` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | рЃўрЃЏ рЃўрЃЋрЃћрЃюрЃЌрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃў, рЃарЃЮрЃЏрЃћрЃџрЃАрЃљрЃф рЃБрЃюрЃЊрЃљ рЃЏрЃЮрЃБрЃАрЃЏрЃўрЃюрЃЮрЃА. | - (рЃАрЃљрЃЋрЃљрЃџрЃЊрЃћрЃЉрЃБрЃџрЃЮ) |
| `json_key` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | рЃњрЃљрЃАрЃљрЃдрЃћрЃЉрЃўрЃА рЃАрЃљрЃ«рЃћрЃџрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃБрЃџрЃў рЃўрЃЦрЃюрЃћрЃЉрЃљ рЃАрЃљрЃЉрЃЮрЃџрЃЮрЃЮ JSON рЃарЃћрЃърЃЮрЃарЃбрЃерЃў. | - (рЃАрЃљрЃЋрЃљрЃџрЃЊрЃћрЃЉрЃБрЃџрЃЮ) |
| `aggregation_mode` | рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў | **(рЃљрЃ«рЃљрЃџрЃў!)** рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃўрЃА рЃарЃћрЃЪрЃўрЃЏрЃў. | `"last"` |
| `valid_range` | рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў | **(рЃљрЃ«рЃљрЃџрЃў!)** рЃЊрЃљрЃАрЃљрЃерЃЋрЃћрЃЉрЃў рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃћрЃЉрЃўрЃА рЃЊрЃўрЃљрЃърЃљрЃќрЃЮрЃюрЃў. рЃерЃћрЃўрЃфрЃљрЃЋрЃА `min` рЃЊрЃљ `max` рЃЋрЃћрЃџрЃћрЃЉрЃА. | - (рЃљрЃарЃљрЃАрЃљрЃЋрЃљрЃџрЃЊрЃћрЃЉрЃБрЃџрЃЮ) |

#### **`aggregation_mode`-рЃўрЃА рЃерЃћрЃАрЃљрЃФрЃџрЃЮ рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃћрЃЉрЃў:**

- **`"last"`** (Default): рЃарЃћрЃърЃЮрЃарЃбрЃерЃў рЃерЃћрЃЋрЃљ рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ **рЃЉрЃЮрЃџрЃЮ** рЃЏрЃўрЃдрЃћрЃЉрЃБрЃџрЃў рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ рЃЊрЃарЃЮрЃўрЃА рЃцрЃљрЃюрЃ»рЃарЃўрЃА рЃњрЃљрЃюрЃЏрЃљрЃЋрЃџрЃЮрЃЉрЃљрЃерЃў.
- **`"avg"`**: рЃарЃћрЃърЃЮрЃарЃбрЃерЃў рЃерЃћрЃЋрЃљ рЃЊрЃарЃЮрЃўрЃА рЃцрЃљрЃюрЃ»рЃарЃўрЃА рЃњрЃљрЃюрЃЏрЃљрЃЋрЃџрЃЮрЃЉрЃљрЃерЃў рЃЏрЃўрЃдрЃћрЃЉрЃБрЃџрЃў рЃДрЃЋрЃћрЃџрЃљ рЃЋрЃљрЃџрЃўрЃЊрЃБрЃарЃў рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃўрЃА **рЃАрЃљрЃерЃБрЃљрЃџрЃЮ рЃљрЃарЃўрЃЌрЃЏрЃћрЃбрЃўрЃЎрЃБрЃџрЃў**.
- **`"min"`**: рЃарЃћрЃърЃЮрЃарЃбрЃерЃў рЃерЃћрЃЋрЃљ рЃЊрЃарЃЮрЃўрЃА рЃцрЃљрЃюрЃ»рЃарЃўрЃА рЃњрЃљрЃюрЃЏрЃљрЃЋрЃџрЃЮрЃЉрЃљрЃерЃў рЃЏрЃўрЃдрЃћрЃЉрЃБрЃџрЃў **рЃЏрЃўрЃюрЃўрЃЏрЃљрЃџрЃБрЃарЃў** рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ.
- **`"max"`**: рЃарЃћрЃърЃЮрЃарЃбрЃерЃў рЃерЃћрЃЋрЃљ рЃЊрЃарЃЮрЃўрЃА рЃцрЃљрЃюрЃ»рЃарЃўрЃА рЃњрЃљрЃюрЃЏрЃљрЃЋрЃџрЃЮрЃЉрЃљрЃерЃў рЃЏрЃўрЃдрЃћрЃЉрЃБрЃџрЃў **рЃЏрЃљрЃЦрЃАрЃўрЃЏрЃљрЃџрЃБрЃарЃў** рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ.

## 4. ­ЪЊб рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃўрЃА рЃЏрЃЮрЃЊрЃћрЃџрЃў

- **рЃерЃћрЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃў рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃў:**
  - рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃћрЃџрЃЮрЃЊрЃћрЃЉрЃљ рЃўрЃЋрЃћрЃюрЃЌрЃћрЃЉрЃА, рЃарЃЮрЃЏрЃћрЃџрЃЌрЃљ `payload` рЃљрЃарЃўрЃА JSON рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃерЃћрЃўрЃфрЃљрЃЋрЃА `"value"` рЃњрЃљрЃАрЃљрЃдрЃћрЃЉрЃА. рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ:

    ```json
    {"value": 23.5}
    ```

- **рЃњрЃљрЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃў рЃўрЃЋрЃћрЃюрЃЌрЃў:**
  - **рЃАрЃљрЃ«рЃћрЃџрЃў:** `FMW_EVENT_AGGREGATED_SENSOR_REPORT` (рЃАрЃбрЃљрЃюрЃЊрЃљрЃарЃбрЃБрЃџрЃў)
  - **Payload-рЃўрЃА рЃбрЃўрЃърЃў:** `fmw_telemetry_payload_t`.
  - **`json_data` рЃерЃўрЃњрЃЌрЃљрЃЋрЃАрЃў (рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў):**

    ```json
    {"timestamp":1678886400,"temperature":23.5,"humidity":55.2,"light_lux":350}
    ```

## 5. ­ЪњА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў рЃЊрЃљ рЃбрЃћрЃАрЃбрЃўрЃарЃћрЃЉрЃљ

рЃљрЃЏ рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃарЃБрЃџрЃцрЃљрЃАрЃЮрЃЋрЃљрЃюрЃў рЃбрЃћрЃАрЃбрЃўрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА, рЃЕрЃЋрЃћрЃю рЃЋрЃўрЃДрЃћрЃюрЃћрЃЉрЃЌ `sensor_simulator` рЃЏрЃЮрЃЊрЃБрЃџрЃА, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃърЃћрЃарЃўрЃЮрЃЊрЃБрЃџрЃљрЃЊ рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА рЃАрЃћрЃюрЃАрЃЮрЃарЃћрЃЉрЃўрЃА рЃўрЃЏрЃўрЃбрЃўрЃарЃћрЃЉрЃБрЃџ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃА.

1. **`sensor_simulator`-рЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ:** рЃЊрЃљрЃарЃгрЃЏрЃБрЃюрЃЊрЃўрЃЌ, рЃарЃЮрЃЏ `sensor_simulator` рЃЕрЃљрЃарЃЌрЃБрЃџрЃўрЃљ `system_config.json`-рЃерЃў.
2. **`sensor_aggregator`-рЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ:** рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЌ рЃќрЃћрЃЏрЃЮрЃЌ рЃЏрЃЮрЃфрЃћрЃЏрЃБрЃџрЃў рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў, рЃАрЃљрЃЊрЃљрЃф рЃбрЃћрЃЏрЃърЃћрЃарЃљрЃбрЃБрЃарЃўрЃАрЃЌрЃЋрЃўрЃА рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃБрЃџрЃўрЃљ `"avg"` рЃарЃћрЃЪрЃўрЃЏрЃў.
3. **`mqtt_manager`-рЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ:** рЃЊрЃљрЃарЃгрЃЏрЃБрЃюрЃЊрЃўрЃЌ, рЃарЃЮрЃЏ `mqtt_manager` рЃБрЃАрЃЏрЃћрЃюрЃА `FMW_EVENT_AGGREGATED_SENSOR_REPORT` рЃўрЃЋрЃћрЃюрЃЌрЃА рЃЊрЃљ рЃљрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃА рЃЏрЃљрЃА рЃерЃћрЃАрЃљрЃЉрЃљрЃЏрЃўрЃА рЃЌрЃћрЃЏрЃљрЃќрЃћ.
4. **рЃерЃћрЃЊрЃћрЃњрЃўрЃА рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў:**
    - **рЃАрЃћрЃарЃўрЃБрЃџ рЃърЃЮрЃарЃбрЃерЃў:** `idf.py monitor`-рЃўрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃўрЃЌ рЃЊрЃљрЃўрЃюрЃљрЃ«рЃљрЃЋрЃЌ рЃџрЃЮрЃњрЃћрЃЉрЃА, рЃАрЃљрЃЊрЃљрЃф `SENSOR_AGGR` рЃбрЃћрЃњрЃўрЃЌ рЃЊрЃљрЃўрЃЉрЃћрЃГрЃЊрЃћрЃЉрЃљ рЃњрЃћрЃюрЃћрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃў JSON.
    - **MQTT рЃЎрЃџрЃўрЃћрЃюрЃбрЃерЃў:** рЃњрЃљрЃЏрЃЮрЃўрЃгрЃћрЃарЃћрЃЌ рЃЌрЃћрЃЏрЃљ `synapse/devices/{your_device_id}/data/sensors/aggregated`. рЃДрЃЮрЃЋрЃћрЃџ 60 рЃгрЃљрЃЏрЃерЃў рЃЌрЃЦрЃЋрЃћрЃю рЃЏрЃўрЃўрЃдрЃћрЃЉрЃЌ рЃћрЃарЃЌрЃўрЃљрЃю JSON рЃарЃћрЃърЃЮрЃарЃбрЃА, рЃАрЃљрЃЊрЃљрЃф `temperature` рЃЋрЃћрЃџрЃў рЃўрЃЦрЃюрЃћрЃЉрЃљ рЃЊрЃарЃЮрЃўрЃА рЃцрЃљрЃюрЃ»рЃљрЃарЃљрЃерЃў рЃЏрЃўрЃдрЃћрЃЉрЃБрЃџрЃў рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃћрЃЉрЃўрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃЮ рЃљрЃарЃўрЃЌрЃЏрЃћрЃбрЃўрЃЎрЃБрЃџрЃў.

## 6. ­Ъџђ рЃАрЃљрЃЏрЃЮрЃЏрЃљрЃЋрЃџрЃЮ рЃњрЃљрЃюрЃЋрЃўрЃЌрЃљрЃарЃћрЃЉрЃўрЃА рЃърЃћрЃарЃАрЃърЃћрЃЦрЃбрЃўрЃЋрЃћрЃЉрЃў

рЃљрЃЏ рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА "рЃГрЃЎрЃЋрЃўрЃљрЃюрЃў" рЃцрЃБрЃюрЃЦрЃфрЃўрЃЮрЃюрЃљрЃџрЃў рЃЦрЃЏрЃюрЃўрЃА рЃЏрЃДрЃљрЃа рЃАрЃљрЃцрЃБрЃФрЃЋрЃћрЃџрЃА. рЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃерЃў, рЃЏрЃўрЃАрЃў рЃерЃћрЃАрЃљрЃФрЃџрЃћрЃЉрЃџрЃЮрЃЉрЃћрЃЉрЃў рЃерЃћрЃўрЃФрЃџрЃћрЃЉрЃљ рЃЎрЃўрЃЊрЃћрЃЋ рЃБрЃцрЃарЃЮ рЃњрЃљрЃцрЃљрЃарЃЌрЃЮрЃЋрЃЊрЃћрЃА:

- **­Ъћё рЃЎрЃЮрЃЏрЃърЃџрЃћрЃЦрЃАрЃБрЃарЃў рЃбрЃарЃўрЃњрЃћрЃарЃћрЃЉрЃў:** рЃарЃћрЃърЃЮрЃарЃбрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЦрЃЋрЃћрЃДрЃюрЃћрЃЉрЃљ рЃљрЃарЃљ рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃЊрЃарЃЮрЃўрЃЌ рЃљрЃю рЃћрЃарЃЌрЃў рЃўрЃЋрЃћрЃюрЃЌрЃўрЃЌ, рЃљрЃарЃљрЃЏрЃћрЃЊ рЃарЃљрЃЏрЃЊрЃћрЃюрЃўрЃЏрЃћ рЃўрЃЋрЃћрЃюрЃЌрЃўрЃА рЃЎрЃЮрЃЏрЃЉрЃўрЃюрЃљрЃфрЃўрЃўрЃЌ (`AND`/`OR` рЃџрЃЮрЃњрЃўрЃЎрЃљ) рЃљрЃю рЃАрЃћрЃюрЃАрЃЮрЃарЃўрЃА рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃўрЃА рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃў рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃўрЃАрЃљрЃА.
- **­ЪДЕ рЃЋрЃўрЃарЃбрЃБрЃљрЃџрЃБрЃарЃў рЃАрЃћрЃюрЃАрЃЮрЃарЃћрЃЉрЃў:** рЃарЃљрЃЏрЃЊрЃћрЃюрЃўрЃЏрЃћ рЃцрЃўрЃќрЃўрЃЎрЃБрЃарЃў рЃАрЃћрЃюрЃАрЃЮрЃарЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃАрЃљрЃцрЃБрЃФрЃЋрЃћрЃџрЃќрЃћ рЃљрЃ«рЃљрЃџрЃў, рЃЋрЃўрЃарЃбрЃБрЃљрЃџрЃБрЃарЃў рЃЏрЃћрЃбрЃарЃўрЃЎрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃљ (рЃЏрЃљрЃњ., "рЃюрЃљрЃЏрЃўрЃА рЃгрЃћрЃарЃбрЃўрЃџрЃў").
- **­ЪњЙ рЃЉрЃБрЃцрЃћрЃарЃўрЃќрЃљрЃфрЃўрЃљ:** рЃЦрЃАрЃћрЃџрЃБрЃарЃў рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃљрЃарЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃўрЃАрЃљрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃЊрЃарЃЮрЃћрЃЉрЃўрЃЌ рЃерЃћрЃюрЃљрЃ«рЃЋрЃљ рЃЊрЃљ рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃА рЃљрЃдрЃЊрЃњрЃћрЃюрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ рЃћрЃарЃЌрЃўрЃљрЃюрЃљрЃЊ рЃњрЃљрЃњрЃќрЃљрЃЋрЃюрЃљ.
- **­Ъцќ AI/ML рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃљ:** рЃерЃћрЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃў рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃюрЃљрЃЎрЃљрЃЊрЃўрЃА рЃљрЃюрЃљрЃџрЃўрЃќрЃў рЃљрЃюрЃЮрЃЏрЃљрЃџрЃўрЃћрЃЉрЃўрЃА рЃљрЃдрЃЏрЃЮрЃАрЃљрЃЕрЃћрЃюрЃљрЃЊ.
- **­ЪјЏ№ИЈ рЃЊрЃўрЃюрЃљрЃЏрЃўрЃБрЃарЃў рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ:** рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃўрЃА рЃгрЃћрЃАрЃћрЃЉрЃўрЃА рЃерЃћрЃфрЃЋрЃџрЃљ рЃЊрЃўрЃАрЃбрЃљрЃюрЃфрЃўрЃБрЃарЃљрЃЊ, MQTT рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃўрЃА рЃЏрЃћрЃерЃЋрЃћрЃЮрЃЉрЃўрЃЌ.

рЃћрЃА рЃерЃћрЃАрЃљрЃФрЃџрЃћрЃЉрЃџрЃЮрЃЉрЃћрЃЉрЃў `Sensor Aggregator`-рЃА рЃљрЃЦрЃфрЃћрЃЋрЃА рЃБрЃЉрЃарЃљрЃџрЃЮ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃЌрЃљ рЃерЃћрЃЏрЃњрЃарЃЮрЃЋрЃћрЃЉрЃџрЃўрЃЊрЃљрЃю **Edge Computing-рЃўрЃА рЃЏрЃФрЃџрЃљрЃЋрЃа рЃЎрЃЋрЃљрЃюрЃФрЃљрЃЊ**.
