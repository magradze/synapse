# áƒ›áƒáƒ“áƒ£áƒšáƒ˜ `rgb_led_indicator`

## 1. áƒ›áƒ˜áƒ›áƒáƒ®áƒ˜áƒšáƒ•áƒ

**áƒ›áƒáƒ“áƒ£áƒšáƒ˜áƒ¡ áƒ¡áƒáƒ®áƒ”áƒšáƒ˜:** `rgb_led_indicator`  
**áƒ™áƒáƒ¢áƒ”áƒ’áƒáƒ áƒ˜áƒ:** `displays`  
**áƒ•áƒ”áƒ áƒ¡áƒ˜áƒ:** 1.0.0  
**áƒáƒ•áƒ¢áƒáƒ áƒ˜:** áƒ’áƒ˜áƒáƒ áƒ’áƒ˜ áƒ›áƒáƒ’áƒ áƒáƒ«áƒ” & Synapse AI Assistant

`rgb_led_indicator` áƒ›áƒáƒ“áƒ£áƒšáƒ˜ áƒ£áƒ–áƒ áƒ£áƒœáƒ•áƒ”áƒšáƒ§áƒáƒ¤áƒ¡ áƒ£áƒœáƒ˜áƒ•áƒ”áƒ áƒ¡áƒáƒšáƒ£áƒ , áƒ›áƒáƒ¦áƒáƒšáƒ˜ áƒ“áƒáƒœáƒ˜áƒ¡ áƒ˜áƒœáƒ¢áƒ”áƒ áƒ¤áƒ”áƒ˜áƒ¡áƒ¡ RGB LED áƒ˜áƒœáƒ“áƒ˜áƒ™áƒáƒ¢áƒáƒ áƒ˜áƒ¡ áƒ¡áƒáƒ›áƒáƒ áƒ—áƒáƒ•áƒáƒ“. áƒ˜áƒ¡ áƒ¨áƒ”áƒ¥áƒ›áƒœáƒ˜áƒšáƒ˜áƒ áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ˜áƒ¡ áƒ¡áƒ¢áƒáƒ¢áƒ£áƒ¡áƒ˜áƒ¡ áƒ˜áƒœáƒ“áƒ˜áƒ™áƒáƒ¢áƒáƒ áƒ˜áƒ¡ áƒ áƒáƒšáƒ˜áƒ¡ áƒ¨áƒ”áƒ¡áƒáƒ¡áƒ áƒ£áƒšáƒ”áƒ‘áƒšáƒáƒ“, áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒáƒ•áƒ¢áƒáƒœáƒáƒ›áƒ˜áƒ£áƒ áƒáƒ“ áƒ áƒ”áƒáƒ’áƒ˜áƒ áƒ”áƒ‘áƒ¡ áƒ¤áƒ áƒ”áƒ˜áƒ›áƒ•áƒáƒ áƒ¥áƒ˜áƒ¡ áƒ™áƒ áƒ˜áƒ¢áƒ˜áƒ™áƒ£áƒš áƒ˜áƒ•áƒ”áƒœáƒ—áƒ”áƒ‘áƒ–áƒ” áƒ“áƒ, áƒáƒ›áƒáƒ•áƒ“áƒ áƒáƒ£áƒšáƒáƒ“, áƒáƒ¬áƒ•áƒ“áƒ˜áƒ¡ áƒ¡áƒ”áƒ áƒ•áƒ˜áƒ¡áƒ˜áƒ¡ API-áƒ¡ áƒ¡áƒ®áƒ•áƒ áƒ›áƒáƒ“áƒ£áƒšáƒ”áƒ‘áƒ¡, áƒ áƒáƒ—áƒ áƒ›áƒáƒ— áƒ›áƒáƒ˜áƒ—áƒ®áƒáƒ•áƒáƒœ áƒ¡áƒžáƒ”áƒªáƒ˜áƒ¤áƒ˜áƒ™áƒ£áƒ áƒ˜ áƒ•áƒ˜áƒ–áƒ£áƒáƒšáƒ£áƒ áƒ˜ áƒ¨áƒ”áƒ¢áƒ§áƒáƒ‘áƒ˜áƒœáƒ”áƒ‘áƒ”áƒ‘áƒ˜.

áƒ›áƒáƒ“áƒ£áƒšáƒ¡ áƒáƒ¥áƒ•áƒ¡ áƒ¡áƒ¢áƒáƒ¢áƒ˜áƒ™áƒ£áƒ áƒ˜ áƒ¤áƒ”áƒ áƒ”áƒ‘áƒ˜áƒ¡, áƒªáƒ˜áƒ›áƒªáƒ˜áƒ›áƒ˜áƒ¡ áƒ“áƒ áƒžáƒ£áƒšáƒ¡áƒáƒªáƒ˜áƒ˜áƒ¡ áƒ”áƒ¤áƒ”áƒ¥áƒ¢áƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒ®áƒáƒ áƒ“áƒáƒ­áƒ”áƒ áƒ, áƒ áƒáƒ›áƒšáƒ”áƒ‘áƒ˜áƒª áƒ˜áƒ›áƒáƒ áƒ—áƒ”áƒ‘áƒ áƒªáƒáƒšáƒ™áƒ” FreeRTOS áƒ¢áƒáƒ¡áƒ™áƒ˜áƒ¡ áƒ¡áƒáƒ¨áƒ£áƒáƒšáƒ”áƒ‘áƒ˜áƒ—, áƒ áƒáƒ—áƒ áƒ£áƒ–áƒ áƒ£áƒœáƒ•áƒ”áƒšáƒ§áƒáƒ¤áƒ˜áƒšáƒ˜ áƒ˜áƒ§áƒáƒ¡ áƒáƒžáƒ”áƒ áƒáƒªáƒ˜áƒ”áƒ‘áƒ˜áƒ¡ áƒáƒ áƒáƒ‘áƒšáƒáƒ™áƒ˜áƒ áƒ”áƒ‘áƒáƒ“áƒ˜, áƒáƒ¡áƒ˜áƒœáƒ¥áƒ áƒáƒœáƒ£áƒšáƒ˜ áƒ¨áƒ”áƒ¡áƒ áƒ£áƒšáƒ”áƒ‘áƒ.

## 2. áƒáƒ áƒ¥áƒ˜áƒ¢áƒ”áƒ¥áƒ¢áƒ£áƒ áƒ£áƒšáƒ˜ áƒžáƒ áƒ˜áƒœáƒªáƒ˜áƒžáƒ”áƒ‘áƒ˜

- **áƒ°áƒ˜áƒ‘áƒ áƒ˜áƒ“áƒ£áƒšáƒ˜ áƒ™áƒáƒ›áƒ£áƒœáƒ˜áƒ™áƒáƒªáƒ˜áƒ:** áƒ›áƒáƒ“áƒ£áƒšáƒ˜ áƒ”áƒ áƒ—áƒ“áƒ áƒáƒ£áƒšáƒáƒ“ áƒáƒ áƒ˜áƒ¡ **Service-driven** áƒ“áƒ **Event-driven**.
  - áƒ˜áƒ¡ **áƒáƒ¬áƒ•áƒ“áƒ˜áƒ¡ áƒ¡áƒ”áƒ áƒ•áƒ˜áƒ¡áƒ¡** (`rgb_led_api`) `Service Locator`-áƒ˜áƒ¡ áƒ›áƒ”áƒ¨áƒ•áƒ”áƒáƒ‘áƒ˜áƒ— áƒ¡áƒ®áƒ•áƒ áƒ›áƒáƒ“áƒ£áƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒ˜áƒ”áƒ  áƒžáƒ˜áƒ áƒ“áƒáƒžáƒ˜áƒ áƒ˜ áƒ›áƒáƒ áƒ—áƒ•áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ (áƒ›áƒáƒ’., OTA áƒ’áƒáƒœáƒáƒ®áƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒžáƒ áƒáƒªáƒ”áƒ¡áƒ˜, áƒ›áƒáƒ›áƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒšáƒ˜áƒ¡ áƒšáƒáƒ’áƒ˜áƒ™áƒ).
  - áƒ˜áƒ¡ **áƒ’áƒáƒ›áƒáƒ˜áƒ¬áƒ”áƒ áƒ¡ áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ£áƒ  áƒ˜áƒ•áƒ”áƒœáƒ—áƒ”áƒ‘áƒ¡** `Event Bus`-áƒ–áƒ”, áƒ áƒáƒ—áƒ áƒáƒ¡áƒáƒ®áƒáƒ¡ áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ˜áƒ¡ áƒ–áƒáƒ’áƒáƒ“áƒ˜ áƒ›áƒ“áƒ’áƒáƒ›áƒáƒ áƒ”áƒáƒ‘áƒ (áƒ›áƒáƒ’., Wi-Fi/Provisioning áƒ¡áƒ¢áƒáƒ¢áƒ£áƒ¡áƒ˜).
- **áƒ áƒ”áƒ¡áƒ£áƒ áƒ¡áƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒáƒ áƒ—áƒ•áƒ:** áƒ›áƒáƒ“áƒ£áƒšáƒ˜ áƒ˜áƒ§áƒ”áƒœáƒ”áƒ‘áƒ¡ `Resource Manager`-áƒ¡ áƒ¡áƒáƒ­áƒ˜áƒ áƒ GPIO áƒžáƒ˜áƒœáƒ”áƒ‘áƒ˜áƒ¡ áƒ“áƒáƒ¡áƒáƒšáƒáƒ¥áƒáƒ“, áƒ áƒáƒ—áƒ áƒ—áƒáƒ•áƒ˜áƒ“áƒáƒœ áƒáƒ˜áƒªáƒ˜áƒšáƒáƒ¡ áƒ™áƒáƒœáƒ¤áƒšáƒ˜áƒ¥áƒ¢áƒ”áƒ‘áƒ˜.
- **áƒáƒ¡áƒ˜áƒœáƒ¥áƒ áƒáƒœáƒ£áƒšáƒ˜ áƒáƒžáƒ”áƒ áƒáƒªáƒ˜áƒ”áƒ‘áƒ˜:** LED áƒ”áƒ¤áƒ”áƒ¥áƒ¢áƒ”áƒ‘áƒ˜ (áƒªáƒ˜áƒ›áƒªáƒ˜áƒ›áƒ˜, áƒžáƒ£áƒšáƒ¡áƒáƒªáƒ˜áƒ) áƒ˜áƒ›áƒáƒ áƒ—áƒ”áƒ‘áƒ áƒ’áƒáƒ›áƒáƒ§áƒáƒ¤áƒ˜áƒšáƒ˜ áƒ¢áƒáƒ¡áƒ™áƒ˜áƒ¡ áƒ›áƒ˜áƒ”áƒ , áƒ áƒáƒª áƒ£áƒ–áƒ áƒ£áƒœáƒ•áƒ”áƒšáƒ§áƒáƒ¤áƒ¡, áƒ áƒáƒ› API áƒ’áƒáƒ›áƒáƒ«áƒáƒ®áƒ”áƒ‘áƒ”áƒ‘áƒ˜ áƒáƒ  áƒ˜áƒ§áƒáƒ¡ áƒ›áƒ‘áƒšáƒáƒ™áƒáƒ•áƒ˜.
- **áƒžáƒ áƒ˜áƒáƒ áƒ˜áƒ¢áƒ”áƒ¢áƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ:** áƒ›áƒáƒ áƒ¢áƒ˜áƒ•áƒ˜ áƒžáƒ áƒ˜áƒáƒ áƒ˜áƒ¢áƒ”áƒ¢áƒ£áƒšáƒ˜ áƒ›áƒ”áƒ¥áƒáƒœáƒ˜áƒ–áƒ›áƒ˜ áƒ›áƒáƒ áƒ—áƒáƒ•áƒ¡ áƒ™áƒáƒœáƒ¤áƒšáƒ˜áƒ¥áƒ¢áƒ¡ "áƒ›áƒ”áƒ¥áƒáƒœáƒ˜áƒ™áƒ£áƒ " áƒ›áƒáƒ áƒ—áƒ•áƒáƒ¡áƒ áƒ“áƒ áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ˜áƒ¡ áƒ¡áƒ¢áƒáƒ¢áƒ£áƒ¡áƒ˜áƒ¡ áƒáƒ•áƒ¢áƒáƒ›áƒáƒ¢áƒ£áƒ  áƒ©áƒ•áƒ”áƒœáƒ”áƒ‘áƒáƒ¡ áƒ¨áƒáƒ áƒ˜áƒ¡. áƒ›áƒ”áƒ¥áƒáƒœáƒ˜áƒ™áƒ£áƒ  áƒ›áƒáƒ áƒ—áƒ•áƒáƒ¡ (Service API-áƒ¡ áƒ’áƒáƒ›áƒáƒ«áƒáƒ®áƒ”áƒ‘áƒ˜áƒ—) áƒ§áƒáƒ•áƒ”áƒšáƒ—áƒ•áƒ˜áƒ¡ áƒ£áƒ›áƒáƒ¦áƒšáƒ”áƒ¡áƒ˜ áƒžáƒ áƒ˜áƒáƒ áƒ˜áƒ¢áƒ”áƒ¢áƒ˜ áƒáƒ¥áƒ•áƒ¡.

## 3. áƒ™áƒáƒœáƒ¤áƒ˜áƒ’áƒ£áƒ áƒáƒªáƒ˜áƒ

áƒ›áƒáƒ“áƒ£áƒšáƒ˜áƒ¡ áƒ™áƒáƒœáƒ¤áƒ˜áƒ’áƒ£áƒ áƒáƒªáƒ˜áƒ áƒ®áƒ“áƒ”áƒ‘áƒ `system_config.json` áƒ¤áƒáƒ˜áƒšáƒ˜áƒ¡ áƒ¡áƒáƒ¨áƒ£áƒáƒšáƒ”áƒ‘áƒ˜áƒ—.

**áƒ™áƒáƒœáƒ¤áƒ˜áƒ’áƒ£áƒ áƒáƒªáƒ˜áƒ˜áƒ¡ áƒ›áƒáƒ’áƒáƒšáƒ˜áƒ—áƒ˜:**

```json
{
    "type": "rgb_led_indicator",
    "enabled": true,
    "config": {
        "instance_name": "status_led",
        "red_pin": 25,
        "green_pin": 26,
        "blue_pin": 27,
        "is_common_anode": false
    }
}
```

**áƒ™áƒáƒœáƒ¤áƒ˜áƒ’áƒ£áƒ áƒáƒªáƒ˜áƒ˜áƒ¡ áƒžáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ”áƒ‘áƒ˜:**

| áƒžáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ˜ | áƒ¢áƒ˜áƒžáƒ˜ | áƒáƒ¦áƒ¬áƒ”áƒ áƒ | áƒ¡áƒáƒ•áƒáƒšáƒ“áƒ”áƒ‘áƒ£áƒšáƒ | Default |
|:---|:---|:---|:---:|:---|
| `instance_name` | áƒ¡áƒ¢áƒ áƒ˜áƒ¥áƒáƒœáƒ˜ | áƒ›áƒáƒ“áƒ£áƒšáƒ˜áƒ¡ áƒ˜áƒœáƒ¡áƒ¢áƒáƒœáƒªáƒ˜áƒ˜áƒ¡ áƒ£áƒœáƒ˜áƒ™áƒáƒšáƒ£áƒ áƒ˜ áƒ¡áƒáƒ®áƒ”áƒšáƒ˜. | âœ… | `main_rgb_led`|
| `red_pin` | áƒ áƒ˜áƒªáƒ®áƒ•áƒ˜ | RED áƒáƒ áƒ®áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒ’áƒáƒœáƒ™áƒ£áƒ—áƒ•áƒœáƒ˜áƒšáƒ˜ GPIO áƒžáƒ˜áƒœáƒ˜. | âœ… | - |
| `green_pin` | áƒ áƒ˜áƒªáƒ®áƒ•áƒ˜ | GREEN áƒáƒ áƒ®áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒ’áƒáƒœáƒ™áƒ£áƒ—áƒ•áƒœáƒ˜áƒšáƒ˜ GPIO áƒžáƒ˜áƒœáƒ˜. | âœ… | - |
| `blue_pin` | áƒ áƒ˜áƒªáƒ®áƒ•áƒ˜ | BLUE áƒáƒ áƒ®áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒ’áƒáƒœáƒ™áƒ£áƒ—áƒ•áƒœáƒ˜áƒšáƒ˜ GPIO áƒžáƒ˜áƒœáƒ˜. | âœ… | - |
| `is_common_anode` | boolean | `true`, áƒ—áƒ£ áƒ’áƒáƒ›áƒáƒ˜áƒ§áƒ”áƒœáƒ”áƒ‘áƒ áƒ¡áƒáƒ”áƒ áƒ—áƒ áƒáƒœáƒáƒ“áƒ˜áƒ¡ áƒ›áƒ¥áƒáƒœáƒ” RGB LED. | âŒ | `false` |

## 4. Service API (`rgb_led_api_t`)

áƒ›áƒáƒ“áƒ£áƒšáƒ˜ áƒáƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒ˜áƒ áƒ”áƒ‘áƒ¡ áƒ¡áƒ”áƒ áƒ•áƒ˜áƒ¡áƒ¡, áƒ áƒáƒ›áƒšáƒ˜áƒ¡ áƒ¢áƒ˜áƒžáƒ˜ áƒ¨áƒ”áƒ˜áƒ«áƒšáƒ”áƒ‘áƒ áƒ˜áƒ§áƒáƒ¡ `FMW_SERVICE_TYPE_GENERIC_API` áƒáƒœ áƒáƒ®áƒšáƒáƒ“ áƒ’áƒáƒœáƒ¡áƒáƒ–áƒ¦áƒ•áƒ áƒ£áƒšáƒ˜ `FMW_SERVICE_TYPE_RGB_LED_API`.

**API áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ”áƒ‘áƒ˜:**

- **`esp_err_t set_color(uint8_t r, uint8_t g, uint8_t b);`**  
  áƒáƒ§áƒ”áƒœáƒ”áƒ‘áƒ¡ áƒ¡áƒ¢áƒáƒ¢áƒ˜áƒ™áƒ£áƒ  áƒ¤áƒ”áƒ áƒ¡. áƒ”áƒ¡ áƒ›áƒáƒ¥áƒ›áƒ”áƒ“áƒ”áƒ‘áƒ áƒ’áƒáƒ“áƒáƒ¤áƒáƒ áƒáƒ•áƒ¡ áƒœáƒ”áƒ‘áƒ˜áƒ¡áƒ›áƒ˜áƒ”áƒ  áƒáƒ¥áƒ¢áƒ˜áƒ£áƒ  áƒ”áƒ¤áƒ”áƒ¥áƒ¢áƒ¡ áƒáƒœ áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ£áƒ áƒ˜ áƒ¡áƒ¢áƒáƒ¢áƒ£áƒ¡áƒ˜áƒ¡ áƒ¤áƒ”áƒ áƒ¡.

- **`esp_err_t start_blink(uint8_t r, uint8_t g, uint8_t b, uint32_t interval_ms);`**  
  áƒ˜áƒ¬áƒ§áƒ”áƒ‘áƒ¡ áƒªáƒ˜áƒ›áƒªáƒ˜áƒ›áƒ¡ áƒ›áƒ˜áƒ—áƒ˜áƒ—áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ¤áƒ”áƒ áƒ˜áƒ—áƒ áƒ“áƒ áƒ˜áƒœáƒ¢áƒ”áƒ áƒ•áƒáƒšáƒ˜áƒ—.

- **`esp_err_t start_pulse(uint8_t r, uint8_t g, uint8_t b, uint32_t period_ms);`**  
  áƒ˜áƒ¬áƒ§áƒ”áƒ‘áƒ¡ "áƒžáƒ£áƒšáƒ¡áƒáƒªáƒ˜áƒ˜áƒ¡" áƒ”áƒ¤áƒ”áƒ¥áƒ¢áƒ¡ (áƒ¡áƒ˜áƒ™áƒáƒ¨áƒ™áƒáƒ¨áƒ˜áƒ¡ áƒ’áƒšáƒ£áƒ•áƒ˜ áƒªáƒ•áƒšáƒ˜áƒšáƒ”áƒ‘áƒ) áƒ›áƒ˜áƒ—áƒ˜áƒ—áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ¤áƒ”áƒ áƒ˜áƒ—áƒ áƒ“áƒ áƒžáƒ”áƒ áƒ˜áƒáƒ“áƒ˜áƒ—.

- **`esp_err_t turn_off();`**  
  áƒ—áƒ˜áƒ¨áƒáƒ•áƒ¡ LED áƒ˜áƒœáƒ“áƒ˜áƒ™áƒáƒ¢áƒáƒ áƒ¡. áƒ”áƒ™áƒ•áƒ˜áƒ•áƒáƒšáƒ”áƒœáƒ¢áƒ£áƒ áƒ˜áƒ `set_color(0, 0, 0)`-áƒ˜áƒ¡.

- **`esp_err_t release_control();`**  
  áƒáƒ—áƒáƒ•áƒ˜áƒ¡áƒ£áƒ¤áƒšáƒ”áƒ‘áƒ¡ "áƒ›áƒ”áƒ¥áƒáƒœáƒ˜áƒ™áƒ£áƒ " áƒ›áƒáƒ áƒ—áƒ•áƒáƒ¡ áƒ“áƒ áƒáƒ‘áƒ áƒ£áƒœáƒ”áƒ‘áƒ¡ áƒ˜áƒœáƒ“áƒ˜áƒ™áƒáƒ¢áƒáƒ áƒ¡ áƒ›áƒ˜áƒ¡ áƒáƒ•áƒ¢áƒáƒ›áƒáƒ¢áƒ£áƒ , áƒ˜áƒ•áƒ”áƒœáƒ—áƒ”áƒ‘áƒ–áƒ” áƒ“áƒáƒ›áƒáƒ™áƒ˜áƒ“áƒ”áƒ‘áƒ£áƒš áƒ áƒ”áƒŸáƒ˜áƒ›áƒ¨áƒ˜.

## 5. áƒ˜áƒ•áƒ”áƒœáƒ—áƒ”áƒ‘áƒ˜áƒ¡ áƒ“áƒáƒ›áƒ£áƒ¨áƒáƒ•áƒ”áƒ‘áƒ

áƒ›áƒáƒ“áƒ£áƒšáƒ˜ áƒ’áƒáƒ›áƒáƒ˜áƒ¬áƒ”áƒ áƒ¡ áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’ áƒ˜áƒ•áƒ”áƒœáƒ—áƒ”áƒ‘áƒ¡ áƒ¡áƒ¢áƒáƒ¢áƒ£áƒ¡áƒ˜áƒ¡ áƒáƒ•áƒ¢áƒáƒ›áƒáƒ¢áƒ£áƒ áƒáƒ“ áƒ¡áƒáƒ©áƒ•áƒ”áƒœáƒ”áƒ‘áƒšáƒáƒ“:

| áƒ˜áƒ•áƒ”áƒœáƒ—áƒ˜áƒ¡ áƒ¡áƒáƒ®áƒ”áƒšáƒ˜ | LED-áƒ˜áƒ¡ áƒ¥áƒªáƒ”áƒ•áƒ | áƒžáƒ áƒ˜áƒáƒ áƒ˜áƒ¢áƒ”áƒ¢áƒ˜ |
|:---|:---|:---:|
| `WIFI_EVENT_STA_START` | áƒ£áƒ¬áƒ§áƒ•áƒ”áƒ¢áƒ˜ **áƒ¬áƒ˜áƒ—áƒ”áƒšáƒ˜** áƒ¤áƒ”áƒ áƒ˜ | áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ£áƒ áƒ˜ |
| `PROV_START` | áƒ£áƒ¬áƒ§áƒ•áƒ”áƒ¢áƒ˜ **áƒ§áƒ•áƒ˜áƒ—áƒ”áƒšáƒ˜** (áƒ¥áƒáƒ áƒ•áƒ˜áƒ¡áƒ¤áƒ”áƒ áƒ˜) | áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ£áƒ áƒ˜ |
| `WIFI_EVENT_STA_CONNECTED` | **áƒ›áƒ¬áƒ•áƒáƒœáƒ”áƒ“** áƒáƒªáƒ˜áƒ›áƒªáƒ˜áƒ›áƒ”áƒ‘áƒ 3-áƒ¯áƒ”áƒ , áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’ áƒ’áƒáƒ—áƒ˜áƒ¨áƒ•áƒ | áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ£áƒ áƒ˜ |
| `WIFI_EVENT_STA_DISCONNECTED` | áƒ£áƒ¬áƒ§áƒ•áƒ”áƒ¢áƒ˜ **áƒ¬áƒ˜áƒ—áƒ”áƒšáƒ˜** áƒ¤áƒ”áƒ áƒ˜ | áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ£áƒ áƒ˜ |
| (áƒœáƒ”áƒ‘áƒ˜áƒ¡áƒ›áƒ˜áƒ”áƒ áƒ˜ Service API áƒ’áƒáƒ›áƒáƒ«áƒáƒ®áƒ”áƒ‘áƒ) | API áƒ’áƒáƒ›áƒáƒ«áƒáƒ®áƒ”áƒ‘áƒ˜áƒ¡ áƒ¨áƒ”áƒ¡áƒáƒ‘áƒáƒ›áƒ˜áƒ¡áƒáƒ“ | áƒ›áƒ”áƒ¥áƒáƒœáƒ˜áƒ™áƒ£áƒ áƒ˜ |

## 6. áƒ¢áƒ”áƒ¥áƒœáƒ˜áƒ™áƒ£áƒ áƒ˜ áƒ˜áƒ›áƒžáƒšáƒ”áƒ›áƒ”áƒœáƒ¢áƒáƒªáƒ˜áƒ˜áƒ¡ áƒ“áƒ”áƒ¢áƒáƒšáƒ”áƒ‘áƒ˜

- **áƒ“áƒ áƒáƒ˜áƒ•áƒ”áƒ áƒ˜:** áƒ’áƒáƒ›áƒáƒ˜áƒ§áƒ”áƒœáƒ”áƒ‘áƒ ESP-IDF-áƒ˜áƒ¡ `ledc` (LED Control) áƒžáƒ”áƒ áƒ˜áƒ¤áƒ”áƒ áƒ˜áƒ, áƒ¤áƒ”áƒ áƒ˜áƒ¡áƒ áƒ“áƒ áƒ¡áƒ˜áƒ™áƒáƒ¨áƒ™áƒáƒ¨áƒ˜áƒ¡ áƒ–áƒ£áƒ¡áƒ¢áƒ˜, PWM-áƒ–áƒ” áƒ“áƒáƒ¤áƒ£áƒ«áƒœáƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ›áƒáƒ áƒ—áƒ•áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡.
- **áƒ¢áƒáƒ¡áƒ™áƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒáƒ áƒ—áƒ•áƒ:** áƒ’áƒáƒ›áƒáƒ§áƒáƒ¤áƒ˜áƒšáƒ˜ FreeRTOS áƒ¢áƒáƒ¡áƒ™áƒ˜ (`rgb_led_task`) áƒ›áƒáƒ áƒ—áƒáƒ•áƒ¡ LED-áƒ˜áƒ¡ áƒ›áƒ“áƒ’áƒáƒ›áƒáƒ áƒ”áƒáƒ‘áƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒáƒœáƒ¥áƒáƒœáƒáƒ¡ áƒ“áƒ áƒ”áƒ¤áƒ”áƒ¥áƒ¢áƒ”áƒ‘áƒ¡.
- **áƒ¡áƒ˜áƒœáƒ¥áƒ áƒáƒœáƒ˜áƒ–áƒáƒªáƒ˜áƒ:** áƒ’áƒáƒ›áƒáƒ˜áƒ§áƒ”áƒœáƒ”áƒ‘áƒ FreeRTOS `Queue` áƒ‘áƒ áƒ«áƒáƒœáƒ”áƒ‘áƒ”áƒ‘áƒ˜áƒ¡ (API áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ”áƒ‘áƒ˜áƒ“áƒáƒœ) `rgb_led_task`-áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒ£áƒ¡áƒáƒ¤áƒ áƒ—áƒ®áƒáƒ“ áƒ’áƒáƒ“áƒáƒ¡áƒáƒªáƒ”áƒ›áƒáƒ“.

## 7. ðŸ’¡ áƒ’áƒáƒ›áƒáƒ§áƒ”áƒœáƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒáƒ’áƒáƒšáƒ˜áƒ—áƒ˜

áƒ¬áƒáƒ áƒ›áƒáƒ•áƒ˜áƒ“áƒ’áƒ˜áƒœáƒáƒ—, áƒ áƒáƒ› `ota_update_module`-áƒ¡ áƒ¡áƒ£áƒ áƒ¡, áƒáƒªáƒœáƒáƒ‘áƒáƒ¡ áƒ›áƒáƒ›áƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒ”áƒšáƒ¡ áƒ’áƒáƒœáƒáƒ®áƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒžáƒ áƒáƒªáƒ”áƒ¡áƒ˜áƒ¡ áƒ¨áƒ”áƒ¡áƒáƒ®áƒ”áƒ‘ `rgb_led_indicator`-áƒ˜áƒ¡ áƒ›áƒ”áƒ¨áƒ•áƒ”áƒáƒ‘áƒ˜áƒ—, áƒ áƒáƒ›áƒšáƒ˜áƒ¡ `instance_name` áƒáƒ áƒ˜áƒ¡ `"status_led"`.

```c
#include "service_locator.h"
#include "rgb_led_indicator_api.h" // áƒžáƒ˜áƒ áƒáƒ‘áƒ˜áƒ—áƒ˜ áƒ°áƒ”áƒ“áƒ”áƒ áƒ˜, áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒáƒ¦áƒ¬áƒ”áƒ áƒ¡ API-áƒ¡

// OTA áƒ›áƒáƒ“áƒ£áƒšáƒ˜áƒ¡ áƒ¨áƒ˜áƒ’áƒœáƒ˜áƒ—...
void start_ota_process() {
    // 1. ðŸš¦ áƒ•áƒ˜áƒ¦áƒ”áƒ‘áƒ— LED áƒ¡áƒ”áƒ áƒ•áƒ˜áƒ¡áƒ¡ Service Locator-áƒ˜áƒ“áƒáƒœ
    service_handle_t led_service_handle = fmw_service_get("status_led");

    if (!led_service_handle) {
        ESP_LOGW(TAG, "RGB LED Indicator service 'status_led' not found.");
        // áƒ’áƒáƒœáƒáƒ’áƒ áƒ«áƒ” áƒ›áƒ£áƒ¨áƒáƒáƒ‘áƒ LED-áƒ˜áƒ¡ áƒ’áƒáƒ áƒ”áƒ¨áƒ”...
        return;
    }

    // 2. ðŸ¤– áƒ•áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ— áƒ¡áƒ”áƒ áƒ•áƒ˜áƒ¡áƒ˜áƒ¡ áƒ¢áƒ˜áƒžáƒ¡ (áƒ£áƒ¡áƒáƒ¤áƒ áƒ—áƒ®áƒáƒ”áƒ‘áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡)
    if (fmw_service_get_type(led_service_handle) != FMW_SERVICE_TYPE_RGB_LED_API) {
        ESP_LOGE(TAG, "Service 'status_led' is not a valid RGB LED API.");
        return;
    }

    // 3.  à¤•à¤¾à¤¸à¥à¤Ÿáƒ˜áƒœáƒ’áƒ˜áƒ— áƒ•áƒ˜áƒ¦áƒ”áƒ‘áƒ— API-áƒ¡
    rgb_led_api_t *led_api = (rgb_led_api_t *)led_service_handle;

    // 4. ðŸ’™ áƒ•áƒ˜áƒ¬áƒ§áƒ”áƒ‘áƒ— "áƒžáƒ£áƒšáƒ¡áƒáƒªáƒ˜áƒ˜áƒ¡" áƒ”áƒ¤áƒ”áƒ¥áƒ¢áƒ¡ áƒšáƒ£áƒ áƒ¯ áƒ¤áƒ”áƒ áƒ¨áƒ˜, áƒ áƒáƒ—áƒ áƒ•áƒáƒ©áƒ•áƒ”áƒœáƒáƒ—, áƒ áƒáƒ› OTA áƒ›áƒ˜áƒ›áƒ“áƒ˜áƒœáƒáƒ áƒ”áƒáƒ‘áƒ¡
    ESP_LOGI(TAG, "Starting OTA update... Setting LED to pulsing blue.");
    led_api->start_pulse(0, 0, 255, 2000); // áƒšáƒ£áƒ áƒ¯áƒ˜, 2 áƒ¬áƒáƒ›áƒ˜áƒ¡ áƒžáƒ”áƒ áƒ˜áƒáƒ“áƒ˜áƒ—

    // ... áƒ›áƒ˜áƒ›áƒ“áƒ˜áƒœáƒáƒ áƒ”áƒáƒ‘áƒ¡ OTA áƒ’áƒáƒœáƒáƒ®áƒšáƒ”áƒ‘áƒ ...

    // 5. âœ… áƒ’áƒáƒœáƒáƒ®áƒšáƒ”áƒ‘áƒ áƒ¬áƒáƒ áƒ›áƒáƒ¢áƒ”áƒ‘áƒ£áƒšáƒ˜áƒ, áƒ•áƒáƒ¢áƒ§áƒáƒ‘áƒ˜áƒœáƒ”áƒ‘áƒ— áƒ›áƒáƒ›áƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒ”áƒšáƒ¡
    ESP_LOGI(TAG, "OTA update successful!");
    led_api->set_color(0, 255, 0); // áƒ•áƒáƒœáƒáƒ—áƒ”áƒ‘áƒ— áƒ›áƒ¬áƒ•áƒáƒœáƒ”áƒ“
    vTaskDelay(pdMS_TO_TICKS(3000)); // 3 áƒ¬áƒáƒ›áƒ˜

    // 6. ðŸ”„ áƒ•áƒáƒ‘áƒ áƒ£áƒœáƒ”áƒ‘áƒ— LED-áƒ¡ áƒ—áƒáƒ•áƒ˜áƒ¡ áƒáƒ•áƒ¢áƒáƒ›áƒáƒ¢áƒ£áƒ  áƒ áƒ”áƒŸáƒ˜áƒ›áƒ¨áƒ˜
    ESP_LOGI(TAG, "Releasing LED control.");
    led_api->release_control();
}