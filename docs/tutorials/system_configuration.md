# рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ (System Configuration)

## ­Ъј» рЃЏрЃўрЃќрЃљрЃюрЃў

рЃћрЃА рЃАрЃљрЃ«рЃћрЃџрЃЏрЃФрЃдрЃЋрЃљрЃюрЃћрЃџрЃЮ рЃЊрЃљрЃњрЃћрЃ«рЃЏрЃљрЃарЃћрЃЉрЃљрЃЌ рЃАрЃгрЃЮрЃарЃљрЃЊ рЃЊрЃљ рЃАрЃбрЃљрЃюрЃЊрЃљрЃарЃбрЃБрЃџрЃљрЃЊ рЃљрЃдрЃгрЃћрЃарЃЮрЃЌ рЃЊрЃљ рЃЏрЃљрЃарЃЌрЃЮрЃЌ рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃЊрЃљ рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ Synapse Framework-рЃерЃў `system_config.json` рЃцрЃљрЃўрЃџрЃўрЃА рЃЏрЃћрЃерЃЋрЃћрЃЮрЃЉрЃўрЃЌ.

---

## 1. `system_config.json`-рЃўрЃА рЃарЃЮрЃџрЃў

- **рЃфрЃћрЃюрЃбрЃарЃљрЃџрЃБрЃарЃў рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ:** рЃћрЃА рЃљрЃарЃўрЃА рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃцрЃљрЃўрЃџрЃў, рЃАрЃљрЃЊрЃљрЃф рЃљрЃдрЃгрЃћрЃарЃўрЃџрЃўрЃљ рЃДрЃЋрЃћрЃџрЃљ рЃЏрЃЮрЃЊрЃБрЃџрЃў, рЃЏрЃљрЃЌрЃў рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў рЃЊрЃљ рЃњрЃџрЃЮрЃЉрЃљрЃџрЃБрЃарЃў рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃћрЃЉрЃў.
- **рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ:** рЃарЃЮрЃњрЃЮрЃарЃф build-рЃўрЃА, рЃљрЃАрЃћрЃЋрЃћ runtime-рЃўрЃА рЃЊрЃарЃЮрЃА, рЃарЃљрЃф рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃДрЃЮрЃцрЃА рЃћрЃарЃЌрЃўрЃљрЃю рЃЊрЃљ рЃАрЃбрЃљрЃЉрЃўрЃџрЃБрЃа рЃњрЃљрЃарЃћрЃЏрЃЮрЃА.

---

## 2. рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ рЃЊрЃљ рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў

```json
{
    "firmware": {
        "version": "1.0.0",
        "description": "My First Synapse Project"
    },
    "global_config": {
        "device.id.prefix": "SYNAPSE_DEVICE"
    },
    "modules": [
        {
            "type": "relay_module",
            "enabled": true,
            "config": {
                "instance_name": "relay1",
                "pin": 23
            }
        },
        {
            "type": "dht22_module",
            "enabled": true,
            "config": {
                "instance_name": "indoor_sensor",
                "pin": 4,
                "update_interval_sec": 30
            }
        }
    ]
}
```

---

## 3. рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ рЃЊрЃљ рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃўрЃА рЃљрЃдрЃгрЃћрЃарЃљ

- рЃЌрЃўрЃЌрЃЮрЃћрЃБрЃџрЃў рЃЏрЃЮрЃЊрЃБрЃџрЃў рЃљрЃдрЃўрЃгрЃћрЃарЃћрЃЉрЃљ `modules` рЃЏрЃљрЃАрЃўрЃЋрЃерЃў, рЃарЃЮрЃњрЃЮрЃарЃф JSON рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў.
- **рЃљрЃБрЃфрЃўрЃџрЃћрЃЉрЃћрЃџрЃў рЃЋрЃћрЃџрЃћрЃЉрЃў:**
  - `type`: рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃбрЃўрЃърЃў (рЃЏрЃљрЃњ., "mqtt_module").
  - `enabled`: `true` рЃљрЃю `false`, рЃарЃЌрЃљрЃЋрЃА рЃљрЃю рЃЌрЃўрЃерЃљрЃЋрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃА.
  - `config`: рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃерЃћрЃўрЃфрЃљрЃЋрЃА рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃърЃћрЃфрЃўрЃцрЃўрЃЎрЃБрЃа рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃА.
  - `instance_name`: `config` рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃўрЃА рЃерЃўрЃњрЃюрЃўрЃЌ рЃљрЃарЃАрЃћрЃЉрЃБрЃџрЃў **рЃБрЃюрЃўрЃЎрЃљрЃџрЃБрЃарЃў** рЃАрЃљрЃ«рЃћрЃџрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃљрЃЏ рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџ рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃА (instance) рЃљрЃдрЃюрЃўрЃерЃюрЃљрЃЋрЃА.

- **рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:**
  ```json
  {
      "type": "mqtt_module",
      "enabled": true,
      "config": {
          "instance_name": "main_broker",
          "broker_uri": "mqtt://192.168.1.100:1883",
          "base_topic": "/synapse/device"
      }
  }
  ```

---

## 4. рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃќрЃћ рЃгрЃЋрЃЊрЃЮрЃЏрЃљ рЃЎрЃЮрЃЊрЃўрЃЊрЃљрЃю (Dot-Notation)

рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃќрЃћ рЃгрЃЋрЃЊрЃЮрЃЏрЃљ рЃ«рЃЊрЃћрЃЉрЃљ `fmw_config_get_*` API рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃўрЃЌ, рЃарЃЮрЃЏрЃџрЃћрЃЉрЃўрЃф рЃўрЃДрЃћрЃюрЃћрЃЉрЃћрЃю **рЃгрЃћрЃарЃбрЃўрЃџрЃўрЃЌ рЃњрЃљрЃЏрЃЮрЃДрЃЮрЃцрЃўрЃџ рЃњрЃљрЃАрЃљрЃдрЃћрЃЉрЃА (dot-notation)**.

- **рЃњрЃџрЃЮрЃЉрЃљрЃџрЃБрЃарЃў рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃўрЃАрЃЌрЃЋрЃўрЃА:**
  `"global_config.parameter_name"`

- **рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃўрЃАрЃЌрЃЋрЃўрЃА:**
  `"module_instance_name.parameter_name"`

- **рЃЏрЃљрЃњрЃљрЃџрЃўрЃбрЃћрЃЉрЃў:**
  ```c
  // рЃњрЃџрЃЮрЃЉрЃљрЃџрЃБрЃарЃў рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃўрЃА рЃгрЃљрЃЎрЃўрЃЌрЃ«рЃЋрЃљ
  char device_prefix[32];
  esp_err_t ret = fmw_config_get_string("global_config.device.id.prefix", device_prefix, sizeof(device_prefix));
  if (ret == ESP_OK) {
      ESP_LOGI(TAG, "Device prefix: %s", device_prefix);
  } else {
      ESP_LOGE(TAG, "Failed to read device prefix, using default.");
      // рЃерЃћрЃфрЃЊрЃЮрЃЏрЃўрЃА рЃЊрЃљрЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃљ, рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ, default рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃўрЃА рЃЏрЃўрЃюрЃўрЃГрЃћрЃЉрЃљ
  }

  // рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃўрЃА рЃгрЃљрЃЎрЃўрЃЌрЃ«рЃЋрЃљ
  int update_interval;
  ret = fmw_config_get_int("indoor_sensor.update_interval_sec", &update_interval);
  if (ret == ESP_OK) {
      ESP_LOGI(TAG, "Sensor update interval: %d seconds", update_interval);
  } else {
      ESP_LOGW(TAG, "Update interval not found for 'indoor_sensor', using default.");
      // рЃерЃћрЃфрЃЊрЃЮрЃЏрЃўрЃА рЃЊрЃљрЃЏрЃБрЃерЃљрЃЋрЃћрЃЉрЃљ, рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ, default рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃўрЃА рЃЏрЃўрЃюрЃўрЃГрЃћрЃЉрЃљ
  }
  ```

---

## 5. рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ

- **рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ:** Framework-рЃў рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃљрЃЊ рЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃА `system_config.json`-рЃўрЃА рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљрЃА рЃЊрЃљ рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљрЃА рЃњрЃљрЃерЃЋрЃћрЃЉрЃўрЃАрЃљрЃА.
- **Default рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃћрЃЉрЃў:** рЃЌрЃБ рЃарЃЮрЃЏрЃћрЃџрЃўрЃЏрЃћ рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃў рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃўрЃљ рЃљрЃю рЃљрЃа рЃљрЃарЃАрЃћрЃЉрЃЮрЃЉрЃА, рЃЏрЃЮрЃЊрЃБрЃџрЃЏрЃљ рЃБрЃюрЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃЮрЃА рЃгрЃўрЃюрЃљрЃАрЃгрЃљрЃа рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃБрЃџрЃў (default) рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ.
- **рЃџрЃЮрЃњрЃўрЃарЃћрЃЉрЃљ:** рЃДрЃЋрЃћрЃџрЃљ рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ рЃЊрЃљ рЃњрЃљрЃцрЃарЃЌрЃ«рЃўрЃџрЃћрЃЉрЃљ рЃџрЃЮрЃњрЃўрЃарЃЊрЃћрЃЉрЃљ, рЃарЃљрЃф рЃљрЃЏрЃљрЃарЃбрЃўрЃЋрЃћрЃЉрЃА рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃўрЃА рЃљрЃдрЃЏрЃЮрЃЕрЃћрЃюрЃљрЃА.

---

## 6. рЃАрЃљрЃБрЃЎрЃћрЃЌрЃћрЃАрЃЮ рЃърЃарЃљрЃЦрЃбрЃўрЃЎрЃћрЃЉрЃў (Best Practices)

- **рЃљрЃдрЃгрЃћрЃарЃўрЃЌрЃў рЃАрЃљрЃ«рЃћрЃџрЃћрЃЉрЃў:** рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЌ рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃЊрЃћрЃАрЃЎрЃарЃўрЃърЃбрЃўрЃБрЃџрЃў рЃЊрЃљ рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃБрЃарЃў рЃАрЃљрЃ«рЃћрЃџрЃћрЃЉрЃў рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА.
- **Hardcoded рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃћрЃЉрЃўрЃА рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю рЃљрЃарЃўрЃЊрЃћрЃЉрЃљ:** рЃљрЃарЃљрЃАрЃЊрЃарЃЮрЃА рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃЮрЃЌ hardcoded рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃћрЃЉрЃў рЃЎрЃЮрЃЊрЃерЃў. рЃДрЃЋрЃћрЃџрЃљ рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃў рЃБрЃюрЃЊрЃљ рЃўрЃДрЃЮрЃА `system_config.json`-рЃерЃў.
- **рЃЊрЃЮрЃЎрЃБрЃЏрЃћрЃюрЃбрЃљрЃфрЃўрЃљ:** рЃДрЃЋрЃћрЃџрЃљ рЃљрЃ«рЃљрЃџрЃў рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃў рЃЊрЃљ рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃљ рЃЊрЃћрЃбрЃљрЃџрЃБрЃарЃљрЃЊ рЃљрЃдрЃгрЃћрЃарЃћрЃЌ рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃЊрЃЮрЃЎрЃБрЃЏрЃћрЃюрЃбрЃљрЃфрЃўрЃљрЃерЃў.
- **рЃЎрЃЮрЃюрЃЋрЃћрЃюрЃфрЃўрЃћрЃЉрЃўрЃА рЃЊрЃљрЃфрЃЋрЃљ:** рЃЊрЃљрЃўрЃфрЃљрЃЋрЃўрЃЌ рЃърЃарЃЮрЃћрЃЦрЃбрЃерЃў рЃЏрЃўрЃдрЃћрЃЉрЃБрЃџрЃў [рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃўрЃА](../convention/configuration_management.md) рЃЊрЃљ [рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃўрЃА](../convention/module_structure.md) рЃгрЃћрЃАрЃћрЃЉрЃў.

---

рЃЌрЃБ рЃерЃћрЃњрЃћрЃЦрЃЏрЃюрЃљрЃЌ рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃљ, рЃўрЃ«рЃўрЃџрЃћрЃЌ [Troubleshooting](../troubleshooting/) рЃЊрЃЮрЃЎрЃБрЃЏрЃћрЃюрЃбрЃљрЃфрЃўрЃљ.

