<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Synapse ESP Framework: components/modules/drivers/i2c_bus/src/i2c_bus.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Synapse ESP Framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('i2c__bus_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">i2c_bus.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of the I2C Bus module using the new ESP-IDF v5.x driver.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="synapse_8h_source.html">synapse.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="i2c__bus_8h_source.html">i2c_bus.h</a>&quot;</code><br />
<code>#include &quot;driver/i2c_master.h&quot;</code><br />
<code>#include &quot;freertos/FreeRTOS.h&quot;</code><br />
<code>#include &quot;freertos/semphr.h&quot;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for i2c_bus.c:</div>
<div class="dyncontent">
<div class="center"><img src="i2c__bus_8c__incl.png" border="0" usemap="#acomponents_2modules_2drivers_2i2c__bus_2src_2i2c__bus_8c" alt=""/></div>
<map name="acomponents_2modules_2drivers_2i2c__bus_2src_2i2c__bus_8c" id="acomponents_2modules_2drivers_2i2c__bus_2src_2i2c__bus_8c">
<area shape="rect" title="Implementation of the I2C Bus module using the new ESP&#45;IDF v5.x driver." alt="" coords="1454,5,1617,60"/>
<area shape="rect" href="synapse_8h.html" title="Synapse ESP Framework &#45; მთავარი საჯარო ჰედერი." alt="" coords="889,108,977,133"/>
<area shape="poly" title=" " alt="" coords="1454,48,991,114,990,108,1453,43"/>
<area shape="rect" title=" " alt="" coords="5,328,156,353"/>
<area shape="poly" title=" " alt="" coords="1454,37,1186,40,824,50,638,59,465,72,317,89,205,111,159,121,122,131,91,149,63,183,56,199,52,216,52,252,61,286,71,315,66,317,55,288,47,252,46,215,51,197,58,180,88,145,120,126,158,116,204,105,316,84,464,67,638,54,824,45,1186,34,1454,31"/>
<area shape="rect" title=" " alt="" coords="180,328,317,353"/>
<area shape="poly" title=" " alt="" coords="1454,39,1128,50,691,76,477,95,291,119,215,133,153,148,107,165,80,183,69,203,70,222,81,242,100,261,153,295,207,320,205,325,150,299,97,265,77,245,65,224,64,202,76,180,104,160,151,143,214,128,290,114,476,90,690,71,1128,45,1454,33"/>
<area shape="rect" title=" " alt="" coords="1908,255,1979,280"/>
<area shape="poly" title=" " alt="" coords="1618,47,1685,65,1760,92,1835,130,1870,153,1903,179,1925,209,1939,241,1934,243,1920,212,1899,183,1867,157,1832,134,1758,97,1683,70,1616,52"/>
<area shape="rect" title=" " alt="" coords="2003,255,2073,280"/>
<area shape="poly" title=" " alt="" coords="1617,43,1722,66,1778,83,1832,106,1863,122,1884,139,1930,179,2014,244,2010,248,1927,183,1880,143,1860,127,1830,110,1777,88,1721,71,1616,48"/>
<area shape="rect" href="i2c__bus_8h.html" title="Public Service API contract for the I2C Bus module." alt="" coords="1494,181,1577,207"/>
<area shape="poly" title=" " alt="" coords="1538,60,1538,168,1533,168,1533,60"/>
<area shape="rect" title=" " alt="" coords="2014,108,2161,133"/>
<area shape="poly" title=" " alt="" coords="1617,44,2001,103,2000,108,1616,49"/>
<area shape="rect" href="base__module_8h.html" title="Defines the base module interface and status types." alt="" coords="727,255,848,280"/>
<area shape="poly" title=" " alt="" coords="935,134,928,170,921,190,909,208,878,235,843,252,841,248,875,230,905,205,916,188,923,168,929,133"/>
<area shape="rect" href="service__types_8h.html" title="Synapse ESP Framework &#45; ცენტრალიზებული სერვისის ტიპების განსაზღვრებები." alt="" coords="1204,255,1328,280"/>
<area shape="poly" title=" " alt="" coords="977,120,1058,123,1154,132,1242,150,1275,163,1297,180,1305,195,1303,213,1287,245,1282,242,1298,211,1299,196,1293,183,1272,168,1240,155,1153,137,1058,128,977,125"/>
<area shape="rect" href="framework__events_8h.html" title="Defines standardized, framework&#45;wide event identifiers." alt="" coords="405,181,561,207"/>
<area shape="poly" title=" " alt="" coords="889,132,570,182,569,177,888,126"/>
<area shape="rect" href="event__payloads_8h.html" title="ტელემეტრიისა და სისტემური ივენთების მონაცემთა სტრუქტურები." alt="" coords="1751,181,1888,207"/>
<area shape="poly" title=" " alt="" coords="977,123,1737,183,1736,189,977,128"/>
<area shape="rect" href="service__locator_8h.html" title="Framework&#45;ის სერვის ლოკატორის საჯარო API." alt="" coords="1129,181,1261,207"/>
<area shape="poly" title=" " alt="" coords="976,131,1140,175,1139,180,974,136"/>
<area shape="rect" href="event__bus_8h.html" title="Event Bus კომპონენტის Public API." alt="" coords="387,255,489,280"/>
<area shape="poly" title=" " alt="" coords="889,126,762,132,602,143,459,160,410,171,385,183,380,197,384,213,397,229,412,244,409,248,393,233,380,216,374,197,381,180,409,166,459,155,602,137,762,126,889,121"/>
<area shape="rect" href="config__manager_8h.html" title="კონფიგურაციის მენეჯერის API." alt="" coords="513,255,651,280"/>
<area shape="poly" title=" " alt="" coords="889,126,764,132,607,143,467,160,419,171,395,183,390,194,395,205,411,218,438,230,507,249,505,254,436,235,408,223,391,208,385,194,391,180,417,166,466,155,607,138,764,127,888,121"/>
<area shape="rect" href="resource__manager_8h.html" title="რესურსების (GPIO, I2C, SPI და სხვა) მართვის Public API" alt="" coords="923,255,1078,280"/>
<area shape="poly" title=" " alt="" coords="977,120,1054,124,1143,134,1224,151,1255,164,1276,180,1282,194,1276,208,1264,219,1247,228,1201,243,1147,254,1092,261,1091,256,1146,248,1200,238,1245,223,1261,214,1272,205,1277,194,1272,183,1253,168,1223,156,1142,139,1053,130,977,126"/>
<area shape="rect" href="system__manager_8h.html" title="სისტემის მენეჯერის Public API." alt="" coords="586,181,733,207"/>
<area shape="poly" title=" " alt="" coords="889,136,717,180,716,175,888,131"/>
<area shape="rect" href="logging_8h.html" title="Synapse ESP Framework&#45;ის ლოგირების დამხმარე ინტერფეისი." alt="" coords="1387,181,1470,207"/>
<area shape="poly" title=" " alt="" coords="977,125,1149,147,1369,179,1374,179,1373,185,1368,184,1148,152,976,130"/>
<area shape="rect" href="event__data__wrapper_8h.html" title="Event Bus&#45;ისთვის მონაცემთა შეფუთვის (Wrapper) და Reference Counting&#45;ის API." alt="" coords="145,255,312,280"/>
<area shape="poly" title=" " alt="" coords="888,127,624,146,478,163,418,173,373,184,340,197,308,214,256,249,253,244,306,210,338,193,372,179,417,167,477,157,623,141,888,122"/>
<area shape="rect" href="module__helpers_8h.html" title="მოდულებისთვის განკუთვნილი ზოგადი დამხმარე (Helper) ფუნქციები." alt="" coords="757,181,895,207"/>
<area shape="poly" title=" " alt="" coords="917,136,856,176,853,171,914,131"/>
<area shape="rect" href="module__factory_8h.html" title="მოდულების შემქმნელი (Factory) კომპონენტის Public API." alt="" coords="971,181,1105,207"/>
<area shape="poly" title=" " alt="" coords="951,131,1011,171,1008,176,948,136"/>
<area shape="rect" href="module__registry_8h.html" title="მოდულების რეგისტრაციისა და მოძიების API." alt="" coords="90,181,229,207"/>
<area shape="poly" title=" " alt="" coords="889,128,618,149,248,184,243,185,242,179,247,179,617,144,888,123"/>
<area shape="rect" title=" " alt="" coords="1525,328,1621,353"/>
<area shape="poly" title=" " alt="" coords="849,272,912,277,1511,331,1511,336,911,283,848,277"/>
<area shape="rect" title=" " alt="" coords="746,328,829,353"/>
<area shape="poly" title=" " alt="" coords="790,280,790,314,785,314,785,280"/>
<area shape="rect" title=" " alt="" coords="909,328,980,353"/>
<area shape="poly" title=" " alt="" coords="814,278,908,320,906,325,812,282"/>
<area shape="rect" title=" " alt="" coords="591,328,672,353"/>
<area shape="poly" title=" " alt="" coords="763,282,670,325,668,320,761,278"/>
<area shape="rect" title=" " alt="" coords="1104,328,1177,353"/>
<area shape="poly" title=" " alt="" coords="845,277,1091,327,1090,332,844,283"/>
<area shape="poly" title=" " alt="" coords="726,277,170,330,170,325,726,272"/>
<area shape="poly" title=" " alt="" coords="727,279,332,331,331,326,726,274"/>
<area shape="poly" title=" " alt="" coords="1830,206,1846,242,1848,262,1840,282,1826,293,1806,303,1754,319,1693,330,1635,337,1634,332,1692,325,1752,314,1805,298,1823,289,1836,278,1842,262,1841,243,1825,208"/>
<area shape="poly" title=" " alt="" coords="1822,207,1818,244,1810,265,1796,282,1762,296,1701,307,1530,324,1340,335,1191,341,1191,335,1340,330,1530,319,1700,302,1760,291,1792,278,1805,262,1812,243,1817,206"/>
<area shape="rect" href="framework__config_8h.html" title="Framework&#45;ის გლობალური კონფიგურაციის მაკროები" alt="" coords="1631,255,1781,280"/>
<area shape="poly" title=" " alt="" coords="1803,209,1737,250,1734,245,1800,204"/>
<area shape="poly" title=" " alt="" coords="1841,204,1913,245,1910,250,1838,209"/>
<area shape="poly" title=" " alt="" coords="1855,204,1990,248,1989,253,1854,209"/>
<area shape="poly" title=" " alt="" coords="1631,278,994,337,994,332,1630,273"/>
<area shape="poly" title=" " alt="" coords="1132,209,1010,233,912,257,887,270,862,282,770,311,686,331,685,326,768,306,860,278,885,265,910,252,1009,228,1131,204"/>
<area shape="poly" title=" " alt="" coords="1209,205,1247,243,1243,247,1205,209"/>
<area shape="poly" title=" " alt="" coords="470,278,588,321,586,326,468,283"/>
<area shape="rect" title=" " alt="" coords="362,328,437,353"/>
<area shape="poly" title=" " alt="" coords="434,282,414,317,410,315,429,279"/>
<area shape="poly" title=" " alt="" coords="616,277,742,321,740,326,614,283"/>
<area shape="poly" title=" " alt="" coords="592,279,618,315,613,318,588,282"/>
<area shape="poly" title=" " alt="" coords="651,275,1091,330,1090,336,651,280"/>
<area shape="poly" title=" " alt="" coords="513,281,170,329,169,324,512,276"/>
<area shape="poly" title=" " alt="" coords="529,283,316,328,315,322,528,277"/>
<area shape="poly" title=" " alt="" coords="967,283,836,326,834,321,966,277"/>
<area shape="poly" title=" " alt="" coords="994,282,964,319,960,316,989,279"/>
<area shape="poly" title=" " alt="" coords="942,283,686,332,685,326,941,277"/>
<area shape="poly" title=" " alt="" coords="681,204,755,245,753,250,679,209"/>
<area shape="poly" title=" " alt="" coords="664,207,668,240,665,281,649,317,644,315,659,279,663,240,659,207"/>
<area shape="poly" title=" " alt="" coords="733,203,1091,252,1107,265,1119,281,1135,314,1130,316,1114,284,1103,269,1089,257,733,208"/>
<area shape="rect" title=" " alt="" coords="1352,255,1436,280"/>
<area shape="poly" title=" " alt="" coords="1425,208,1408,243,1403,241,1421,206"/>
<area shape="poly" title=" " alt="" coords="313,274,841,325,896,331,895,337,840,331,312,279"/>
<area shape="poly" title=" " alt="" coords="294,277,577,327,576,332,293,283"/>
<area shape="poly" title=" " alt="" coords="206,282,118,324,116,320,204,278"/>
<area shape="poly" title=" " alt="" coords="235,280,244,314,239,316,229,281"/>
<area shape="poly" title=" " alt="" coords="257,278,360,320,358,325,255,282"/>
<area shape="poly" title=" " alt="" coords="822,208,802,244,798,241,817,206"/>
<area shape="poly" title=" " alt="" coords="998,209,842,253,840,248,997,204"/>
<area shape="poly" title=" " alt="" coords="1073,204,1107,223,1123,237,1136,253,1146,284,1147,315,1142,315,1141,285,1132,256,1119,241,1104,228,1070,209"/>
<area shape="poly" title=" " alt="" coords="229,201,713,255,712,260,229,206"/>
<area shape="poly" title=" " alt="" coords="195,204,324,252,350,265,376,278,483,308,578,328,577,333,481,313,374,282,348,270,322,257,193,209"/>
<area shape="poly" title=" " alt="" coords="140,209,113,229,91,256,82,285,81,314,76,314,77,284,86,253,109,225,137,205"/>
<area shape="poly" title=" " alt="" coords="152,208,134,242,130,261,135,279,159,304,190,321,188,326,156,308,130,281,125,261,129,240,148,206"/>
<area shape="poly" title=" " alt="" coords="1494,207,1482,209,1323,229,1197,239,1072,246,912,257,862,262,862,256,911,252,1072,240,1197,234,1322,224,1482,204,1493,202"/>
<area shape="poly" title=" " alt="" coords="1549,205,1561,221,1572,241,1577,262,1569,282,1543,301,1503,315,1454,326,1400,334,1286,341,1191,343,1191,338,1286,336,1399,328,1453,321,1502,310,1540,296,1565,278,1572,262,1567,243,1557,224,1544,209"/>
<area shape="rect" title=" " alt="" coords="1460,255,1555,280"/>
<area shape="poly" title=" " alt="" coords="1533,208,1519,243,1514,241,1528,206"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structi2c__bus__private__data__t.html">i2c_bus_private_data_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a25abd11c453ed997deb62b0f82145c23" id="r_a25abd11c453ed997deb62b0f82145c23"><td class="memItemLeft" align="right" valign="top"><a id="a25abd11c453ed997deb62b0f82145c23" name="a25abd11c453ed997deb62b0f82145c23"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DEFINE_COMPONENT_TAG</b> (&quot;I2C_BUS&quot;)</td></tr>
<tr class="separator:a25abd11c453ed997deb62b0f82145c23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf4e532bca146a2a6707a509e03b5aba" id="r_aaf4e532bca146a2a6707a509e03b5aba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmodule__t.html">module_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c__bus_8c.html#aaf4e532bca146a2a6707a509e03b5aba">i2c_bus_create</a> (const cJSON *config)</td></tr>
<tr class="memdesc:aaf4e532bca146a2a6707a509e03b5aba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new instance of the I2C Bus module.  <br /></td></tr>
<tr class="separator:aaf4e532bca146a2a6707a509e03b5aba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the I2C Bus module using the new ESP-IDF v5.x driver. </p>
<dl class="section author"><dt>Author</dt><dd>Giorgi Magradze </dd></dl>
<dl class="section version"><dt>Version</dt><dd>2.1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2025-07-26</dd></dl>
<p>This module provides a thread-safe, resource-managed service for accessing a hardware I2C bus. It utilizes the modern <code>i2c_master.h</code> driver, locks resources via the ResourceManager, and registers a service with the ServiceLocator. It adheres to the Synapse v5.0.0+ memory and lifecycle management contracts. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aaf4e532bca146a2a6707a509e03b5aba" name="aaf4e532bca146a2a6707a509e03b5aba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf4e532bca146a2a6707a509e03b5aba">&#9670;&#160;</a></span>i2c_bus_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmodule__t.html">module_t</a> * i2c_bus_create </td>
          <td>(</td>
          <td class="paramtype">const cJSON *&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a new instance of the I2C Bus module. </p>
<p>This is the factory function for the module, called by the Module Factory. It takes ownership of the provided config object. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td>A pointer to the cJSON configuration object for this module instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the newly created <a class="el" href="structmodule__t.html" title="The primary structure defining a framework module.">module_t</a> structure, or NULL on failure. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_409f97388efe006bc3438b95e9edef48.html">components</a></li><li class="navelem"><a class="el" href="dir_6a88773b00803615fafb700ddfe362d0.html">modules</a></li><li class="navelem"><a class="el" href="dir_244e1f819aeba2c5aeac137ed19d68eb.html">drivers</a></li><li class="navelem"><a class="el" href="dir_0b19c90bc32995ae8a070c8414306ec0.html">i2c_bus</a></li><li class="navelem"><a class="el" href="dir_8e605f9bc1ad0ce0a0ad4e00f128bfbe.html">src</a></li><li class="navelem"><a class="el" href="i2c__bus_8c.html">i2c_bus.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
