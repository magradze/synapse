<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Synapse ESP Framework: /home/runner/work/synapse-esp/synapse-esp/components/core/include/synapse_utils.h</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Synapse ESP Framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_2home_2runner_2work_2synapse-esp_2synapse-esp_2components_2core_2include_2synapse_utils_8h-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">/home/runner/work/synapse-esp/synapse-esp/components/core/include/synapse_utils.h</div></div>
</div><!--header-->
<div class="contents">
<p>A guard macro to check a condition and return on failure.</p>
<p>A guard macro to check a condition and return on failure. This macro simplifies error checking at the beginning of functions. If the <code>condition</code> is false, it logs an error message using the provided <code>tag</code> and <code>format</code>, and then executes a <code>return</code> statement with the specified <code>ret_val</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">condition</td><td>The condition to check. Execution continues if true. </td></tr>
    <tr><td class="paramname">tag</td><td>The logging tag to use for the error message. </td></tr>
    <tr><td class="paramname">ret_val</td><td>The value to return if the condition is false. </td></tr>
    <tr><td class="paramname">format</td><td>A printf-style format string for the error message. </td></tr>
    <tr><td class="paramname">...</td><td>Variable arguments for the format string.</td></tr>
  </table>
  </dd>
</dl>
<p>// Instead of: // if (handle == NULL) { // ESP_LOGE(TAG, "Handle cannot be NULL!"); // return ESP_ERR_INVALID_ARG; // } // // Use this: SYNAPSE_GUARD(handle != NULL, TAG, ESP_ERR_INVALID_ARG, "Handle cannot be NULL!");</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef SYNAPSE_UTILS_H</span></div>
<div class="line"><span class="preprocessor">#define SYNAPSE_UTILS_H</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="synapse_8h.html">synapse.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;cJSON.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// =========================================================================</span></div>
<div class="line"><span class="comment">//      Safe String Handling</span></div>
<div class="line"><span class="comment">// =========================================================================</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">char</span>* <a id="a0" name="a0"></a><a class="code hl_function" href="synapse__utils_8h.html#a72f8a9d3efa74d60fe280932c365961b">synapse_safe_strncpy</a>(<span class="keywordtype">char</span> *dest, <span class="keyword">const</span> <span class="keywordtype">char</span> *src, <span class="keywordtype">size_t</span> size);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// =========================================================================</span></div>
<div class="line"><span class="comment">//      Safe Configuration Parsing Helpers</span></div>
<div class="line"><span class="comment">// =========================================================================</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> <a id="a1" name="a1"></a><a class="code hl_function" href="synapse__utils_8h.html#a240c9bec50dd32c0be839ab6a4d5decc">synapse_config_get_string_from_node</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* tag, <span class="keyword">const</span> cJSON *json_node, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">char</span> *dest, <span class="keywordtype">size_t</span> dest_size);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> <a id="a2" name="a2"></a><a class="code hl_function" href="synapse__utils_8h.html#aa70b5e48e2691258a8f42faebdb83ff1">synapse_config_get_int_from_node</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* tag, <span class="keyword">const</span> cJSON *json_node, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">int</span> *out_value);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> <a id="a3" name="a3"></a><a class="code hl_function" href="synapse__utils_8h.html#a1a2bf54e86e59bd449fe109e9c0bf565">synapse_config_get_bool_from_node</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* tag, <span class="keyword">const</span> cJSON *json_node, <span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keywordtype">bool</span> *out_value);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// =========================================================================</span></div>
<div class="line"><span class="comment">//      Guard Clause &amp; Validation Helpers</span></div>
<div class="line"><span class="comment">// =========================================================================</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define SYNAPSE_GUARD(condition, tag, ret_val, format, ...) \</span></div>
<div class="line"><span class="preprocessor">  do                                                        \</span></div>
<div class="line"><span class="preprocessor">  {                                                         \</span></div>
<div class="line"><span class="preprocessor">    if (!(condition))                                       \</span></div>
<div class="line"><span class="preprocessor">    {                                                       \</span></div>
<div class="line"><span class="preprocessor">      ESP_LOGE(tag, format, ##__VA_ARGS__);                 \</span></div>
<div class="line"><span class="preprocessor">      return ret_val;                                       \</span></div>
<div class="line"><span class="preprocessor">    }                                                       \</span></div>
<div class="line"><span class="preprocessor">  } while (0)</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define SYNAPSE_GUARD_VOID(condition, tag, format, ...) \</span></div>
<div class="line"><span class="preprocessor">  do                                                    \</span></div>
<div class="line"><span class="preprocessor">  {                                                     \</span></div>
<div class="line"><span class="preprocessor">    if (!(condition))                                   \</span></div>
<div class="line"><span class="preprocessor">    {                                                   \</span></div>
<div class="line"><span class="preprocessor">      ESP_LOGE(tag, format, ##__VA_ARGS__);             \</span></div>
<div class="line"><span class="preprocessor">      return;                                           \</span></div>
<div class="line"><span class="preprocessor">    }                                                   \</span></div>
<div class="line"><span class="preprocessor">  } while (0)</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line">}</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">// SYNAPSE_UTILS_H</span></div>
<div class="ttc" id="asynapse_8h_html"><div class="ttname"><a href="synapse_8h.html">synapse.h</a></div><div class="ttdoc">Synapse ESP Framework - The Main Public Header.</div></div>
<div class="ttc" id="asynapse__utils_8h_html_a1a2bf54e86e59bd449fe109e9c0bf565"><div class="ttname"><a href="synapse__utils_8h.html#a1a2bf54e86e59bd449fe109e9c0bf565">synapse_config_get_bool_from_node</a></div><div class="ttdeci">bool synapse_config_get_bool_from_node(const char *tag, const cJSON *json_node, const char *key, bool *out_value)</div><div class="ttdoc">Safely retrieves a boolean value from a cJSON object.</div><div class="ttdef"><b>Definition</b> synapse_utils.c:62</div></div>
<div class="ttc" id="asynapse__utils_8h_html_a240c9bec50dd32c0be839ab6a4d5decc"><div class="ttname"><a href="synapse__utils_8h.html#a240c9bec50dd32c0be839ab6a4d5decc">synapse_config_get_string_from_node</a></div><div class="ttdeci">bool synapse_config_get_string_from_node(const char *tag, const cJSON *json_node, const char *key, char *dest, size_t dest_size)</div><div class="ttdoc">Safely retrieves a string value from a cJSON object.</div><div class="ttdef"><b>Definition</b> synapse_utils.c:30</div></div>
<div class="ttc" id="asynapse__utils_8h_html_a72f8a9d3efa74d60fe280932c365961b"><div class="ttname"><a href="synapse__utils_8h.html#a72f8a9d3efa74d60fe280932c365961b">synapse_safe_strncpy</a></div><div class="ttdeci">char * synapse_safe_strncpy(char *dest, const char *src, size_t size)</div><div class="ttdoc">A safe version of strncpy that guarantees null-termination.</div><div class="ttdef"><b>Definition</b> synapse_utils.c:15</div></div>
<div class="ttc" id="asynapse__utils_8h_html_aa70b5e48e2691258a8f42faebdb83ff1"><div class="ttname"><a href="synapse__utils_8h.html#aa70b5e48e2691258a8f42faebdb83ff1">synapse_config_get_int_from_node</a></div><div class="ttdeci">bool synapse_config_get_int_from_node(const char *tag, const cJSON *json_node, const char *key, int *out_value)</div><div class="ttdoc">Safely retrieves an integer value from a cJSON object.</div><div class="ttdef"><b>Definition</b> synapse_utils.c:46</div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
