# Synapse Configuration Manager API Reference

## ­Ъј» рЃЏрЃўрЃќрЃљрЃюрЃў

рЃћрЃА рЃЊрЃЮрЃЎрЃБрЃЏрЃћрЃюрЃбрЃў рЃљрЃдрЃгрЃћрЃарЃА Synapse Framework-рЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃЏрЃћрЃюрЃћрЃ»рЃћрЃарЃўрЃА (`Config Manager`) API-рЃА. рЃћрЃА API рЃБрЃќрЃарЃБрЃюрЃЋрЃћрЃџрЃДрЃЮрЃцрЃА рЃћрЃарЃЌрЃўрЃљрЃю, рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮ рЃЊрЃљ рЃЏрЃЮрЃЦрЃюрЃўрЃџ рЃгрЃЋрЃЊрЃЮрЃЏрЃљрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃДрЃЋрЃћрЃџрЃљ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃБрЃџ рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃќрЃћ, рЃарЃЮрЃЏрЃџрЃћрЃЉрЃўрЃф runtime-рЃерЃў **рЃћрЃарЃЌрЃўрЃљрЃюрЃЊрЃћрЃЉрЃљ** рЃЉрЃљрЃќрЃўрЃАрЃБрЃарЃў `system_config.json`-рЃўрЃАрЃљ рЃЊрЃљ рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃўрЃА рЃўрЃюрЃЊрЃўрЃЋрЃўрЃЊрЃБрЃљрЃџрЃБрЃарЃў `config.json` рЃцрЃљрЃўрЃџрЃћрЃЉрЃўрЃЊрЃљрЃю.

---

## ­ЪћЉ рЃњрЃљрЃАрЃљрЃдрЃћрЃЉрЃўрЃА рЃцрЃЮрЃарЃЏрЃљрЃбрЃў (Dot-Notation)

рЃДрЃЋрЃћрЃџрЃљ `fmw_config_get_*` рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ рЃўрЃДрЃћрЃюрЃћрЃЉрЃА **рЃгрЃћрЃарЃбрЃўрЃџрЃўрЃЌ рЃњрЃљрЃЏрЃЮрЃДрЃЮрЃцрЃўрЃџ рЃњрЃљрЃАрЃљрЃдрЃћрЃЉрЃА (dot-notation)** рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃўрЃА рЃЏрЃўрЃАрЃљрЃдрЃћрЃЉрЃљрЃЊ. рЃцрЃЮрЃарЃЏрЃљрЃбрЃў рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃўрЃљ рЃўрЃЏрЃљрЃќрЃћ, рЃњрЃџрЃЮрЃЉрЃљрЃџрЃБрЃа рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃА рЃўрЃЌрЃ«рЃЮрЃЋрЃЌ рЃЌрЃБ рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃў рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃАрЃљрЃА.

- **рЃњрЃџрЃЮрЃЉрЃљрЃџрЃБрЃарЃў рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃўрЃАрЃЌрЃЋрЃўрЃА:**
    `"global_config.parameter_name"`
    *рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:* `"global_config.device.id.prefix"`

- **рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃўрЃАрЃЌрЃЋрЃўрЃА:**
    `"instance_name.parameter_name"`
    *рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:* `"main_broker.broker_uri"` рЃљрЃю `"indoor_sensor.update_interval_sec"`

---

## РџЎ№ИЈ рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў API рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў

### `esp_err_t fmw_config_get_string(const char *key, char *buffer, size_t buffer_size)`

- рЃЎрЃўрЃЌрЃ«рЃБрЃџрЃЮрЃЉрЃА рЃАрЃбрЃарЃўрЃЦрЃЮрЃюрЃўрЃА рЃбрЃўрЃърЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃА рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃљрЃерЃў рЃљрЃгрЃДрЃЮрЃЉрЃўрЃџрЃў рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃЊрЃљрЃю рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃБрЃџрЃў `key`-рЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ.
- **рЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃА:** `ESP_OK` рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃўрЃА рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў, `ESP_ERR_NOT_FOUND` рЃЌрЃБ рЃњрЃљрЃАрЃљрЃдрЃћрЃЉрЃў рЃЋрЃћрЃа рЃЏрЃЮрЃўрЃФрЃћрЃЉрЃюрЃљ, `ESP_ERR_NVS_TYPE_MISMATCH` рЃЌрЃБ рЃбрЃўрЃърЃў рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃўрЃљ.

### `esp_err_t fmw_config_get_int(const char *key, int *out_value)`

- рЃЎрЃўрЃЌрЃ«рЃБрЃџрЃЮрЃЉрЃА рЃЏрЃЌрЃћрЃџрЃў рЃарЃўрЃфрЃ«рЃЋрЃўрЃА (`int`) рЃбрЃўрЃърЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃА.
- **рЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃА:** `ESP_OK` рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃўрЃА рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў, рЃљрЃю рЃерЃћрЃАрЃљрЃЉрЃљрЃЏрЃўрЃА рЃерЃћрЃфрЃЊрЃЮрЃЏрЃўрЃА рЃЎрЃЮрЃЊрЃА.

### `esp_err_t fmw_config_get_bool(const char *key, bool *out_value)`

- рЃЎрЃўрЃЌрЃ«рЃБрЃџрЃЮрЃЉрЃА рЃџрЃЮрЃњрЃўрЃЎрЃБрЃарЃў (`bool`) рЃбрЃўрЃърЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃА.
- **рЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃА:** `ESP_OK` рЃгрЃљрЃарЃЏрЃљрЃбрЃћрЃЉрЃўрЃА рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў, рЃљрЃю рЃерЃћрЃАрЃљрЃЉрЃљрЃЏрЃўрЃА рЃерЃћрЃфрЃЊрЃЮрЃЏрЃўрЃА рЃЎрЃЮрЃЊрЃА.

### `esp_err_t fmw_config_save(void)`

- рЃўрЃюрЃљрЃ«рЃљрЃЋрЃА рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃљрЃерЃў рЃљрЃарЃАрЃћрЃЉрЃБрЃџ рЃАрЃарЃБрЃџ, рЃљрЃгрЃДрЃЮрЃЉрЃўрЃџ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљрЃА NVS рЃЏрЃБрЃЊрЃЏрЃўрЃЋ рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃљрЃерЃў. рЃћрЃА рЃАрЃљрЃАрЃљрЃарЃњрЃћрЃЉрЃџрЃЮрЃљ, рЃЌрЃБ runtime-рЃерЃў рЃЏрЃЮрЃ«рЃЊрЃљ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃўрЃА рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃљ.

---

## ­Ъџђ рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃћрЃЉрЃў

### рЃњрЃџрЃЮрЃЉрЃљрЃџрЃБрЃарЃў рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃўрЃА рЃгрЃљрЃЎрЃўрЃЌрЃ«рЃЋрЃљ

```c
char device_prefix[32];
esp_err_t ret = fmw_config_get_string("global_config.device.id.prefix", device_prefix, sizeof(device_prefix));
if (ret == ESP_OK) {
    ESP_LOGI(TAG, "Device prefix is: %s", device_prefix);
}
```

### рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃўрЃА рЃгрЃљрЃЎрЃўрЃЌрЃ«рЃЋрЃљ

```c
// рЃЊрЃљрЃЋрЃБрЃерЃЋрЃљрЃЌ, рЃЕрЃЋрЃћрЃю рЃЋрЃўрЃЏрЃДрЃЮрЃцрЃћрЃЉрЃўрЃЌ рЃЏрЃЮрЃЊрЃБрЃџрЃерЃў, рЃарЃЮрЃЏрЃџрЃўрЃА instance_name рЃљрЃарЃўрЃА "main_broker"

char broker_uri[128];
esp_err_t ret = fmw_config_get_string("main_broker.broker_uri", broker_uri, sizeof(broker_uri));
if (ret != ESP_OK) {
    // Handle error, maybe use a default value
}

// рЃЋрЃЎрЃўрЃЌрЃ«рЃБрЃџрЃЮрЃЉрЃЌ рЃАрЃ«рЃЋрЃљ рЃЏрЃЮрЃЊрЃБрЃџрЃўрЃА ("indoor_sensor") рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃА
int update_interval;
ret = fmw_config_get_int("indoor_sensor.update_interval_sec", &update_interval);
if (ret == ESP_OK) {
    ESP_LOGI(TAG, "Sensor update interval: %d seconds", update_interval);
}
```

рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃўрЃЌрЃў рЃЊрЃћрЃбрЃљрЃџрЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА рЃўрЃ«рЃўрЃџрЃћрЃЌ [core_api.md](core_api.md), [module_api.md](module_api.md) рЃЊрЃљ [structure] рЃЊрЃЮрЃЎрЃБрЃЏрЃћрЃюрЃбрЃћрЃЉрЃў.
