# გაკვეთილი: მზა მოდულის დამატება თქვენს Synapse პროექტში

## 1. 🎯 მიზანი

ეს სახელმძღვანელო განკუთვნილია დეველოპერებისთვის, რომლებსაც სურთ, თავიანთ Synapse Framework-ზე დაფუძნებულ პროექტში დაამატონ უკვე არსებული, სხვა დეველოპერის მიერ შექმნილი მოდული.

Synapse-ის ეკოსისტემაში მოდულები, როგორც წესი, დამოუკიდებელი Git რეპოზიტორიებია. მათი პროექტში ინტეგრაცია ხდება **Git Submodule**-ის სტანდარტული და საიმედო მექანიზმით.

## 2. 📋 წინაპირობები

- თქვენ უკვე გაქვთ Synapse Framework-ის ლოკალური პროექტი.
- თქვენ გაქვთ იმ მოდულის Git რეპოზიტორიის URL, რომლის დამატებაც გსურთ (მაგ., `https://github.com/some-author/synapse_module_bme280.git`).

## 3. 🚀 მოდულის დამატების ნაბიჯები

### ეტაპი 1: მოდულის დამატება `git submodule` ბრძანებით

1. **გახსენით ტერმინალი** თქვენი Synapse პროექტის მთავარ (root) დირექტორიაში.

2. გამოიყენეთ `git submodule add` ბრძანება. თქვენ უნდა მიუთითოთ:
    - მოდულის რეპოზიტორიის URL.
    - ლოკალური გზა, სადაც მოდული უნდა განთავსდეს. Synapse-ის კონვენციის მიხედვით, ეს არის `components/modules/{category}/{module_name}`.

    **ბრძანების შაბლონი:**

    ```bash
    git submodule add <repository_url> components/modules/{category}/{module_name}
    ```

    **პრაქტიკული მაგალითი:**
    დავუშვათ, გვინდა დავამატოთ `bme280` სენსორის მოდული, რომელიც `sensors` კატეგორიას ეკუთვნის.

    ```bash
    git submodule add https://github.com/some-author/synapse_module_bme280.git components/modules/sensors/bme280_sensor
    ```

### ეტაპი 2: ცვლილებების შენახვა (Commit & Push)

`submodule`-ის დამატების შემდეგ, Git-მა შექმნა ახალი `.gitmodules` ფაილი (ან განაახლა არსებული) და დაამატა ჩანაწერი მოდულის შესახებ. ახლა ეს ცვლილება უნდა შეინახოთ თქვენს მთავარ რეპოზიტორიაში.

```bash
# დაამატეთ ცვლილებები Git-ის ინდექსში
git add .gitmodules components/modules/sensors/bme280_sensor

# შექმენით commit
git commit -m "feat: Add BME280 sensor module as a submodule"

# ატვირთეთ ცვლილებები თქვენს remote რეპოზიტორიაზე
git push
```

### ეტაპი 3: მოდულის ჩართვა `menuconfig`-ში

Synapse-ის build სისტემა ავტომატურად აღმოაჩენს ახალ მოდულს, მაგრამ ის გამორთულია ნაგულისხმევად.

1. **გაუშვით `menuconfig`:**

    ```bash
    idf.py menuconfig
    ```

2. **იპოვეთ და ჩართეთ მოდული:**
    გადადით
    - `Synapse Framework` --->
    - `Modules` --->
    - იპოვეთ თქვენი ახალი მოდული (მაგ., `BME280 Sensor`) და დააჭირეთ `Y` კლავიშს მის ჩასართავად (`[*]`).

3. **შეინახეთ და გამოდით.**

### ეტაპი 4: მოდულის კონფიგურაცია `config.json`-ში

ახლა, როდესაც მოდული ჩართულია, თქვენ უნდა დაამატოთ მისი კონფიგურაცია თქვენი აპლიკაციისთვის.

1. **გახსენით** ახლად დამატებული მოდულის დირექტორია (`components/modules/sensors/bme280_sensor`).
2. **გაეცანით** მის `README.md` და `config.json` ფაილებს, რათა გაიგოთ, რა პარამეტრები სჭირდება მას.
3. **დააკოპირეთ** კონფიგურაციის ობიექტი მისი `config.json`-იდან და **ჩასვით** თქვენი პროექტის შესაბამის `config.json` ფაილში (მაგ., `main/config.json` ან სადაც ინახავთ აპლიკაციის კონფიგურაციას).
4. **შეცვალეთ** პარამეტრები (მაგ., `instance_name`, `i2c_bus_service`) თქვენი პროექტის მოთხოვნების შესაბამისად.

**მაგალითი:**

```json
// თქვენი აპლიკაციის config.json ფაილში, "modules" მასივში:
{
    "type": "bme280_sensor",
    "enabled": true,
    "config": {
        "instance_name": "indoor_bme280",
        "i2c_bus_service": "main_i2c_bus"
    }
}
```

### ეტაპი 5: პროექტის აწყობა

```bash
idf.py build
```

**მზად არის!** თქვენ წარმატებით დაამატეთ და დააკონფიგურირეთ ახალი მოდული თქვენს პროექტში.
