# CHANGELOG

## [8.1.0] - 2025-08-30

### ✨ არქიტექტურული გაუმჯობესებები (Architectural Improvements)

- **refactor(core):** 🚀 `Promise Manager`-ის API სრულად გადაკეთდა, რათა აღმოიფხვრას `race condition`-ისა და `deadlock`-ის რისკები.
  - **უსაფრთხო არქიტექტურა:** `then()` და `catch()` ფუნქციები ამოღებულია. ამის ნაცვლად, `callback` ფუნქციები ახლა პირდაპირ გადაეცემა ასინქრონული ოპერაციის გამშვებ ფუნქციას, რაც უზრუნველყოფს `Promise` ობიექტის უცვლელობას მისი შექმნის შემდეგ.
  - **გამარტივებული API:** ახალი მიდგომა ამარტივებს `Promise`-ების გამოყენებას და კოდს უფრო ლოგიკურს ხდის.

### 🔄 შეცვლილი და გაუმჯობესებული (Changed & Improved)

- **refactor(wifi, ui):** 🛰️ `wifi_manager` და `ui_manager` მოდულები სრულად გადაკეთდა ახალი, უსაფრთხო `Promise` API-ს გამოსაყენებლად.
  - **`wifi_manager`:** `get_status_async` API ფუნქცია ახლა პარამეტრებად იღებს `callback` ფუნქციებს.
  - **`ui_manager`:** WiFi სტატუსის მოთხოვნის ლოგიკა განახლდა, რათა გამოიყენოს ახალი API, რაც უზრუნველყოფს ასინქრონული პასუხის საიმედო და უსაფრთხო დამუშავებას.
- **perf(wifi):** ⚡️ განხორციელდა მეხსიერების მართვის მნიშვნელოვანი ოპტიმიზაცია `wifi_manager`-ში.
  - **Heap ფრაგმენტაციის აღმოფხვრა:** სტატუსის JSON-ის გენერაციისას, დინამიური მეხსიერების გამოყოფა (`malloc`) ჩანაცვლდა სტატიკური ბუფერის გამოყენებით, რაც სრულად აგვარებს მეხსიერების ფრაგმენტაციისა და გაჟონვის პრობლემას, რომელიც გამოწვეული იყო სტატუსის ხშირი განახლებით.

### 🐛 შესწორებები (Bug Fixes)

- **fix(core):** 🐞 აღმოიფხვრა კრიტიკული `assert failed: heap_caps_free` და `spinlock_acquire` (Deadlock) შეცდომები, რომლებიც გამოწვეული იყო `Promise Manager`-ის საწყისი იმპლემენტაციის არასწორი მეხსიერების მართვითა და ნაკადების სინქრონიზაციით.
- **fix(ui):** 💡 `ui_manager`-ი ახლა კორექტულად აჩერებს და ანახლებს სტატუსის მოთხოვნის ტაიმერებს ეკრანის გამორთვისა და ჩართვისას, რაც სისტემას უფრო ენერგო-ეფექტურს ხდის.

### 📄 დოკუმენტაცია (Documentation)

- **docs(core, convention):** ✍️ განახლდა `promise_api.md` და `promise_pattern.md` დოკუმენტები, რათა სრულად აისახოს ახალი, გამარტივებული და უსაფრთხო `Promise` არქიტექტურა.

---

## [8.0.0] - 2025-08-07

### ✨ არქიტექტურული გაუმჯობესებები (Architectural Improvements)

- **feat(core):** 🚀 დაინერგა ასინქრონული ოპერაციების მართვის მძლავრი, **`Promise`**-ზე დაფუძნებული მექანიზმი.
  - **`Promise Manager`:** `core` კომპონენტს დაემატა ახალი, ფუნდამენტური სერვისი, რომელიც უზრუნველყოფს ასინქრონული "მოთხოვნა-პასუხის" პატერნის ელეგანტურ და უსაფრთხო იმპლემენტაციას.
  - **სუფთა ასინქრონული კოდი:** მოდულებს ახლა შეუძლიათ, დააბრუნონ `promise_handle_t` ობიექტი და მომხმარებლებმა (`consumers`) დაარეგისტრირონ `then()` და `catch()` `callback`-ები, რაც კოდს ბევრად უფრო წაკითხვადს და ლოგიკურად გამართულს ხდის, ვიდრე ივენთებზე დაფუძნებული მიდგომა.
  - **იზოლირებული შესრულება:** `Promise`-ის `callback`-ები სრულდება გამოყოფილ, `Promise Manager`-ის საკუთარ FreeRTOS ტასკში, რაც უზრუნველყოფს ნაკად-უსაფრთხოებას და გამორიცხავს სისტემური ტასკების (`Tmr Svc`, `Event Bus`) გადატვირთვის რისკს.
  - **საჯარო API:** `synapse.h` ფასადს დაემატა ახალი API-ები (`fmw_promise_then`, `fmw_promise_catch` და ა.შ.) `Promise`-ებთან სამუშაოდ.

### 📄 დოკუმენტაცია (Documentation)

- **docs(core):** ✍️ შეიქმნა და დაინდექსდა `Promise` პატერნთან დაკავშირებული სრული დოკუმენტაცია.
  - **`promise_pattern.md`:** დაემატა ახალი კონვენციის დოკუმენტი, რომელიც დეტალურად ხსნის `Promise` პატერნის გამოყენების სცენარებსა და საუკეთესო პრაქტიკებს.
  - **`promise_api.md`:** შეიქმნა სრული API რეფერენსი `Promise Manager`-ის ყველა საჯარო და შიდა ფუნქციისთვის.
  - განახლდა `communication_patterns.md`, `api_index.md` და `core_components.md` ფაილები ახალი მექანიზმის ასასახად.

---
[(v1.0.0 - v5.8.0)](docs/changelog/v5.md)
[(v6.0.0 - v6.2.0)](docs/changelog/v6.md)
[(v7.0.0 - v7.2.0)](docs/changelog/v7.md)
